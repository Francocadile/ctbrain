exports.id=8110,exports.ids=[8110],exports.modules={54630:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},14497:(e,t,a)=>{Promise.resolve().then(a.bind(a,42126))},26668:(e,t,a)=>{Promise.resolve().then(a.bind(a,43291))},35047:(e,t,a)=>{"use strict";var s=a(77389);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},43291:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(10326),l=a(77109);function r(){let{status:e}=(0,l.useSession)();return"authenticated"!==e?null:s.jsx("button",{onClick:()=>(0,l.signOut)({callbackUrl:"/login"}),className:"fixed right-4 top-4 rounded-md border px-3 py-1 text-sm hover:bg-gray-50","aria-label":"Cerrar sesi\xf3n",children:"Salir"})}var n=a(82152);function i({children:e}){return(0,s.jsxs)("div",{className:"min-h-screen relative",children:[s.jsx("div",{className:"absolute left-4 top-4 z-40",children:s.jsx(n.default,{className:"min-w-[160px]"})}),s.jsx(r,{}),e]})}},42126:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});var s=a(10326),l=a(77109);function r({children:e}){return s.jsx(l.SessionProvider,{children:e})}},82882:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(10326),l=a(17577);function r({text:e,side:t="top",className:a="",sizePx:r=16}){let n=l.useId(),i=(()=>{switch(t){case"bottom":return"left-1/2 -translate-x-1/2 top-full mt-1";case"left":return"right-full mr-2 top-1/2 -translate-y-1/2";case"right":return"left-full ml-2 top-1/2 -translate-y-1/2";default:return"left-1/2 -translate-x-1/2 bottom-full mb-1"}})(),d="absolute w-0 h-0 border-transparent",o=Math.max(12,Math.min(22,r)),c=(()=>{switch(t){case"bottom":return s.jsx("span",{"aria-hidden":!0,className:`${d} left-1/2 -translate-x-1/2 -top-[6px] border-b-white border-[6px]`,style:{borderTopWidth:0,borderLeftColor:"transparent",borderRightColor:"transparent"}});case"left":return s.jsx("span",{"aria-hidden":!0,className:`${d} -right-[6px] top-1/2 -translate-y-1/2 border-l-white border-[6px]`,style:{borderTopColor:"transparent",borderBottomColor:"transparent",borderRightWidth:0}});case"right":return s.jsx("span",{"aria-hidden":!0,className:`${d} -left-[6px] top-1/2 -translate-y-1/2 border-r-white border-[6px]`,style:{borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftWidth:0}});default:return s.jsx("span",{"aria-hidden":!0,className:`${d} left-1/2 -translate-x-1/2 -bottom-[6px] border-t-white border-[6px]`,style:{borderLeftColor:"transparent",borderRightColor:"transparent",borderBottomWidth:0}})}})();return s.jsx("span",{className:`relative inline-flex items-center align-middle ${a}`,children:(0,s.jsxs)("span",{className:"group relative inline-flex",children:[s.jsx("button",{type:"button","aria-describedby":n,className:"inline-flex items-center justify-center rounded-full border text-[10px] leading-none select-none cursor-help text-gray-700 border-gray-300 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-black",style:{width:o,height:o},children:"?"}),(0,s.jsxs)("span",{id:n,role:"tooltip",className:`pointer-events-none absolute z-50 hidden max-w-xs rounded-md border bg-white px-2 py-1 text-xs text-gray-700 shadow-lg ${i} group-hover:block group-focus-within:block`,children:[e,c]})]})})}},36101:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var s=a(10326),l=a(17577);function r({value:e,onChange:t,label:a="Jugador",disabled:r,className:n}){let{players:i,loading:d,error:o,reload:c}=function(e){let[t,a]=l.useState([]),[s,r]=l.useState(!1),[n,i]=l.useState(null),d=l.useCallback(async()=>{r(!0),i(null);try{let t=await fetch(e,{cache:"no-store"});if(!t.ok)throw Error(`HTTP ${t.status}`);let s=await t.json(),l=(Array.isArray(s)?s:[]).map(e=>({id:e.id,label:e.name||e.email||e.id}));a(l),0===l.length&&i("EMPTY")}catch{a([]),i("ERR")}finally{r(!1)}},[e]);return l.useEffect(()=>{d()},[d]),{players:t,loading:s,error:n,reload:d}}("/api/medico/users/players");return(0,s.jsxs)("div",{className:n??"",children:[s.jsx("label",{className:"text-sm font-medium",children:a}),(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,s.jsxs)("select",{className:"h-10 w-full rounded-md border px-3 text-sm",disabled:r||d||!!o,value:e,onChange:e=>t(e.target.value),children:[s.jsx("option",{value:"",children:d?"Cargando jugadores...":o?"Error al cargar":0===i.length?"Sin jugadores":"Seleccionar jugador"}),i.map(e=>s.jsx("option",{value:e.id,children:e.label},e.id))]}),o&&s.jsx("button",{type:"button",onClick:c,className:"h-10 rounded-md border px-3 text-sm",children:"Reintentar"})]}),!d&&!o&&0===i.length&&(0,s.jsxs)("p",{className:"mt-1 text-xs text-amber-600",children:["No hay usuarios con rol ",s.jsx("b",{children:"JUGADOR"}),"."]})]})}var n=a(82882),i=a(93059);function d(e,t){let[a,s,l]=e.split("-").map(e=>Number(e)),r=new Date(a,(s||1)-1,l||1);r.setDate(r.getDate()+t);let n=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0"),d=String(r.getDate()).padStart(2,"0");return`${n}-${i}-${d}`}function o({initial:e,defaultDate:t,onCancel:a,onSaved:o}){let{saveEpisode:c}=(0,i.Z)(t||(0,i.y)()),[u,m]=l.useState(e?.userId??""),[x,h]=l.useState(e?.status??"LIMITADA"),[p,b]=l.useState(e?.date??(t||(0,i.y)())),[g,j]=l.useState(e?.leaveStage??""),[v,f]=l.useState(e?.leaveKind??""),[N,S]=l.useState(e?.diagnosis??""),[y,E]=l.useState(e?.bodyPart??""),[C,w]=l.useState(e?.laterality??""),[A,R]=l.useState(e?.mechanism??""),[O,D]=l.useState(e?.severity??""),[I,T]=l.useState(e?.illSystem??""),[P,M]=l.useState(e?.illSymptoms??""),[k,L]=l.useState(!!e?.illContagious),[$,F]=l.useState(e?.illIsolationDays??""),[G,B]=l.useState(e?.illAptitude??""),[J,U]=l.useState(e?.feverMax??""),[Z,_]=l.useState(e?.startDate??p),q=e?.expectedReturn&&(e?.startDate??Z)?function(e,t){let[a,s,l]=e.split("-").map(Number),[r,n,i]=t.split("-").map(Number),d=new Date(a,(s||1)-1,l||1),o=new Date(r,(n||1)-1,i||1);return d.setHours(0,0,0,0),o.setHours(0,0,0,0),Math.max(0,Math.round((d.getTime()-o.getTime())/864e5))}(e.expectedReturn,e.startDate??Z):"",[H,V]=l.useState(q),[W,Y]=l.useState(e?.expectedReturn??(Z&&Number(H)?d(Z,Number(H)):"")),[z,X]=l.useState(!!e?.expectedReturnManual),[K,Q]=l.useState(e?.capMinutes??""),[ee,et]=l.useState(!!e?.noSprint),[ea,es]=l.useState(!!e?.noChangeOfDirection),[el,er]=l.useState(!!e?.gymOnly),[en,ei]=l.useState(!!e?.noContact),[ed,eo]=l.useState(e?.notes??""),[ec,eu]=l.useState(e?.medSignature??""),[em,ex]=l.useState(e?.protocolObjectives??""),[eh,ep]=l.useState(e?.protocolTasks??""),[eb,eg]=l.useState(e?.protocolControls??""),[ej,ev]=l.useState(e?.protocolCriteria??""),[ef,eN]=l.useState(!1),[eS,ey]=l.useState(null),[eE,eC]=l.useState(null),ew="BAJA"===x,eA="LIMITADA"===x||"REINTEGRO"===x;async function eR(e){if(e.preventDefault(),eC(null),ey(null),!u)return eC("Seleccion\xe1 un jugador.");if(!x)return eC("Seleccion\xe1 el estado.");if(!ec.trim())return eC("La firma del m\xe9dico es obligatoria.");if(ew){if(!v)return eC("Indic\xe1 si es LESI\xd3N o ENFERMEDAD.");if("LESION"===v&&!N.trim())return eC("Para lesi\xf3n, el diagn\xf3stico es obligatorio.");if("ENFERMEDAD"===v&&!P.trim()&&!N.trim())return eC("Para enfermedad, indic\xe1 s\xedntomas o diagn\xf3stico breve.")}eN(!0);try{let e={userId:u,date:p,status:x,leaveStage:ew&&g?g:null,leaveKind:ew&&v?v:null,diagnosis:ew&&"LESION"===v&&N||null,bodyPart:ew&&"LESION"===v&&y||null,laterality:ew&&"LESION"===v&&C||null,mechanism:ew&&"LESION"===v&&A||null,severity:ew&&"LESION"===v&&O||null,illSystem:ew&&"ENFERMEDAD"===v&&I||null,illSymptoms:ew&&"ENFERMEDAD"===v&&P||null,illContagious:ew&&"ENFERMEDAD"===v?!!k:null,illIsolationDays:ew&&"ENFERMEDAD"===v&&""!==$?Number($):null,illAptitude:ew&&"ENFERMEDAD"===v&&G||null,feverMax:ew&&"ENFERMEDAD"===v&&""!==J?Number(J):null,startDate:Z||null,expectedReturn:W||null,expectedReturnManual:z||!1,capMinutes:eA&&""!==K?Number(K):null,noSprint:!!eA&&ee,noChangeOfDirection:!!eA&&ea,gymOnly:!!eA&&el,noContact:!!eA&&en,notes:ed||null,medSignature:ec||null,protocolObjectives:em||null,protocolTasks:eh||null,protocolControls:eb||null,protocolCriteria:ej||null};await c(e),ey({kind:"ok",text:"Parte cl\xednico guardado correctamente."}),o?.()}catch(e){eC(e?.message||"No se pudo guardar.")}finally{eN(!1)}}return l.useEffect(()=>{z||(Z&&Number(H)?Y(d(Z,Number(H))):Y(""))},[Z,H,z]),(0,s.jsxs)("form",{onSubmit:eR,className:"space-y-5",children:[(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Jugador"}),s.jsx("div",{className:"mt-1",children:s.jsx(r,{value:u,onChange:m,disabled:!!e?.id||ef})}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"El CT lo ver\xe1 en lectura."})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Fecha del parte"}),s.jsx("input",{type:"date",className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:p,onChange:e=>b(e.target.value),disabled:ef})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Estado"}),(0,s.jsxs)("select",{className:"h-10 w-full rounded-md border px-3 text-sm",value:x,onChange:e=>h(e.target.value),disabled:ef,children:[s.jsx("option",{value:"BAJA",children:"BAJA"}),s.jsx("option",{value:"REINTEGRO",children:"REINTEGRO (RTP)"}),s.jsx("option",{value:"LIMITADA",children:"LIMITADA"}),s.jsx("option",{value:"ALTA",children:"ALTA"})]})]}),"BAJA"===x&&(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Estadio de la baja"}),(0,s.jsxs)("select",{className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:g,onChange:e=>j(e.target.value),disabled:ef,children:[s.jsx("option",{value:"",children:"—"}),s.jsx("option",{value:"PARTIDO",children:"Partido (competencia)"}),s.jsx("option",{value:"ENTRENAMIENTO",children:"Entrenamiento"}),s.jsx("option",{value:"EXTRADEPORTIVO",children:"Extra deportivo"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Condici\xf3n"}),(0,s.jsxs)("select",{className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:v,onChange:e=>f(e.target.value),disabled:ef,children:[s.jsx("option",{value:"",children:"—"}),s.jsx("option",{value:"LESION",children:"Lesi\xf3n"}),s.jsx("option",{value:"ENFERMEDAD",children:"Enfermedad"})]})]})]}),"BAJA"===x&&"LESION"===v&&(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Diagn\xf3stico breve"}),s.jsx("input",{className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:N,onChange:e=>S(e.target.value),placeholder:'Ej: "Distensi\xf3n isquiotibial grado I"',disabled:ef})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Zona / Parte del cuerpo"}),s.jsx("input",{className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:y,onChange:e=>E(e.target.value),placeholder:"Ej: Isquiotibiales, tobillo...",disabled:ef})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Lateralidad"}),(0,s.jsxs)("select",{className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:C,onChange:e=>w(e.target.value),disabled:ef,children:[s.jsx("option",{value:"",children:"—"}),s.jsx("option",{value:"IZQ",children:"Izq"}),s.jsx("option",{value:"DER",children:"Der"}),s.jsx("option",{value:"BILATERAL",children:"Bilateral"}),s.jsx("option",{value:"NA",children:"N/A"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Mecanismo"}),(0,s.jsxs)("select",{className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:A,onChange:e=>R(e.target.value),disabled:ef,children:[s.jsx("option",{value:"",children:"—"}),s.jsx("option",{value:"SOBRECARGA",children:"Sobrecarga"}),s.jsx("option",{value:"IMPACTO",children:"Impacto"}),s.jsx("option",{value:"TORSION",children:"Torsi\xf3n"}),s.jsx("option",{value:"ESTIRAMIENTO",children:"Estiramiento brusco"}),s.jsx("option",{value:"RECIDIVA",children:"Recidiva"}),s.jsx("option",{value:"OTRO",children:"Otro"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Gravedad"}),(0,s.jsxs)("select",{className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:O,onChange:e=>D(e.target.value),disabled:ef,children:[s.jsx("option",{value:"",children:"—"}),s.jsx("option",{value:"LEVE",children:"Leve"}),s.jsx("option",{value:"MODERADA",children:"Moderada"}),s.jsx("option",{value:"SEVERA",children:"Severa"})]})]})]}),"BAJA"===x&&"ENFERMEDAD"===v&&(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Sistema afectado"}),(0,s.jsxs)("select",{className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:I,onChange:e=>T(e.target.value),disabled:ef,children:[s.jsx("option",{value:"",children:"—"}),s.jsx("option",{value:"RESPIRATORIO",children:"Respiratorio"}),s.jsx("option",{value:"GASTROINTESTINAL",children:"Gastrointestinal"}),s.jsx("option",{value:"OTORRINO",children:"Otorrino"}),s.jsx("option",{value:"DERMATOLOGICO",children:"Dermatol\xf3gico"}),s.jsx("option",{value:"GENERAL",children:"General"}),s.jsx("option",{value:"OTRO",children:"Otro"})]})]}),(0,s.jsxs)("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"S\xedntomas / Dx breve"}),s.jsx("input",{className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:P,onChange:e=>M(e.target.value),placeholder:"Ej: fiebre, tos, malestar...",disabled:ef})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("label",{className:"text-sm font-medium",children:"\xbfContagioso?"}),s.jsx("input",{type:"checkbox",checked:k,onChange:e=>L(e.target.checked),disabled:ef}),k&&s.jsx("input",{type:"number",min:0,className:"h-10 w-36 rounded-md border px-3 text-sm",placeholder:"D\xedas aislamiento",value:$,onChange:e=>F(""===e.target.value?"":Number(e.target.value)),disabled:ef})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Apto para"}),(0,s.jsxs)("select",{className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:G,onChange:e=>B(e.target.value),disabled:ef,children:[s.jsx("option",{value:"",children:"—"}),s.jsx("option",{value:"SOLO_GIMNASIO",children:"Solo gimnasio"}),s.jsx("option",{value:"AEROBICO_SUAVE",children:"Aer\xf3bico suave"}),s.jsx("option",{value:"CHARLAS_TACTICO",children:"Charlas–t\xe1ctico"}),s.jsx("option",{value:"NINGUNO",children:"Ninguno"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Fiebre m\xe1xima (\xb0C)"}),s.jsx("input",{type:"number",step:"0.1",className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:J,onChange:e=>U(""===e.target.value?"":Number(e.target.value)),disabled:ef})]})]}),(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Fecha de inicio"}),s.jsx("input",{type:"date",className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:Z,onChange:e=>_(e.target.value),disabled:ef})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"D\xedas estimados"}),s.jsx("input",{type:"number",min:0,className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",placeholder:"p.ej. 7",value:H,onChange:e=>V(""===e.target.value?"":Math.max(0,Number(e.target.value))),disabled:ef}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Se usa para calcular el ETR. (min/max ya no se guardan)."})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm font-medium",children:"ETR (fecha de retorno)"}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-xs",children:[s.jsx("input",{type:"checkbox",checked:z,onChange:e=>X(e.target.checked),disabled:ef}),"Editar manual"]})]}),s.jsx("input",{type:"date",className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:W||"",onChange:e=>Y(e.target.value),disabled:!z||ef})]})]}),eA&&(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-5",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Tope de minutos"}),s.jsx("input",{type:"number",min:0,className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:K,onChange:e=>Q(""===e.target.value?"":Math.max(0,Number(e.target.value))),disabled:ef})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:ee,onChange:e=>et(e.target.checked),disabled:ef}),s.jsx("span",{className:"text-sm",children:"Sin sprint"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:ea,onChange:e=>es(e.target.checked),disabled:ef}),s.jsx("span",{className:"text-sm",children:"Sin cambios de direcci\xf3n"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:el,onChange:e=>er(e.target.checked),disabled:ef}),s.jsx("span",{className:"text-sm",children:"Solo gimnasio"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:en,onChange:e=>ei(e.target.checked),disabled:ef}),s.jsx("span",{className:"text-sm",children:"Sin contacto"})]})]}),(0,s.jsxs)("div",{className:"grid gap-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Informe m\xe9dico"}),s.jsx("textarea",{className:"mt-1 w-full rounded-md border p-3 text-sm",rows:4,value:ed,onChange:e=>eo(e.target.value),placeholder:"Evoluci\xf3n, tratamientos, observaciones…",disabled:ef})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Firma m\xe9dica (iniciales)"}),s.jsx("input",{className:"mt-1 h-10 w-full rounded-md border px-3 text-sm",value:ec,onChange:e=>eu(e.target.value),placeholder:"Ej: Dr. XX",disabled:ef})]})]}),(0,s.jsxs)("div",{className:"grid gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Plan / Protocolo semanal"}),s.jsx(n.Z,{text:"Texto estructurado: Objetivos, Tareas clave, Controles d3/d7 y Criterios de progresi\xf3n. Solo editable por M\xe9dico."})]}),(0,s.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Objetivos"}),s.jsx("textarea",{className:"mt-1 w-full rounded-md border p-2 text-sm",rows:3,value:em,onChange:e=>ex(e.target.value),disabled:ef})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Tareas clave"}),s.jsx("textarea",{className:"mt-1 w-full rounded-md border p-2 text-sm",rows:3,value:eh,onChange:e=>ep(e.target.value),disabled:ef})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Controles (d3/d7)"}),s.jsx("textarea",{className:"mt-1 w-full rounded-md border p-2 text-sm",rows:3,value:eb,onChange:e=>eg(e.target.value),disabled:ef})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-xs font-medium text-gray-600",children:"Criterios de progresi\xf3n"}),s.jsx("textarea",{className:"mt-1 w-full rounded-md border p-2 text-sm",rows:3,value:ej,onChange:e=>ev(e.target.value),disabled:ef})]})]})]}),eE&&s.jsx("p",{className:"text-sm text-red-600",children:eE}),eS&&s.jsx("div",{className:`rounded-md p-3 text-sm ${"ok"===eS.kind?"bg-emerald-50 text-emerald-700":"bg-red-50 text-red-700"}`,children:eS.text}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-2",children:[s.jsx("button",{type:"button",onClick:a,className:"h-10 rounded-md border px-4 text-sm hover:bg-gray-50",disabled:ef,children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:ef,className:"h-10 rounded-md bg-black px-4 text-sm text-white disabled:opacity-50",children:ef?"Guardando…":"Guardar"})]})]})}},82152:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var s=a(10326),l=a(17577),r=a(77109),n=a(35047);function i({className:e,label:t="Equipo"}){let{data:a,status:i,update:d}=(0,r.useSession)(),o=(0,n.useRouter)(),c=(0,l.useMemo)(()=>a?.user?.teamIds??[],[a?.user?.teamIds]);a?.user?.currentTeamId;let[u,m]=(0,l.useState)([]),[x,h]=(0,l.useState)(""),[p,b]=(0,l.useState)(!1),[g,j]=(0,l.useState)(!1),[v,f]=(0,l.useState)(null),N=c.length>0;if((0,l.useMemo)(()=>N?[...c].sort().join("|"):"",[N,c]),"loading"===i||!N)return null;async function S(e){let t=e.target.value;if(t&&t!==x){h(t),j(!0),f(null);try{document.cookie=`ctb_team=${encodeURIComponent(t)}; path=/; max-age=2592000; SameSite=Lax`;let e=await fetch("/api/session/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamId:t})});if(!e.ok){let t=await e.json().catch(()=>null);throw Error(t?.error||`Error ${e.status}`)}await d?.(),o.refresh()}catch(e){h(x),f(e?.message||"No se pudo cambiar de equipo.")}finally{j(!1)}}}let y=["flex flex-col gap-1 text-xs",e].filter(Boolean).join(" ");return 0===u.length?null:(0,s.jsxs)("div",{className:y,children:[s.jsx("label",{className:"text-[10px] font-semibold uppercase text-gray-500",children:t}),s.jsx("select",{value:x,onChange:S,disabled:p||g,className:"w-full rounded-md border px-2 py-1.5 text-sm disabled:opacity-60",children:u.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))}),v?s.jsx("span",{className:"text-[11px] text-red-600",children:v}):null]})}},93059:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r,y:()=>l});var s=a(17577);function l(e=new Date){let t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${s}`}function r(e){let[t,a]=s.useState(e||l()),[r,n]=s.useState([]),[i,d]=s.useState(!1),[o,c]=s.useState(null),u=s.useCallback(async(e=t)=>{d(!0),c(null);try{let t=new URLSearchParams;e&&t.set("date",e);let a=await fetch(`/api/medico/clinical?${t.toString()}`,{cache:"no-store"});if(!a.ok)throw Error(`HTTP ${a.status}`);let s=await a.json();n(Array.isArray(s)?s:[]),s&&0!==s.length||c("EMPTY")}catch{n([]),c("ERR")}finally{d(!1)}},[t]);async function m(e){let a={...e};a.date||(a.date=t);let s=await fetch("/api/medico/clinical",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let e=await s.text().catch(()=>"");throw Error(`Error guardando episodio (${s.status}) ${e}`)}return await u(a.date),s.json()}return s.useEffect(()=>{u(t)},[t,u]),{date:t,setDate:a,items:r,loading:i,error:o,reload:u,saveEpisode:m}}},15495:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c,metadata:()=>o});var s=a(19510);a(5023);var l=a(68570);let r=(0,l.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let d=(0,l.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx#default`),o={title:"ctbrain",description:"App"};function c({children:e}){return s.jsx("html",{lang:"es",children:s.jsx("body",{children:s.jsx(d,{children:e})})})}},69242:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});var s=a(68570);let l=(0,s.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/medico/layout.tsx`),{__esModule:r,$$typeof:n}=l;l.default;let i=(0,s.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/medico/layout.tsx#default`)},5023:()=>{}};