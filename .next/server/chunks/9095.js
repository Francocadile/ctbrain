exports.id=9095,exports.ids=[9095],exports.modules={54630:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},56270:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,79404,23))},14497:(e,r,s)=>{Promise.resolve().then(s.bind(s,42126))},933:(e,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let t=s(94129);function n(e){let{reason:r,children:s}=e;throw new t.BailoutToCSRError(r)}},46618:(e,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadCss",{enumerable:!0,get:function(){return a}});let t=s(10326),n=s(55403);function a(e){let{moduleIds:r}=e,s=(0,n.getExpectedRequestStore)("next/dynamic css"),a=[];if(s.reactLoadableManifest&&r){let e=s.reactLoadableManifest;for(let s of r){if(!e[s])continue;let r=e[s].files.filter(e=>e.endsWith(".css"));a.push(...r)}}return 0===a.length?null:(0,t.jsx)(t.Fragment,{children:a.map(e=>(0,t.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},42126:(e,r,s)=>{"use strict";s.d(r,{default:()=>a});var t=s(10326),n=s(77109);function a({children:e}){return t.jsx(n.SessionProvider,{children:e})}},55782:(e,r,s)=>{"use strict";s.d(r,{default:()=>n.a});var t=s(34567),n=s.n(t)},57371:(e,r,s)=>{"use strict";s.d(r,{default:()=>n.a});var t=s(670),n=s.n(t)},670:(e,r,s)=>{"use strict";let{createProxy:t}=s(68570);e.exports=t("/Users/Fran/ctbrain-14/node_modules/next/dist/client/link.js")},34567:(e,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a}});let t=s(53370);s(19510),s(71159);let n=t._(s(26155));function a(e,r){var s;let t={loading:e=>{let{error:r,isLoading:s,pastDelay:t}=e;return null}};"function"==typeof e&&(t.loader=e);let a={...t,...r};return(0,n.default)({...a,modules:null==(s=a.loadableGenerated)?void 0:s.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},13689:(e,r,s)=>{"use strict";let{createProxy:t}=s(68570);e.exports=t("/Users/Fran/ctbrain-14/node_modules/next/dist/shared/lib/lazy-dynamic/dynamic-bailout-to-csr.js")},26155:(e,r,s)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return o}});let t=s(19510),n=s(71159),a=s(13689),l=s(44459);function i(e){return{default:e&&"default"in e?e.default:e}}let d={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},o=function(e){let r={...d,...e},s=(0,n.lazy)(()=>r.loader().then(i)),o=r.loading;function u(e){let i=o?(0,t.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,d=r.ssr?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.PreloadCss,{moduleIds:r.modules}),(0,t.jsx)(s,{...e})]}):(0,t.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,t.jsx)(s,{...e})});return(0,t.jsx)(n.Suspense,{fallback:i,children:d})}return u.displayName="LoadableComponent",u}},44459:(e,r,s)=>{"use strict";let{createProxy:t}=s(68570);e.exports=t("/Users/Fran/ctbrain-14/node_modules/next/dist/shared/lib/lazy-dynamic/preload-css.js")},15495:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>u,metadata:()=>o});var t=s(19510);s(5023);var n=s(68570);let a=(0,n.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx`),{__esModule:l,$$typeof:i}=a;a.default;let d=(0,n.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx#default`),o={title:"ctbrain",description:"App"};function u({children:e}){return t.jsx("html",{lang:"es",children:t.jsx("body",{children:t.jsx(d,{children:e})})})}},73466:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});var t=s(19510),n=s(57371),a=s(75571),l=s(95456);async function i({children:e}){let r=await (0,a.getServerSession)(l.L),s=r?.user?.name??"Superadmin",n=r?.user?.role??"SUPERADMIN";return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"sticky top-0 z-40 border-b bg-white/80 backdrop-blur",children:(0,t.jsxs)("div",{className:"mx-auto flex max-w-7xl items-center justify-between px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-8 w-8 rounded-lg bg-black text-white grid place-items-center font-extrabold",children:"SA"}),t.jsx("div",{className:"font-semibold",children:"CTBrain \xb7 Superadmin"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"hidden sm:block text-gray-600",children:[t.jsx("span",{className:"font-medium",children:s})," ",t.jsx("span",{className:"text-gray-400",children:"\xb7"})," ",t.jsx("span",{className:"rounded bg-gray-100 px-2 py-0.5",children:n})]}),t.jsx("form",{action:"/api/auth/signout",method:"post",children:t.jsx("button",{type:"submit",className:"rounded-lg border px-3 py-1.5 text-sm font-medium hover:bg-gray-50",children:"Salir"})})]})]})}),(0,t.jsxs)("div",{className:"mx-auto grid max-w-7xl grid-cols-1 gap-6 px-4 py-6 lg:grid-cols-[240px_1fr]",children:[t.jsx("aside",{className:"h-max rounded-2xl border bg-white p-4",children:(0,t.jsxs)("nav",{className:"space-y-1 text-sm",children:[t.jsx(d,{title:"General"}),t.jsx(o,{href:"/superadmin",children:"Resumen"}),t.jsx(o,{href:"/superadmin/teams",children:"Equipos"}),t.jsx(o,{href:"/superadmin/users",children:"Usuarios"}),t.jsx(d,{title:"Sistema"}),t.jsx(o,{href:"/superadmin/config",children:"Configuraci\xf3n"}),t.jsx(d,{title:"Salir"}),t.jsx("form",{action:"/api/auth/signout",method:"post",children:t.jsx("button",{type:"submit",className:"w-full rounded-lg border px-3 py-2 text-left hover:bg-gray-50",children:"Cerrar sesi\xf3n"})})]})}),t.jsx("main",{className:"min-h-[70vh]",children:e})]})]})}function d({title:e}){return t.jsx("div",{className:"mt-3 mb-1 text-[11px] font-semibold uppercase text-gray-400",children:e})}function o({href:e,children:r,disabled:s=!1}){return s?(0,t.jsxs)("div",{className:"cursor-not-allowed rounded-lg px-3 py-2 text-gray-400",children:[r,t.jsx("span",{className:"ml-2 text-[10px] uppercase tracking-wide",children:"Pronto"})]}):t.jsx(n.default,{href:e,className:"block rounded-lg px-3 py-2 hover:bg-gray-50",children:r})}},35209:(e,r,s)=>{"use strict";s.d(r,{Z:()=>i});var t=s(19510),n=s(95456),a=s(75571),l=s(58585);async function i({allow:e,requireTeam:r=!1,children:s}){let i=await (0,a.getServerSession)(n.L);i?.user?.id||(console.info("[RoleGate] deny",{reason:"no-session",allow:e,requireTeam:r}),(0,l.redirect)("/login"));let d=i.user.role;return(d&&e.includes(d)||(console.info("[RoleGate] deny",{reason:"role-mismatch",allow:e,requireTeam:r,role:d,userId:i.user.id}),(0,l.redirect)(function(e){switch(e){case"SUPERADMIN":return"/superadmin";case"ADMIN":return"/admin";case"CT":return"/ct";case"MEDICO":return"/medico";case"JUGADOR":return"/jugador";case"DIRECTIVO":return"/directivo";default:return"/login"}}(d))),!r||("string"==typeof i.user.currentTeamId?i.user.currentTeamId:null))?t.jsx(t.Fragment,{children:s}):(console.info("[RoleGate] deny",{reason:"missing-team",allow:e,role:d,requireTeam:r,userId:i.user.id}),t.jsx("main",{className:"min-h-[60vh] bg-gray-50 px-6 py-10",children:(0,t.jsxs)("div",{className:"mx-auto max-w-lg rounded-2xl border bg-white p-6 text-center shadow-sm space-y-4",children:[t.jsx("h1",{className:"text-xl font-semibold",children:"Seleccion\xe1 un equipo"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Eleg\xed un equipo activo desde el selector del dashboard."}),t.jsx("a",{href:"/ct",className:"inline-flex items-center justify-center rounded-lg border px-4 py-2 text-sm font-medium hover:bg-gray-50",children:"Ir al dashboard"})]})}))}},95456:(e,r,s)=>{"use strict";s.d(r,{L:()=>d});var t=s(53797),n=s(53524),a=s(42023),l=s.n(a);let i=new n.PrismaClient,d={session:{strategy:"jwt"},providers:[(0,t.Z)({name:"credentials",credentials:{email:{label:"Email",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){let r=(e?.email||"").trim().toLowerCase(),s=(e?.password||"").toString();if(!r)return null;let t=await i.user.findUnique({where:{email:r},select:{id:!0,email:!0,name:!0,role:!0,isApproved:!0,passwordHash:!0}});if(!t||!t.passwordHash||!await l().compare(s,t.passwordHash))return null;let n=(await i.userTeam.findMany({where:{userId:t.id},select:{teamId:!0}})).map(e=>e.teamId),a=n.length>0?n[0]:null;return{id:t.id,email:t.email,name:t.name??t.email,role:t.role,isApproved:t.isApproved,teamIds:n,currentTeamId:a}}})],pages:{signIn:"/login"},callbacks:{async jwt({token:e,user:r}){if(r){let{role:s,isApproved:t,teamIds:n=[],currentTeamId:a=null}=r;e.role=s,e.isApproved=t,e.teamIds=n,e.currentTeamId=a??(n.length>0?n[0]:null)}else e.teamIds=e.teamIds??[],e.currentTeamId=e.currentTeamId??null;return e},async session({session:e,token:r}){e.user=e.user||{},e.user.id=r.sub,e.user.role=r.role,e.user.isApproved=r.isApproved??null;let s=Array.isArray(r.teamIds)?r.teamIds:[];return e.user.teamIds=s,e.user.currentTeamId=r.currentTeamId??null,e}}}},5023:()=>{}};