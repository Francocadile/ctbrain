"use strict";(()=>{var e={};e.id=9356,e.ids=[9356],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},76161:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>A,requestAsyncStorage:()=>D,routeModule:()=>y,serverHooks:()=>g,staticGenerationAsyncStorage:()=>S});var a={};r.r(a),r.d(a,{GET:()=>v,dynamic:()=>c});var n=r(49303),o=r(88716),s=r(60670),i=r(87070),d=r(13538),u=r(53524),l=r(42023);let c="force-dynamic";function p(e){return e.toISOString().slice(0,10)}function h(e,t){let r=new Date(e);return r.setDate(r.getDate()+t),r}let m=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;async function w(){let e=process.env.SEED_ADMIN_NAME||"Super Admin",t=process.env.SEED_ADMIN_EMAIL||"admin@ctbrain.local",r=process.env.SEED_ADMIN_PASSWORD||"admin123",a=await (0,l.hash)(r,10),n=await d.Z.user.upsert({where:{email:t},update:{name:e,passwordHash:a,role:u.Role.ADMIN},create:{name:e,email:t,passwordHash:a,role:u.Role.ADMIN}});return{id:n.id,email:n.email}}async function M(e){for(let t of e){let e=`${t.replace(/\s+/g,".").toLowerCase()}@ctbrain.dev`;await d.Z.user.upsert({where:{email:e},update:{},create:{name:t,email:e,role:u.Role.JUGADOR}})}return d.Z.user.findMany({where:{email:{endsWith:"@ctbrain.dev"}}})}async function f(e,t,r){let a=await d.Z.wellnessEntry.findFirst({where:{userId:e,date:t}});a?await d.Z.wellnessEntry.update({where:{id:a.id},data:r}):await d.Z.wellnessEntry.create({data:{userId:e,date:t,...r}})}async function E(e,t,r){let a=await d.Z.rPEEntry.findFirst({where:{userId:e,date:t}});a?await d.Z.rPEEntry.update({where:{id:a.id},data:r}):await d.Z.rPEEntry.create({data:{userId:e,date:t,...r}})}async function v(e){let t=new URL(e.url).searchParams.get("token"),r=process.env.SEED_TOKEN||"dev";if(!t||t!==r)return i.NextResponse.json({error:"Unauthorized"},{status:401});let a="1"===new URL(e.url).searchParams.get("demo"),n=(process.env.SEED_DEMO_NAMES||"Juan P\xe9rez,Carlos D\xedaz,Mart\xedn G\xf3mez,Lucas Soto,Nicol\xe1s Ruiz,Pedro Silva").split(",").map(e=>e.trim()).filter(Boolean);try{let e=await w(),t=[];if(a){t=await M(n);let e=new Date,r=h(e,-27);for(let a of t){for(let e=0;e<28;e++){let t=h(r,e),n=p(t),o=()=>{var e;return e=4+(2*Math.random()-1),Math.max(1,Math.min(5,e))},s=Math.round((6+3*Math.random())*10)/10;await f(a.id,n,{sleepQuality:Math.round(o()),sleepHours:s,fatigue:Math.round(o()),muscleSoreness:Math.round(o()),stress:Math.round(o()),mood:Math.round(o()),comment:null})}for(let t of[-1,0]){let r=p(h(e,t)),n=Math.round((5+3*Math.random())*10)/10,o=[75,90,95,100][m(0,3)];await E(a.id,r,{rpe:n,duration:o,load:Math.round(n*o)})}}}return i.NextResponse.json({ok:!0,admin:e,demo:!!a,players:t.length,note:"Seed ejecutado"})}catch(e){return console.error(e),i.NextResponse.json({error:e?.message||"Seed error"},{status:500})}}let y=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/dev/seed/route",pathname:"/api/dev/seed",filename:"route",bundlePath:"app/api/dev/seed/route"},resolvedPagePath:"/Users/Fran/ctbrain-14/src/app/api/dev/seed/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:D,staticGenerationAsyncStorage:S,serverHooks:g}=y,x="/api/dev/seed/route";function A(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:S})}},13538:(e,t,r)=>{r.d(t,{Z:()=>o,_:()=>n});var a=r(53524);let n=globalThis.prisma??new a.PrismaClient({log:["error"]}),o=n}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,5972,2023],()=>r(76161));module.exports=a})();