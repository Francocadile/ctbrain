"use strict";(()=>{var e={};e.id=5421,e.ids=[5421],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},21723:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>w,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>y,staticGenerationAsyncStorage:()=>g});var t={};s.r(t),s.d(t,{GET:()=>c,dynamic:()=>i});var n=s(49303),l=s(88716),a=s(60670),o=s(87070),u=s(13538);let i="force-dynamic";function d(e,r=400){return o.NextResponse.json({error:e},{status:r})}async function c(e){let{searchParams:r}=new URL(e.url),s=r.get("start"),t=r.get("end"),n=r.get("player");if(!s||!t)return d("Par\xe1metros requeridos: start, end (YYYY-MM-DD)");try{let e={date:{gte:s,lte:t}};n&&(e.user={is:{OR:[{name:{equals:n,mode:"insensitive"}},{email:{equals:n,mode:"insensitive"}}]}});let r=(await u.Z.wellnessEntry.findMany({where:e,include:{user:{select:{id:!0,name:!0,email:!0}}},orderBy:[{date:"asc"},{id:"asc"}]})).map(e=>({id:e.id,date:e.date,playerKey:e.playerKey??null,userId:e.userId??null,user:e.user??null,sleepQuality:Number(e.sleepQuality??0),sleepHours:null!=e.sleepHours?Number(e.sleepHours):null,fatigue:Number(e.fatigue??0),muscleSoreness:Number(e.muscleSoreness??e.soreness??0),stress:Number(e.stress??0),mood:Number(e.mood??0),comment:e.comment??e.notes??null,sdw:e.sdw??null,zScore:e.z_score_sdw??e.zScore??null,color:e.color_flag??e.color??null,overridesApplied:e.overrides_applied??null,contextTags:e.context_tags??null}));return o.NextResponse.json({start:s,end:t,count:r.length,items:r})}catch(e){return console.error(e),d(e?.message||"Error consultando wellness",500)}}let p=new n.AppRouteRouteModule({definition:{kind:l.x.APP_ROUTE,page:"/api/metrics/wellness/range/route",pathname:"/api/metrics/wellness/range",filename:"route",bundlePath:"app/api/metrics/wellness/range/route"},resolvedPagePath:"/Users/Fran/ctbrain-14/src/app/api/metrics/wellness/range/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:y}=p,w="/api/metrics/wellness/range/route";function v(){return(0,a.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:g})}},13538:(e,r,s)=>{s.d(r,{Z:()=>l,_:()=>n});var t=s(53524);let n=globalThis.prisma??new t.PrismaClient({log:["error"]}),l=n}};var r=require("../../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[8948,5972],()=>s(21723));module.exports=t})();