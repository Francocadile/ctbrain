"use strict";(()=>{var e={};e.id=5202,e.ids=[5202],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},95138:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>y,staticGenerationAsyncStorage:()=>g});var n={};t.r(n),t.d(n,{GET:()=>d,dynamic:()=>l});var a=t(49303),s=t(88716),i=t(60670),u=t(87070),o=t(13538);let l="force-dynamic";function p(e,r=400){return u.NextResponse.json({error:e},{status:r})}async function d(e){let{searchParams:r}=new URL(e.url),t=r.get("start"),n=r.get("end"),a=r.get("player");if(!t||!n)return p("Par\xe1metros requeridos: start, end (YYYY-MM-DD)");try{let e={date:{gte:t,lte:n}};a&&(e.user={is:{OR:[{name:{equals:a,mode:"insensitive"}},{email:{equals:a,mode:"insensitive"}}]}});let r=(await o.Z.rPEEntry.findMany({where:e,include:{user:{select:{id:!0,name:!0,email:!0}}},orderBy:[{date:"asc"},{id:"asc"}]})).map(e=>{let r=Number(e.rpe??0),t=e.duration??null,n=e.load??e.srpe??(null!=t?r*Number(t):null);return{id:e.id,date:e.date,playerKey:e.playerKey??null,userId:e.userId??null,user:e.user,rpe:r,duration:t,srpe:null!=n?Math.round(Number(n)):null,comment:e.comment??null}});return u.NextResponse.json({start:t,end:n,count:r.length,items:r})}catch(e){return console.error(e),p(e?.message||"Error consultando rpe",500)}}let c=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/metrics/rpe/range/route",pathname:"/api/metrics/rpe/range",filename:"route",bundlePath:"app/api/metrics/rpe/range/route"},resolvedPagePath:"/Users/Fran/ctbrain-14/src/app/api/metrics/rpe/range/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:y}=c,h="/api/metrics/rpe/range/route";function v(){return(0,i.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:g})}},13538:(e,r,t)=>{t.d(r,{Z:()=>s,_:()=>a});var n=t(53524);let a=globalThis.prisma??new n.PrismaClient({log:["error"]}),s=a}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[8948,5972],()=>t(95138));module.exports=n})();