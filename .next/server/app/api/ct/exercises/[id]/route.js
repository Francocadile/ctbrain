"use strict";(()=>{var e={};e.id=7433,e.ids=[7433],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},87078:(e,t,i)=>{i.r(t),i.d(t,{originalPathname:()=>N,patchFetch:()=>R,requestAsyncStorage:()=>w,routeModule:()=>g,serverHooks:()=>y,staticGenerationAsyncStorage:()=>h});var r={};i.r(r),i.d(r,{DELETE:()=>m,GET:()=>x,PUT:()=>f});var s=i(49303),n=i(88716),a=i(60670),o=i(87070);let d=new(i(53524)).PrismaClient,u="[EXERCISES]";function p(e){let t=(e||"").trimEnd(),i=t.lastIndexOf(u);if(-1===i)return{prefix:t,exercises:[]};let r=t.slice(0,i).trimEnd(),s=t.slice(i+u.length).trim().split(/\s+/)[0]||"";try{let e=Buffer.from(s,"base64").toString("utf-8"),t=JSON.parse(e);if(Array.isArray(t)){let e=t.map(e=>({title:e.title??"",kind:e.kind??"",space:e.space??"",players:e.players??"",duration:e.duration??"",description:e.description??"",imageUrl:e.imageUrl??""}));return{prefix:r,exercises:e}}}catch{}return{prefix:t,exercises:[]}}function c(e,t){let i=Buffer.from(JSON.stringify(t),"utf-8").toString("base64"),r=(e||"").trimEnd();return`${r}

${u} ${i}`}function l(e){let[t,i]=e.split("::"),r=Number(i);return t&&Number.isInteger(r)&&!(r<0)?{sessionId:t,index:r}:null}async function x(e){return new Response("Not implemented",{status:501})}async function m(e,t){try{let e=l(t.params.id);if(!e)return new o.NextResponse("Formato de id inv\xe1lido",{status:400});let i=await d.session.findUnique({where:{id:e.sessionId}});if(!i)return new o.NextResponse("Sesi\xf3n no encontrada",{status:404});let{prefix:r,exercises:s}=p(i.description||"");if(e.index<0||e.index>=s.length)return new o.NextResponse("\xcdndice de ejercicio inv\xe1lido",{status:400});let n=s.filter((t,i)=>i!==e.index);return await d.session.update({where:{id:i.id},data:{description:c(r,n)}}),o.NextResponse.json({ok:!0})}catch(e){return new o.NextResponse(e?.message||"Error",{status:500})}}async function f(e,t){try{let i=l(t.params.id);if(!i)return new o.NextResponse("Formato de id inv\xe1lido",{status:400});let r=await e.json(),s=await d.session.findUnique({where:{id:i.sessionId}});if(!s)return new o.NextResponse("Sesi\xf3n no encontrada",{status:404});let{prefix:n,exercises:a}=p(s.description||"");if(i.index<0||i.index>=a.length)return new o.NextResponse("\xcdndice de ejercicio inv\xe1lido",{status:400});let u=a[i.index],x={title:(r.title??u.title)||"",kind:(r.kind??u.kind)||"",space:(r.space??u.space)||"",players:(r.players??u.players)||"",duration:(r.duration??u.duration)||"",description:(r.description??u.description)||"",imageUrl:(r.imageUrl??u.imageUrl)||""},m=[...a];return m[i.index]=x,await d.session.update({where:{id:s.id},data:{description:c(n,m)}}),o.NextResponse.json({ok:!0})}catch(e){return new o.NextResponse(e?.message||"Error",{status:500})}}let g=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/ct/exercises/[id]/route",pathname:"/api/ct/exercises/[id]",filename:"route",bundlePath:"app/api/ct/exercises/[id]/route"},resolvedPagePath:"/Users/Fran/ctbrain-14/src/app/api/ct/exercises/[id]/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:w,staticGenerationAsyncStorage:h,serverHooks:y}=g,N="/api/ct/exercises/[id]/route";function R(){return(0,a.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:h})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[8948,5972],()=>i(87078));module.exports=r})();