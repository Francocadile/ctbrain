"use strict";(()=>{var e={};e.id=509,e.ids=[509],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},49679:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>y,patchFetch:()=>P,requestAsyncStorage:()=>g,routeModule:()=>w,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x});var n={};a.r(n),a.d(n,{GET:()=>m,POST:()=>d,PUT:()=>f});var r=a(49303),s=a(88716),i=a(60670),o=a(87070),l=a(53524);let p=["Complejo Deportivo","Cancha Auxiliar 1","Cancha Auxiliar 2","Gimnasio","Sala de Video"],c=new l.PrismaClient;function u(...e){for(let t of e){let e=c[t];if(e&&"object"==typeof e)return e}return null}async function m(){try{let e=u("place","Place","places","Places");if(!e)return o.NextResponse.json([...p]);let t=(await e.findMany({orderBy:{name:"asc"}})||[]).map(e=>String(e.name)).filter(Boolean);return o.NextResponse.json(t)}catch(e){return new o.NextResponse(e?.message||"Error",{status:500})}}async function d(e){try{let t=u("place","Place","places","Places");if(!t)return new o.NextResponse("Modelo Place no disponible en el schema actual",{status:501});let{name:a}=await e.json(),n=String(a||"").trim();if(!n)return new o.NextResponse("name requerido",{status:400});await t.upsert({where:{name:n},update:{},create:{name:n}});let r=(await t.findMany({orderBy:{name:"asc"}})||[]).map(e=>String(e.name)).filter(Boolean);return o.NextResponse.json(r)}catch(e){return new o.NextResponse(e?.message||"Error",{status:500})}}async function f(e){try{let t=u("place","Place","places","Places");if(!t)return new o.NextResponse("Modelo Place no disponible en el schema actual",{status:501});let{items:a}=await e.json(),n=Array.from(new Set((Array.isArray(a)?a:[]).map(e=>String(e).trim()).filter(Boolean))),r=await t.findMany({select:{name:!0}}),s=new Set((r||[]).map(e=>String(e.name))),i=new Set(n),l=[...s].filter(e=>!i.has(e));l.length&&await t.deleteMany({where:{name:{in:l}}}),await Promise.all(n.map(e=>t.upsert({where:{name:e},update:{},create:{name:e}})));let p=(await t.findMany({orderBy:{name:"asc"}})||[]).map(e=>String(e.name)).filter(Boolean);return o.NextResponse.json(p)}catch(e){return new o.NextResponse(e?.message||"Error",{status:500})}}let w=new r.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/ct/settings/places/route",pathname:"/api/ct/settings/places",filename:"route",bundlePath:"app/api/ct/settings/places/route"},resolvedPagePath:"/Users/Fran/ctbrain-14/src/app/api/ct/settings/places/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:g,staticGenerationAsyncStorage:x,serverHooks:h}=w,y="/api/ct/settings/places/route";function P(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[8948,5972],()=>a(49679));module.exports=n})();