(()=>{var e={};e.id=4991,e.ids=[4991],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},60053:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(79751),r(69242),r(15495),r(35866);var n=r(23191),s=r(88716),a=r(37922),i=r.n(a),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["medico",{children:["injuries",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,79751)),"/Users/Fran/ctbrain-14/src/app/medico/injuries/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,69242)),"/Users/Fran/ctbrain-14/src/app/medico/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,15495)),"/Users/Fran/ctbrain-14/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/Fran/ctbrain-14/src/app/medico/injuries/new/page.tsx"],u="/medico/injuries/new/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/medico/injuries/new/page",pathname:"/medico/injuries/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},81919:(e,t,r)=>{Promise.resolve().then(r.bind(r,13904))},13904:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,dynamic:()=>o});var n=r(10326),s=r(17577),a=r(35047),i=r(36101),l=r(93059);let o="force-dynamic";function c(){return n.jsx(s.Suspense,{fallback:n.jsx("main",{className:"min-h-[70vh] px-6 py-8",children:n.jsx("div",{className:"rounded-xl border bg-white p-5 text-gray-500",children:"Cargando…"})}),children:n.jsx(d,{})})}function d(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),r=s.useMemo(()=>{let e=t?.get("date")||void 0;return e&&/^\d{4}-\d{2}-\d{2}$/.test(e)?e:(0,l.y)()},[t]),o=t?.get("from")||null,[c,d]=s.useState(null),[u,p]=s.useState(!!o),[m,x]=s.useState(null);return s.useEffect(()=>{let e=!0;return async function(){if(o){p(!0),x(null);try{let t=await fetch(`/api/med/clinical/${encodeURIComponent(o)}`,{cache:"no-store"});if(!t.ok)throw Error(`HTTP ${t.status}`);let n=await t.json();if(!e)return;let s={userId:n.userId,status:n.status,leaveStage:n.leaveStage??null,leaveKind:n.leaveKind??null,diagnosis:n.diagnosis??null,bodyPart:n.bodyPart??null,laterality:n.laterality??null,mechanism:n.mechanism??null,severity:n.severity??null,illSystem:n.illSystem??null,illSymptoms:n.illSymptoms??null,illContagious:n.illContagious??null,illIsolationDays:n.illIsolationDays??null,illAptitude:n.illAptitude??null,feverMax:n.feverMax??null,startDate:r,expectedReturn:null,expectedReturnManual:!1,capMinutes:n.capMinutes??null,noSprint:n.noSprint??!1,noChangeOfDirection:n.noChangeOfDirection??!1,gymOnly:n.gymOnly??!1,noContact:n.noContact??!1,notes:n.notes??null,medSignature:n.medSignature??null,protocolObjectives:n.protocolObjectives??null,protocolTasks:n.protocolTasks??null,protocolControls:n.protocolControls??null,protocolCriteria:n.protocolCriteria??null};d(s)}catch(t){if(!e)return;x(t?.message||"No se pudo prellenar desde el episodio seleccionado.")}finally{e&&p(!1)}}}(),()=>{e=!1}},[o,r]),(0,n.jsxs)("main",{className:"min-h-[70vh] px-6 py-8",children:[(0,n.jsxs)("header",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Nuevo episodio cl\xednico"}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Carg\xe1 el parte del d\xeda. El ETR se calcula autom\xe1ticamente desde “D\xedas estimados” (pod\xe9s editarlo)."}),o?(0,n.jsxs)("p",{className:"mt-2 text-xs text-gray-500",children:["Prefill desde parte ",n.jsx("code",{children:o})]}):null]}),u?n.jsx("section",{className:"rounded-xl border bg-white p-5 shadow-sm text-gray-500",children:"Cargando prefill…"}):m?n.jsx("section",{className:"rounded-xl border bg-white p-5 shadow-sm text-red-600",children:m}):n.jsx("section",{className:"rounded-xl border bg-white p-5 shadow-sm",children:n.jsx(i.Z,{initial:c??void 0,defaultDate:r,onCancel:()=>e.push("/med/injuries"),onSaved:()=>e.push("/med/injuries")})})]})}},79751:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>o,dynamic:()=>l});var n=r(68570);let s=(0,n.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/medico/injuries/new/page.tsx`),{__esModule:a,$$typeof:i}=s;s.default;let l=(0,n.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/medico/injuries/new/page.tsx#dynamic`),o=(0,n.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/medico/injuries/new/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[8948,1159,8110],()=>r(60053));module.exports=n})();