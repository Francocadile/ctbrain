(()=>{var e={};e.id=8586,e.ids=[8586],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16314:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(67312),t(35884),t(15495),t(35866);var a=t(23191),s=t(88716),n=t(37922),i=t.n(n),o=t(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d=["",{children:["jugador",{children:["feedback",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,67312)),"/Users/Fran/ctbrain-14/src/app/jugador/feedback/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,35884)),"/Users/Fran/ctbrain-14/src/app/jugador/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,15495)),"/Users/Fran/ctbrain-14/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/Fran/ctbrain-14/src/app/jugador/feedback/page.tsx"],u="/jugador/feedback/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/jugador/feedback/page",pathname:"/jugador/feedback",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},54630:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},14497:(e,r,t)=>{Promise.resolve().then(t.bind(t,42126))},9537:(e,r,t)=>{Promise.resolve().then(t.bind(t,88828))},65071:(e,r,t)=>{Promise.resolve().then(t.bind(t,56869))},90434:(e,r,t)=>{"use strict";t.d(r,{default:()=>s.a});var a=t(79404),s=t.n(a)},35047:(e,r,t)=>{"use strict";var a=t(77389);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},88828:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var a=t(10326),s=t(17577),n=t(35047),i=t(77109);function o(){let e=(0,n.useRouter)(),{data:r,status:t}=(0,i.useSession)({required:!0,onUnauthenticated(){e.replace("/login")}}),s=r?.user?.id??"",o=r?.user?.role==="JUGADOR"&&!!s;return"loading"===t?a.jsx("div",{className:"p-6 text-sm text-gray-500",children:"Cargando…"}):o?(0,a.jsxs)("div",{className:"mx-auto flex max-w-2xl flex-col gap-6",children:[(0,a.jsxs)("header",{className:"space-y-1",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Enviar feedback al CT"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Tu mensaje ser\xe1 visible para el cuerpo t\xe9cnico y el staff m\xe9dico del equipo. Usalo para compartir sensaciones, molestias o sugerencias."})]}),a.jsx(l,{playerId:s,onSubmitted:()=>e.refresh()})]}):a.jsx("div",{className:"mx-auto max-w-xl rounded-lg border bg-white p-6 text-sm text-gray-600",children:"No ten\xe9s acceso a este m\xf3dulo."})}function l({playerId:e,onSubmitted:r}){let[t,n]=(0,s.useState)(""),[i,o]=(0,s.useState)(""),[l,d]=(0,s.useState)(""),[c,u]=(0,s.useState)("idle"),[m,x]=(0,s.useState)(null),p=(0,s.useMemo)(()=>2e3-i.length,[i]);async function g(a){if(a.preventDefault(),e){if(!i.trim()){x("Escrib\xed un mensaje");return}u("loading"),x(null);try{let a=await fetch("/api/feedback",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({playerId:e,subject:t.trim()||void 0,text:i.trim(),rating:l?Number(l):void 0})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e?.error||"No se pudo enviar el feedback")}n(""),o(""),d(""),u("success"),r()}catch(e){console.error("[feedback] submit failed",e),u("error"),x(e?.message||"No se pudo enviar el feedback")}}}return(0,a.jsxs)("form",{onSubmit:g,className:"space-y-4 rounded-lg border bg-white p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[a.jsx("label",{htmlFor:"subject",className:"text-sm font-medium text-gray-700",children:"Tema (opcional)"}),a.jsx("input",{id:"subject",type:"text",maxLength:120,value:t,onChange:e=>n(e.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-gray-500 focus:outline-none",placeholder:"Ej. Molestias post entrenamiento"})]}),(0,a.jsxs)("div",{className:"grid gap-1",children:[a.jsx("label",{htmlFor:"text",className:"text-sm font-medium text-gray-700",children:"Mensaje"}),a.jsx("textarea",{id:"text",required:!0,maxLength:2e3,value:i,onChange:e=>o(e.target.value),rows:8,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm leading-5 focus:border-gray-500 focus:outline-none",placeholder:"Contanos c\xf3mo te sent\xeds, si hay molestias o comentarios que quieras compartir."}),(0,a.jsxs)("div",{className:"text-end text-xs text-gray-500",children:[p," caracteres disponibles"]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Estado general (1-5, opcional)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[["1","2","3","4","5"].map(e=>(0,a.jsxs)("label",{className:"flex cursor-pointer items-center gap-1 text-sm text-gray-700",children:[a.jsx("input",{type:"radio",name:"rating",value:e,checked:l===e,onChange:()=>d(e)}),e]},e)),a.jsx("button",{type:"button",onClick:()=>d(""),className:"text-xs text-blue-600 hover:underline",children:"Limpiar"})]})]}),m?a.jsx("p",{className:"text-sm text-red-600",children:m}):null,"success"===c?a.jsx("p",{className:"text-sm text-green-600",children:"\xa1Gracias! El mensaje fue enviado."}):null,(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"submit",disabled:"loading"===c,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-500 disabled:cursor-not-allowed disabled:bg-blue-300",children:"loading"===c?"Enviando…":"Enviar feedback"}),a.jsx("button",{type:"button",disabled:"loading"===c||!t&&!i&&!l,onClick:()=>{n(""),o(""),d(""),x(null),u("idle")},className:"rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-700 transition hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-60",children:"Limpiar formulario"})]})]})}},56869:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var a=t(10326),s=t(90434);function n({children:e}){return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("header",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur border-b",children:(0,a.jsxs)("div",{className:"mx-auto max-w-5xl px-4 py-2 flex items-center justify-between",children:[a.jsx(s.default,{href:"/jugador",className:"font-semibold",children:"Jugador — Panel"}),a.jsx("nav",{className:"flex items-center gap-2",children:a.jsx("a",{href:"/api/auth/signout?callbackUrl=/jugador",className:"text-sm rounded-lg border px-2 py-1 hover:bg-gray-50",children:"Salir"})})]})}),a.jsx("main",{className:"mx-auto max-w-5xl p-4",children:e})]})}},42126:(e,r,t)=>{"use strict";t.d(r,{default:()=>n});var a=t(10326),s=t(77109);function n({children:e}){return a.jsx(s.SessionProvider,{children:e})}},67312:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var a=t(68570);let s=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/jugador/feedback/page.tsx`),{__esModule:n,$$typeof:i}=s;s.default;let o=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/jugador/feedback/page.tsx#default`)},35884:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var a=t(68570);let s=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/jugador/layout.tsx`),{__esModule:n,$$typeof:i}=s;s.default;let o=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/jugador/layout.tsx#default`)},15495:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c,metadata:()=>d});var a=t(19510);t(5023);var s=t(68570);let n=(0,s.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx`),{__esModule:i,$$typeof:o}=n;n.default;let l=(0,s.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx#default`),d={title:"ctbrain",description:"App"};function c({children:e}){return a.jsx("html",{lang:"es",children:a.jsx("body",{children:a.jsx(l,{children:e})})})}},5023:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[8948,1159,9404],()=>t(16314));module.exports=a})();