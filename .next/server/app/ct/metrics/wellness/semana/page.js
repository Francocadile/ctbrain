(()=>{var e={};e.id=8206,e.ids=[8206],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},80043:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>o}),t(62604),t(66382),t(15495),t(35866);var r=t(23191),a=t(88716),l=t(37922),n=t.n(l),i=t(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let o=["",{children:["ct",{children:["metrics",{children:["wellness",{children:["semana",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,62604)),"/Users/Fran/ctbrain-14/src/app/ct/metrics/wellness/semana/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66382)),"/Users/Fran/ctbrain-14/src/app/ct/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,15495)),"/Users/Fran/ctbrain-14/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/Fran/ctbrain-14/src/app/ct/metrics/wellness/semana/page.tsx"],x="/ct/metrics/wellness/semana/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/ct/metrics/wellness/semana/page",pathname:"/ct/metrics/wellness/semana",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},54630:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},97992:(e,s,t)=>{Promise.resolve().then(t.bind(t,94340))},11444:(e,s,t)=>{Promise.resolve().then(t.bind(t,47679))},14497:(e,s,t)=>{Promise.resolve().then(t.bind(t,42126))},90434:(e,s,t)=>{"use strict";t.d(s,{default:()=>a.a});var r=t(79404),a=t.n(r)},35047:(e,s,t)=>{"use strict";var r=t(77389);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},94340:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(10326);t(17577);var a=t(90434),l=t(35047),n=t(77109),i=t(82152);function c({href:e,children:s,active:t,soon:l}){let n="block rounded-md px-2 py-1.5 text-sm transition";return e?r.jsx(a.default,{href:e,className:`${n} ${t?"bg-black text-white":"hover:bg-gray-100"}`,children:s}):(0,r.jsxs)("span",{className:`${n} text-gray-400 cursor-not-allowed`,children:[s," ",l&&r.jsx("small",{className:"ml-1",children:"PRONTO"})]})}function o({children:e}){let s=(0,l.usePathname)(),t=e=>s===e||s?.startsWith(e+"/");return(0,r.jsxs)("div",{className:"min-h-screen flex bg-gray-50",children:[(0,r.jsxs)("aside",{className:"w-64 shrink-0 border-r bg-white p-3 space-y-3",children:[r.jsx(i.default,{className:"w-full"}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"INICIO"}),r.jsx("ul",{className:"space-y-0.5 mb-2",children:r.jsx("li",{children:r.jsx(c,{href:"/ct",active:"/ct"===s,children:"Dashboard / Inicio r\xe1pido"})})}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"MONITOREO"}),(0,r.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[r.jsx("li",{children:r.jsx(c,{href:"/ct/metrics/wellness",active:t("/ct/metrics/wellness"),children:"Wellness"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/metrics/rpe",active:t("/ct/metrics/rpe"),children:"Rpe"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/injuries",active:t("/ct/injuries"),children:"Lesionados"})})]}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"PLANIFICACI\xd3N"}),(0,r.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[r.jsx("li",{children:r.jsx(c,{href:"/ct/plan-semanal",active:t("/ct/plan-semanal"),children:"Plan semanal (Editor)"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/sessions",active:t("/ct/sessions"),children:"Sesiones"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/exercises",active:t("/ct/exercises"),children:"Ejercicios"})})]}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"T\xc9CNICA"}),(0,r.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[r.jsx("li",{children:r.jsx(c,{href:"/ct/rivales",active:t("/ct/rivales"),children:"Rivales / Plan de partido"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/scouting",active:t("/ct/scouting"),children:"Scouting"})})]}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"SALIR"}),r.jsx("ul",{className:"space-y-0.5",children:r.jsx("li",{children:r.jsx("button",{"aria-label":"Cerrar sesi\xf3n",onClick:()=>(0,n.signOut)({callbackUrl:"/login"}),className:"block w-full text-left rounded-md px-2 py-1.5 text-sm transition hover:bg-gray-100",children:"Cerrar sesi\xf3n"})})})]}),r.jsx("main",{className:"flex-1 p-3 md:p-4",children:e})]})}},47679:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(10326),a=t(17577);function l(e){return e.toISOString().slice(0,10)}function n(e,s){let t=new Date(e);return t.setDate(t.getDate()+s),t}function i(e){let s=new Date(e),t=s.getDay();return n(s,0===t?-6:1-t)}function c(e){return e<=1.5?"bg-red-50 text-red-700 border-red-200":e<=2.5?"bg-orange-50 text-orange-700 border-orange-200":e<=3.5?"bg-amber-50 text-amber-700 border-amber-200":e<=4.5?"bg-lime-50 text-lime-700 border-lime-200":"bg-emerald-50 text-emerald-700 border-emerald-200"}function o(e){let s=e/25;return s<.4?"bg-red-50 text-red-700 border-red-200":s<.6?"bg-orange-50 text-orange-700 border-orange-200":s<.8?"bg-amber-50 text-amber-700 border-amber-200":"bg-emerald-50 text-emerald-700 border-emerald-200"}function d({children:e,klass:s=""}){return r.jsx("span",{className:`inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-semibold ${s}`,children:e})}function x(){let[e,s]=(0,a.useState)(()=>i(new Date)),[t,x]=(0,a.useState)(!1),[u,m]=(0,a.useState)([]),[p,h]=(0,a.useState)(""),g=(0,a.useMemo)(()=>Array.from({length:7},(s,t)=>l(n(e,t))),[e]);async function f(){x(!0);try{let e=g.map(e=>fetch(`/api/metrics/wellness?date=${e}`,{cache:"no-store"})),s=await Promise.all(e),t=[];for(let e of s){if(!e.ok)continue;let s=await e.json();if(Array.isArray(s))for(let e of s)t.push({...e,userName:e.userName||e.user?.name||e.user?.email||e.playerKey||"—"})}m(t)}finally{x(!1)}}(0,a.useEffect)(()=>{f()},[g.join(",")]);let b=(0,a.useMemo)(()=>{let e=new Map;for(let s of u){let t=s.userName||"—",r=e.get(t)||{c:0,sq:0,fa:0,ms:0,st:0,mo:0};e.set(t,{c:r.c+1,sq:r.sq+Number(s.sleepQuality||0),fa:r.fa+Number(s.fatigue||0),ms:r.ms+Number(s.muscleSoreness||0),st:r.st+Number(s.stress||0),mo:r.mo+Number(s.mood||0)})}let s=[];for(let[t,r]of e.entries()){if(0===r.c)continue;let e=r.sq/r.c,a=r.fa/r.c,l=r.ms/r.c,n=r.st/r.c,i=r.mo/r.c,c=e+a+l+n+i;s.push({userName:t,count:r.c,sleepQuality:e,fatigue:a,muscleSoreness:l,stress:n,mood:i,total:c})}return s.sort((e,s)=>e.total-s.total),s},[u]),j=(0,a.useMemo)(()=>{let e=p.trim().toLowerCase();return e?b.filter(s=>s.userName.toLowerCase().includes(e)):b},[b,p]),y=(0,a.useMemo)(()=>{if(!j.length)return{count:0,avgTotal:0};let e=j.reduce((e,s)=>e+s.total,0)/j.length;return{count:j.length,avgTotal:e}},[j]);function v(e){s(s=>n(s,7*e))}return(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsxs)("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-lg font-bold",children:"Wellness — Semana (CT)"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Semana: ",r.jsx("b",{children:l(e)})," a ",r.jsx("b",{children:l(n(e,6))})," — ",u.length," registros"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>v(-1),className:"rounded-lg border px-2 py-1 text-sm hover:bg-gray-50",children:"← Semana anterior"}),r.jsx("input",{type:"date",className:"rounded-md border px-2 py-1.5 text-sm",value:l(e),onChange:e=>{s(i(new Date(e.target.value)))}}),r.jsx("button",{onClick:()=>v(1),className:"rounded-lg border px-2 py-1 text-sm hover:bg-gray-50",children:"Semana siguiente →"}),r.jsx("button",{onClick:f,className:"rounded-lg border px-2 py-1 text-sm hover:bg-gray-50",children:"Recargar"}),r.jsx("button",{onClick:function(){let s=[`Jugador,D\xedas con datos,Sue\xf1o(1-5),Fatiga(1-5),Dolor musc.(1-5),Estr\xe9s(1-5),\xc1nimo(1-5),Total(0-25),Semana (${l(e)} a ${l(n(e,6))})`];for(let e of j)s.push([`"${e.userName.replace(/"/g,'""')}"`,e.count,e.sleepQuality.toFixed(2),e.fatigue.toFixed(2),e.muscleSoreness.toFixed(2),e.stress.toFixed(2),e.mood.toFixed(2),e.total.toFixed(2),""].join(","));let t=new Blob([s.join("\n")],{type:"text/csv;charset=utf-8"}),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download=`wellness_semana_${l(e)}.csv`,a.click(),URL.revokeObjectURL(r)},className:"rounded-lg bg-black text-white px-3 py-1.5 text-sm hover:opacity-90",children:"Exportar CSV"})]})]}),(0,r.jsxs)("div",{className:"rounded-xl border bg-white p-3 text-xs text-gray-600 flex flex-wrap gap-3",children:[(0,r.jsxs)("div",{children:[r.jsx("b",{children:"Promedio semanal (total):"})," ",r.jsx(d,{klass:o(y.avgTotal),children:y.count?y.avgTotal.toFixed(1):"—"})]}),(0,r.jsxs)("div",{className:"ml-auto text-gray-500",children:["Jugadores: ",r.jsx("b",{children:y.count})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("input",{className:"w-full md:w-80 rounded-md border px-2 py-1.5 text-sm",placeholder:"Buscar jugador…",value:p,onChange:e=>h(e.target.value)}),(0,r.jsxs)("span",{className:"text-[12px] text-gray-500",children:[j.length," resultado(s)"]})]}),(0,r.jsxs)("section",{className:"rounded-2xl border bg-white overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 px-3 py-2 text-[12px] font-semibold uppercase",children:"Promedios por jugador"}),t?r.jsx("div",{className:"p-4 text-gray-500",children:"Cargando…"}):0===j.length?r.jsx("div",{className:"p-4 text-gray-500 italic",children:"Sin datos"}):r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"border-b bg-gray-50",children:[r.jsx("th",{className:"text-left px-3 py-2",children:"Jugador"}),r.jsx("th",{className:"text-left px-3 py-2",children:"D\xedas"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Sue\xf1o"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Fatiga"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Dolor musc."}),r.jsx("th",{className:"text-left px-3 py-2",children:"Estr\xe9s"}),r.jsx("th",{className:"text-left px-3 py-2",children:"\xc1nimo"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Total"})]})}),r.jsx("tbody",{children:j.map(e=>(0,r.jsxs)("tr",{className:"border-b last:border-0",children:[r.jsx("td",{className:"px-3 py-2 font-medium",children:e.userName}),r.jsx("td",{className:"px-3 py-2",children:e.count}),r.jsx("td",{className:"px-3 py-2",children:r.jsx(d,{klass:c(e.sleepQuality),children:e.sleepQuality.toFixed(1)})}),r.jsx("td",{className:"px-3 py-2",children:r.jsx(d,{klass:c(e.fatigue),children:e.fatigue.toFixed(1)})}),r.jsx("td",{className:"px-3 py-2",children:r.jsx(d,{klass:c(e.muscleSoreness),children:e.muscleSoreness.toFixed(1)})}),r.jsx("td",{className:"px-3 py-2",children:r.jsx(d,{klass:c(e.stress),children:e.stress.toFixed(1)})}),r.jsx("td",{className:"px-3 py-2",children:r.jsx(d,{klass:c(e.mood),children:e.mood.toFixed(1)})}),r.jsx("td",{className:"px-3 py-2",children:r.jsx(d,{klass:o(e.total),children:e.total.toFixed(1)})})]},e.userName))})]})})]}),(0,r.jsxs)("div",{className:"rounded-xl border bg-white p-3 text-xs text-gray-600",children:[r.jsx("b",{children:"Criterios r\xe1pidos:"})," totales < 15/25 o promedios < 3.0 suelen indicar alerta. Revisar fatiga/estr\xe9s y comparar con sesiones planificadas."]})]})}},42126:(e,s,t)=>{"use strict";t.d(s,{default:()=>l});var r=t(10326),a=t(77109);function l({children:e}){return r.jsx(a.SessionProvider,{children:e})}},82152:(e,s,t)=>{"use strict";t.d(s,{default:()=>i});var r=t(10326),a=t(17577),l=t(77109),n=t(35047);function i({className:e,label:s="Equipo"}){let{data:t,status:i,update:c}=(0,l.useSession)(),o=(0,n.useRouter)(),d=(0,a.useMemo)(()=>t?.user?.teamIds??[],[t?.user?.teamIds]);t?.user?.currentTeamId;let[x,u]=(0,a.useState)([]),[m,p]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),[f,b]=(0,a.useState)(!1),[j,y]=(0,a.useState)(null),v=d.length>0;if((0,a.useMemo)(()=>v?[...d].sort().join("|"):"",[v,d]),"loading"===i||!v)return null;async function N(e){let s=e.target.value;if(s&&s!==m){p(s),b(!0),y(null);try{document.cookie=`ctb_team=${encodeURIComponent(s)}; path=/; max-age=2592000; SameSite=Lax`;let e=await fetch("/api/session/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamId:s})});if(!e.ok){let s=await e.json().catch(()=>null);throw Error(s?.error||`Error ${e.status}`)}await c?.(),o.refresh()}catch(e){p(m),y(e?.message||"No se pudo cambiar de equipo.")}finally{b(!1)}}}let w=["flex flex-col gap-1 text-xs",e].filter(Boolean).join(" ");return 0===x.length?null:(0,r.jsxs)("div",{className:w,children:[r.jsx("label",{className:"text-[10px] font-semibold uppercase text-gray-500",children:s}),r.jsx("select",{value:m,onChange:N,disabled:h||f,className:"w-full rounded-md border px-2 py-1.5 text-sm disabled:opacity-60",children:x.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))}),j?r.jsx("span",{className:"text-[11px] text-red-600",children:j}):null]})}},66382:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var r=t(68570);let a=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/layout.tsx`),{__esModule:l,$$typeof:n}=a;a.default;let i=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/layout.tsx#default`)},62604:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var r=t(68570);let a=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/metrics/wellness/semana/page.tsx`),{__esModule:l,$$typeof:n}=a;a.default;let i=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/metrics/wellness/semana/page.tsx#default`)},15495:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d,metadata:()=>o});var r=t(19510);t(5023);var a=t(68570);let l=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx`),{__esModule:n,$$typeof:i}=l;l.default;let c=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx#default`),o={title:"ctbrain",description:"App"};function d({children:e}){return r.jsx("html",{lang:"es",children:r.jsx("body",{children:r.jsx(c,{children:e})})})}},5023:()=>{}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[8948,1159,9404],()=>t(80043));module.exports=r})();