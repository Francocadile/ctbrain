(()=>{var e={};e.id=2424,e.ids=[2424],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},22139:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d}),s(14864),s(66382),s(15495),s(35866);var a=s(23191),r=s(88716),l=s(37922),n=s.n(l),i=s(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let d=["",{children:["ct",{children:["injuries",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,14864)),"/Users/Fran/ctbrain-14/src/app/ct/injuries/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,66382)),"/Users/Fran/ctbrain-14/src/app/ct/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,15495)),"/Users/Fran/ctbrain-14/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/Fran/ctbrain-14/src/app/ct/injuries/page.tsx"],x="/ct/injuries/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/ct/injuries/page",pathname:"/ct/injuries",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},54630:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},64752:(e,t,s)=>{Promise.resolve().then(s.bind(s,81284))},97992:(e,t,s)=>{Promise.resolve().then(s.bind(s,94340))},14497:(e,t,s)=>{Promise.resolve().then(s.bind(s,42126))},90434:(e,t,s)=>{"use strict";s.d(t,{default:()=>r.a});var a=s(79404),r=s.n(a)},35047:(e,t,s)=>{"use strict";var a=s(77389);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},81284:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x,dynamic:()=>c});var a=s(10326),r=s(17577),l=s(35047),n=s(82882),i=s(38294);let c="force-dynamic";function d(e){return e.toISOString().slice(0,10)}let o={BAJA:"Fuera de toda actividad (OUT).",REINTEGRO:"RTP: retorno progresivo con restricciones.",LIMITADA:"LIM: entrena con limitaciones.",ALTA:"Alta m\xe9dica: sin restricciones (FULL)."};function x(){return a.jsx(r.Suspense,{fallback:a.jsx("div",{className:"p-4 text-gray-500",children:"Cargando…"}),children:a.jsx(m,{})})}function m(){let e=(0,l.useSearchParams)(),t=e.get("tab")||"lista",[s,c]=(0,r.useState)(t),x=(0,r.useMemo)(()=>d(new Date),[]),[m,u]=(0,r.useState)(e.get("date")||x),[p,h]=(0,r.useState)(e.get("month")||x.slice(0,7)),{start:b,end:g}=(0,r.useMemo)(()=>{let[e,t]=p.split("-").map(Number);return function(e=new Date){let t=new Date(e.getFullYear(),e.getMonth(),1),s=new Date(e.getFullYear(),e.getMonth()+1,0);return{start:d(t),end:d(s)}}(new Date(e,(t||1)-1,1))},[p]),[j,y]=(0,r.useState)([]),[f,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(null),[P,S]=(0,r.useState)(""),[C,T]=(0,r.useState)(null),[L,E]=(0,r.useState)(!1),[I,M]=(0,r.useState)(null),A=(0,r.useCallback)(async()=>{v(!0),w(null);try{let e=await fetch(`/api/med/clinical?date=${m}`,{cache:"no-store"});if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json(),s=(Array.isArray(t)?t:[]).map(e=>({...e,availability:function(e,t){if(t)return t;switch(e){case"ALTA":return"FULL";case"REINTEGRO":case"LIMITADA":return"MODIFIED";default:return"OUT"}}(e?.status,e?.availability??null)}));y(s)}catch(e){y([]),w(e?.message||"Error")}finally{v(!1)}},[m]);(0,r.useCallback)(async()=>{E(!0),M(null);try{let e=await fetch(`/api/med/clinical/analytics?start=${b}&end=${g}`,{cache:"no-store"});if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json();T(t)}catch(e){T(null),M(e?.message||"Error")}finally{E(!1)}},[b,g]);let R=(0,r.useMemo)(()=>{let e=P.trim().toLowerCase();return e?j.filter(t=>(t.userName||"").toLowerCase().includes(e)||(t.bodyPart||"").toLowerCase().includes(e)||(t.mechanism||"").toLowerCase().includes(e)):j},[j,P]);function O({items:e,max:t}){let s=t??Math.max(1,...e.map(e=>e.count));return a.jsx("div",{className:"space-y-2",children:e.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_auto] items-center gap-3",children:[a.jsx("div",{className:"h-2 rounded bg-gray-100",children:a.jsx("div",{className:"h-2 rounded bg-gray-800",style:{width:`${Math.min(100,e.count/s*100)}%`},title:`${e.count}`})}),(0,a.jsxs)("div",{className:"text-xs text-gray-700 whitespace-nowrap",children:[e.name," (",e.count,")"]})]},e.name))})}return(0,a.jsxs)("main",{className:"min-h-[70vh] px-6 py-10",children:[(0,a.jsxs)("header",{className:"mb-6 flex flex-col gap-2 md:flex-row md:items-end md:justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Parte cl\xednico — Vista CT"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:["M\xe9tricas del per\xedodo + lista diaria."," ",a.jsx(n.Z,{text:"Sem\xe1foro: Verde=Alta/Full \xb7 Amarillo=Reintegro/Limitada (Modified) \xb7 Rojo=Baja (Out)"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm",children:"Mes"}),a.jsx("input",{type:"month",className:"h-10 rounded-md border px-3 text-sm",value:p,onChange:e=>h(e.target.value)})]})]}),a.jsx("div",{className:"mb-4 flex w-full rounded-xl border p-1",children:["lista","metricas"].map(e=>a.jsx("button",{onClick:()=>c(e),className:`flex-1 rounded-lg px-4 py-2 text-sm font-medium transition ${s===e?"bg-black text-white":"text-gray-800 hover:bg-gray-50"}`,children:"lista"===e?"Lista diaria":"M\xe9tricas (mes)"},e))}),"metricas"===s&&a.jsx("section",{className:"mb-6 rounded-2xl border bg-white p-5",children:L?a.jsx("div",{className:"text-gray-500",children:"Cargando m\xe9tricas…"}):I?(0,a.jsxs)("div",{className:"text-red-600",children:["Error al cargar m\xe9tricas: ",I]}):C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-4 text-xs text-gray-500",children:["Rango: ",C.range.start," → ",C.range.end]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-4",children:[(0,a.jsxs)("div",{className:"rounded-xl border p-4",children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Episodios"}),a.jsx("div",{className:"text-2xl font-bold",children:C.totals.episodes})]}),(0,a.jsxs)("div",{className:"rounded-xl border p-4",children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Jugadores afectados"}),a.jsx("div",{className:"text-2xl font-bold",children:C.totals.playersAffected})]}),(0,a.jsxs)("div",{className:"rounded-xl border p-4",children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Prom. d\xedas estimados"}),a.jsx("div",{className:"text-2xl font-bold",children:C.totals.avgEstimatedDays??"—"})]}),(0,a.jsxs)("div",{className:"rounded-xl border p-4",children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Estados"}),(0,a.jsxs)("div",{className:"text-sm",children:["BAJA ",C.totals.statusCounts.BAJA," \xb7 RTP"," ",C.totals.statusCounts.REINTEGRO," \xb7 LIM"," ",C.totals.statusCounts.LIMITADA," \xb7 ALTA"," ",C.totals.statusCounts.ALTA]})]})]}),(0,a.jsxs)("div",{className:"mt-6 grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"rounded-xl border p-4",children:[a.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Top zonas"}),C.bodyPartTop.length?a.jsx(O,{items:C.bodyPartTop}):a.jsx("div",{className:"text-xs text-gray-500",children:"Sin datos"})]}),(0,a.jsxs)("div",{className:"rounded-xl border p-4",children:[a.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Top mecanismos"}),C.mechanismTop.length?a.jsx(O,{items:C.mechanismTop}):a.jsx("div",{className:"text-xs text-gray-500",children:"Sin datos"})]})]}),(0,a.jsxs)("div",{className:"mt-6 rounded-xl border p-4",children:[a.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Top jugadores por d\xedas fuera (estimado)"}),C.topPlayersByDaysOut.length?a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-[480px] text-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b bg-gray-50",children:[a.jsx("th",{className:"px-3 py-2 text-left",children:"Jugador"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"D\xedas"}),a.jsx("th",{className:"px-3 py-2 text-right",children:"Episodios"})]})}),a.jsx("tbody",{children:C.topPlayersByDaysOut.map(e=>(0,a.jsxs)("tr",{className:"border-b last:border-0",children:[a.jsx("td",{className:"px-3 py-2",children:e.name}),a.jsx("td",{className:"px-3 py-2 text-right",children:e.daysOut}),a.jsx("td",{className:"px-3 py-2 text-right",children:e.episodes})]},e.userId))})]})}):a.jsx("div",{className:"text-xs text-gray-500",children:"Sin datos"})]})]}):null}),"lista"===s&&(0,a.jsxs)("section",{className:"rounded-2xl border bg-white overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 border-b bg-gray-50 p-3 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm",children:"Fecha"}),a.jsx("input",{type:"date",className:"h-10 rounded-md border px-3 text-sm",value:m,onChange:e=>u(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{className:"w-full md:w-80 rounded-md border px-3 py-2 text-sm",placeholder:"Buscar por jugador, zona o mecanismo…",value:P,onChange:e=>S(e.target.value)}),a.jsx("button",{onClick:A,className:"h-10 rounded-md border px-4 text-sm hover:bg-gray-50",children:"Recargar"}),a.jsx("button",{onClick:function(){let e=R.map(e=>({Jugador:e.userName,Fecha:e.date,Estado:e.status||"",Disponibilidad:e.availability||"",Zona:e.bodyPart||"",Lateralidad:e.laterality||"",Mecanismo:e.mechanism||"",Severidad:e.severity||"",ETR:e.expectedReturn||"",CapMin:e.capMinutes??"",NoSprint:e.noSprint?"1":"",NoCOD:e.noChangeOfDirection?"1":"",SoloGym:e.gymOnly?"1":"",NoContacto:e.noContact?"1":""})),t=new Blob([(0,i.C)(e,["Jugador","Fecha","Estado","Disponibilidad","Zona","Lateralidad","Mecanismo","Severidad","ETR","CapMin","NoSprint","NoCOD","SoloGym","NoContacto"])],{type:"text/csv;charset=utf-8"}),s=document.createElement("a");s.href=URL.createObjectURL(t),s.download=`clinical_${m}.csv`,s.click(),URL.revokeObjectURL(s.href)},disabled:0===R.length,className:"h-10 rounded-md bg-black px-4 text-sm text-white disabled:opacity-50",children:"Exportar CSV"})]})]}),f?a.jsx("div",{className:"p-4 text-gray-500",children:"Cargando…"}):N?(0,a.jsxs)("div",{className:"p-4 text-red-600",children:["Error al cargar: ",N]}):0===R.length?a.jsx("div",{className:"p-4 text-gray-500 italic",children:"Sin datos"}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b bg-gray-50",children:[a.jsx("th",{className:"text-left px-3 py-2",children:"Jugador"}),a.jsx("th",{className:"text-left px-3 py-2",children:"Estado"}),a.jsx("th",{className:"text-left px-3 py-2",children:"Dispon."}),a.jsx("th",{className:"text-left px-3 py-2",children:"Zona"}),a.jsx("th",{className:"text-left px-3 py-2",children:"Lat."}),a.jsx("th",{className:"text-left px-3 py-2",children:"Mecanismo"}),a.jsx("th",{className:"text-left px-3 py-2",children:"Severidad"}),a.jsx("th",{className:"text-left px-3 py-2",children:"ETR"}),a.jsx("th",{className:"text-left px-3 py-2",children:"Restricciones"})]})}),a.jsx("tbody",{children:R.map(e=>(0,a.jsxs)("tr",{className:"border-b last:border-0 align-top",children:[(0,a.jsxs)("td",{className:"px-3 py-2 font-medium",children:[a.jsx("span",{className:`inline-block rounded-full border px-2 py-0.5 text-[11px] mr-2 ${"ALTA"===e.status||"FULL"===e.availability?"bg-green-100 text-green-700 border-green-200":"REINTEGRO"===e.status||"LIMITADA"===e.status||"MODIFIED"===e.availability?"bg-amber-100 text-amber-700 border-amber-200":"bg-red-100 text-red-700 border-red-200"}`,title:function(e,t){let s=o[e];return`${s}${"FULL"===t?" (FULL)":"MODIFIED"===t?" (MODIFIED)":" (OUT)"}`}(e.status,e.availability),children:"●"}),e.userName]}),a.jsx("td",{className:"px-3 py-2",children:e.status}),a.jsx("td",{className:"px-3 py-2",children:e.availability||"—"}),a.jsx("td",{className:"px-3 py-2",children:e.bodyPart||"—"}),a.jsx("td",{className:"px-3 py-2",children:e.laterality||"—"}),a.jsx("td",{className:"px-3 py-2",children:e.mechanism||"—"}),a.jsx("td",{className:"px-3 py-2",children:e.severity||"—"}),a.jsx("td",{className:"px-3 py-2",children:e.expectedReturn||"—"}),a.jsx("td",{className:"px-3 py-2 text-xs text-gray-700",children:(0,a.jsxs)("div",{className:"space-y-0.5",children:[e.capMinutes?(0,a.jsxs)("div",{children:["Cap: ",e.capMinutes,"′"]}):null,e.noSprint?a.jsx("div",{children:"Sin sprint"}):null,e.noChangeOfDirection?a.jsx("div",{children:"Sin cambios dir."}):null,e.gymOnly?a.jsx("div",{children:"Solo gym"}):null,e.noContact?a.jsx("div",{children:"Sin contacto"}):null,e.capMinutes||e.noSprint||e.noChangeOfDirection||e.gymOnly||e.noContact?null:a.jsx("span",{className:"text-gray-400",children:"—"})]})})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"rounded-xl border bg-white p-3 text-xs text-gray-600 mt-3",children:[a.jsx("b",{children:"Nota:"})," Vista de lectura para CT. Los datos se cargan en el panel m\xe9dico."]})]})}},94340:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(10326);s(17577);var r=s(90434),l=s(35047),n=s(77109),i=s(82152);function c({href:e,children:t,active:s,soon:l}){let n="block rounded-md px-2 py-1.5 text-sm transition";return e?a.jsx(r.default,{href:e,className:`${n} ${s?"bg-black text-white":"hover:bg-gray-100"}`,children:t}):(0,a.jsxs)("span",{className:`${n} text-gray-400 cursor-not-allowed`,children:[t," ",l&&a.jsx("small",{className:"ml-1",children:"PRONTO"})]})}function d({children:e}){let t=(0,l.usePathname)(),s=e=>t===e||t?.startsWith(e+"/");return(0,a.jsxs)("div",{className:"min-h-screen flex bg-gray-50",children:[(0,a.jsxs)("aside",{className:"w-64 shrink-0 border-r bg-white p-3 space-y-3",children:[a.jsx(i.default,{className:"w-full"}),a.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"INICIO"}),a.jsx("ul",{className:"space-y-0.5 mb-2",children:a.jsx("li",{children:a.jsx(c,{href:"/ct",active:"/ct"===t,children:"Dashboard / Inicio r\xe1pido"})})}),a.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"MONITOREO"}),(0,a.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[a.jsx("li",{children:a.jsx(c,{href:"/ct/metrics/wellness",active:s("/ct/metrics/wellness"),children:"Wellness"})}),a.jsx("li",{children:a.jsx(c,{href:"/ct/metrics/rpe",active:s("/ct/metrics/rpe"),children:"Rpe"})}),a.jsx("li",{children:a.jsx(c,{href:"/ct/injuries",active:s("/ct/injuries"),children:"Lesionados"})})]}),a.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"PLANIFICACI\xd3N"}),(0,a.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[a.jsx("li",{children:a.jsx(c,{href:"/ct/plan-semanal",active:s("/ct/plan-semanal"),children:"Plan semanal (Editor)"})}),a.jsx("li",{children:a.jsx(c,{href:"/ct/sessions",active:s("/ct/sessions"),children:"Sesiones"})}),a.jsx("li",{children:a.jsx(c,{href:"/ct/exercises",active:s("/ct/exercises"),children:"Ejercicios"})})]}),a.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"T\xc9CNICA"}),(0,a.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[a.jsx("li",{children:a.jsx(c,{href:"/ct/rivales",active:s("/ct/rivales"),children:"Rivales / Plan de partido"})}),a.jsx("li",{children:a.jsx(c,{href:"/ct/scouting",active:s("/ct/scouting"),children:"Scouting"})})]}),a.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"SALIR"}),a.jsx("ul",{className:"space-y-0.5",children:a.jsx("li",{children:a.jsx("button",{"aria-label":"Cerrar sesi\xf3n",onClick:()=>(0,n.signOut)({callbackUrl:"/login"}),className:"block w-full text-left rounded-md px-2 py-1.5 text-sm transition hover:bg-gray-100",children:"Cerrar sesi\xf3n"})})})]}),a.jsx("main",{className:"flex-1 p-3 md:p-4",children:e})]})}},42126:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(10326),r=s(77109);function l({children:e}){return a.jsx(r.SessionProvider,{children:e})}},82882:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s(10326),r=s(17577);function l({text:e,side:t="top",className:s="",sizePx:l=16}){let n=r.useId(),i=(()=>{switch(t){case"bottom":return"left-1/2 -translate-x-1/2 top-full mt-1";case"left":return"right-full mr-2 top-1/2 -translate-y-1/2";case"right":return"left-full ml-2 top-1/2 -translate-y-1/2";default:return"left-1/2 -translate-x-1/2 bottom-full mb-1"}})(),c="absolute w-0 h-0 border-transparent",d=Math.max(12,Math.min(22,l)),o=(()=>{switch(t){case"bottom":return a.jsx("span",{"aria-hidden":!0,className:`${c} left-1/2 -translate-x-1/2 -top-[6px] border-b-white border-[6px]`,style:{borderTopWidth:0,borderLeftColor:"transparent",borderRightColor:"transparent"}});case"left":return a.jsx("span",{"aria-hidden":!0,className:`${c} -right-[6px] top-1/2 -translate-y-1/2 border-l-white border-[6px]`,style:{borderTopColor:"transparent",borderBottomColor:"transparent",borderRightWidth:0}});case"right":return a.jsx("span",{"aria-hidden":!0,className:`${c} -left-[6px] top-1/2 -translate-y-1/2 border-r-white border-[6px]`,style:{borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftWidth:0}});default:return a.jsx("span",{"aria-hidden":!0,className:`${c} left-1/2 -translate-x-1/2 -bottom-[6px] border-t-white border-[6px]`,style:{borderLeftColor:"transparent",borderRightColor:"transparent",borderBottomWidth:0}})}})();return a.jsx("span",{className:`relative inline-flex items-center align-middle ${s}`,children:(0,a.jsxs)("span",{className:"group relative inline-flex",children:[a.jsx("button",{type:"button","aria-describedby":n,className:"inline-flex items-center justify-center rounded-full border text-[10px] leading-none select-none cursor-help text-gray-700 border-gray-300 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-black",style:{width:d,height:d},children:"?"}),(0,a.jsxs)("span",{id:n,role:"tooltip",className:`pointer-events-none absolute z-50 hidden max-w-xs rounded-md border bg-white px-2 py-1 text-xs text-gray-700 shadow-lg ${i} group-hover:block group-focus-within:block`,children:[e,o]})]})})}},82152:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(10326),r=s(17577),l=s(77109),n=s(35047);function i({className:e,label:t="Equipo"}){let{data:s,status:i,update:c}=(0,l.useSession)(),d=(0,n.useRouter)(),o=(0,r.useMemo)(()=>s?.user?.teamIds??[],[s?.user?.teamIds]);s?.user?.currentTeamId;let[x,m]=(0,r.useState)([]),[u,p]=(0,r.useState)(""),[h,b]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1),[y,f]=(0,r.useState)(null),v=o.length>0;if((0,r.useMemo)(()=>v?[...o].sort().join("|"):"",[v,o]),"loading"===i||!v)return null;async function N(e){let t=e.target.value;if(t&&t!==u){p(t),j(!0),f(null);try{document.cookie=`ctb_team=${encodeURIComponent(t)}; path=/; max-age=2592000; SameSite=Lax`;let e=await fetch("/api/session/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamId:t})});if(!e.ok){let t=await e.json().catch(()=>null);throw Error(t?.error||`Error ${e.status}`)}await c?.(),d.refresh()}catch(e){p(u),f(e?.message||"No se pudo cambiar de equipo.")}finally{j(!1)}}}let w=["flex flex-col gap-1 text-xs",e].filter(Boolean).join(" ");return 0===x.length?null:(0,a.jsxs)("div",{className:w,children:[a.jsx("label",{className:"text-[10px] font-semibold uppercase text-gray-500",children:t}),a.jsx("select",{value:u,onChange:N,disabled:h||g,className:"w-full rounded-md border px-2 py-1.5 text-sm disabled:opacity-60",children:x.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))}),y?a.jsx("span",{className:"text-[11px] text-red-600",children:y}):null]})}},38294:(e,t,s)=>{"use strict";function a(e,t){if(!e||0===e.length)return"";let s=t&&t.length?t:Object.keys(e[0]),a=e=>{if(null==e)return"";let t=String(e);return/[",\n]/.test(t)?`"${t.replace(/"/g,'""')}"`:t};return"\uFEFF"+s.map(a).join(",")+"\n"+e.map(e=>s.map(t=>a(e[t])).join(",")).join("\n")}s.d(t,{C:()=>a})},14864:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>c,dynamic:()=>i});var a=s(68570);let r=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/injuries/page.tsx`),{__esModule:l,$$typeof:n}=r;r.default;let i=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/injuries/page.tsx#dynamic`),c=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/injuries/page.tsx#default`)},66382:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var a=s(68570);let r=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/layout.tsx`),{__esModule:l,$$typeof:n}=r;r.default;let i=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/layout.tsx#default`)},15495:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>d});var a=s(19510);s(5023);var r=s(68570);let l=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx`),{__esModule:n,$$typeof:i}=l;l.default;let c=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx#default`),d={title:"ctbrain",description:"App"};function o({children:e}){return a.jsx("html",{lang:"es",children:a.jsx("body",{children:a.jsx(c,{children:e})})})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,1159,9404],()=>s(22139));module.exports=a})();