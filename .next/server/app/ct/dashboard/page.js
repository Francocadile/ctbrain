(()=>{var e={};e.id=6629,e.ids=[6629],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},75120:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(28462),r(66382),r(15495),r(35866);var a=r(23191),s=r(88716),n=r(37922),i=r.n(n),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["ct",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,28462)),"/Users/Fran/ctbrain-14/src/app/ct/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,66382)),"/Users/Fran/ctbrain-14/src/app/ct/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,15495)),"/Users/Fran/ctbrain-14/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/Fran/ctbrain-14/src/app/ct/dashboard/page.tsx"],x="/ct/dashboard/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/ct/dashboard/page",pathname:"/ct/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},13776:(e,t,r)=>{Promise.resolve().then(r.bind(r,16133))},16133:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var a=r(10326),s=r(77626),n=r.n(s),i=r(17577),o=r(35047),l=r(67317),d=r(25074);let c=["PRE ENTREN0","F\xcdSICO","T\xc9CNICO–T\xc1CTICO","COMPENSATORIO"],x=["NOMBRE SESI\xd3N","LUGAR","HORA","VIDEO"],p=e=>`[DAYFLAG:${e}]`,m=(e,t)=>"string"==typeof e.description&&e.description.startsWith(p(t)),u=e=>`[MICRO:${e}]`,b=(e,t)=>"string"==typeof e.description&&e.description.startsWith(u(t)),g={"":{bg:"bg-gray-50",text:"text-gray-500",border:"border-gray-200"},"MD+1":{bg:"bg-blue-50",text:"text-blue-900",border:"border-blue-200"},"MD+2":{bg:"bg-yellow-50",text:"text-yellow-900",border:"border-yellow-200"},"MD-4":{bg:"bg-red-50",text:"text-red-900",border:"border-red-200"},"MD-3":{bg:"bg-orange-50",text:"text-orange-900",border:"border-orange-200"},"MD-2":{bg:"bg-green-50",text:"text-green-900",border:"border-green-200"},"MD-1":{bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200"},MD:{bg:"bg-amber-50",text:"text-amber-900",border:"border-amber-200"},DESCANSO:{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-200"}};function h(e,t){let r=new Date(e);return r.setUTCDate(r.getUTCDate()+t),r}function f(){let e=(0,o.useSearchParams)(),t="1"===e.get("hideHeader"),r="afternoon"===e.get("turn")?"afternoon":"morning",[s,p]=(0,i.useState)(r),[u,f]=(0,i.useState)(()=>(0,l.$9)(new Date)),[j,y]=(0,i.useState)(!1),[v,N]=(0,i.useState)({}),[w,D]=(0,i.useState)(""),[T,C]=(0,i.useState)(""),[S,k]=(0,i.useState)({}),$=e=>S[e]||e,E=(0,i.useMemo)(()=>{if(!w)return[];let e=new Date(`${w}T00:00:00.000Z`);return Array.from({length:7},(t,r)=>(0,l.VA)(h(e,r)))},[w]);function P(e,t,r){return(v[e]||[]).find(e=>"string"==typeof e.description&&e.description.startsWith(`[GRID:${t}:${r}]`))}function U({ymd:e,row:t}){let r=P(e,s,t),n=(r?.title||"").trim();if(!n)return a.jsx("div",{className:"h-6 text-[11px] text-gray-400 italic px-1 flex items-center",children:"—"});if("VIDEO"===t){let{label:e,url:t}=function(e){let t=(e||"").trim();if(!t)return{label:"",url:""};let[r,a]=t.split("|").map(e=>e.trim());return!a&&r?.startsWith("http")?{label:"Video",url:r}:{label:r||"",url:a||""}}(n);return t?a.jsx("a",{href:t,target:"_blank",rel:"noreferrer",className:"h-6 text-[11px] underline text-emerald-700 px-1 flex items-center truncate",children:e||"Video"}):a.jsx("div",{className:"h-6 text-[11px] px-1 flex items-center truncate",children:e})}return a.jsx("div",{className:"h-6 text-[11px] px-1 flex items-center truncate",children:n})}function R({ymd:e}){let t=function(e,t){let r=(v[e]||[]).find(e=>b(e,t)),a=(r?.title||"").trim();return["MD+1","MD+2","MD-4","MD-3","MD-2","MD-1","MD","DESCANSO",""].includes(a)?a:""}(e,s);if(!t)return null;let r=g[t];return a.jsx("span",{className:`inline-flex items-center h-[18px] px-1.5 rounded-md border text-[9px] font-semibold ${r.bg} ${r.text} ${r.border} whitespace-nowrap`,title:"Intensidad (microciclo)",children:t})}function O({ymd:e}){let t=function(e,t){let r=(v[e]||[]).find(e=>m(e,t));return function(e){let t=(e||"").trim();if(!t)return{kind:"NONE"};let r=t.split("|").map(e=>(e||"").trim()),a=r[0];if("PARTIDO"===a){if(r.length>=4){let[,e,t,a]=r;return{kind:"PARTIDO",rivalId:e||void 0,rival:t||"",logoUrl:a||""}}if(r.length>=3){let[,e,t]=r;return{kind:"PARTIDO",rival:e||"",logoUrl:t||""}}return{kind:"PARTIDO"}}return"LIBRE"===a?{kind:"LIBRE"}:{kind:"NONE"}}(r?.title)}(e,s),r=`/ct/sessions/by-day/${e}/${s}`,n="morning"===s?"Ma\xf1ana libre":"Tarde libre",i=({children:e})=>a.jsx("div",{className:"rounded-md border bg-gray-50 flex items-center justify-center",style:{height:266},children:a.jsx("div",{className:"p-2 text-center",children:e})});return(0,a.jsxs)("div",{className:"rounded-xl border bg-white shadow-sm overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-2 py-1 border-b bg-gray-50",style:{height:54},children:[a.jsx("div",{className:"flex items-center justify-between min-w-0",children:a.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide",children:new Date(`${e}T00:00:00.000Z`).toLocaleDateString(void 0,{weekday:"short",day:"2-digit",month:"2-digit",timeZone:"UTC"})})}),(0,a.jsxs)("div",{className:`mt-1 flex items-center ${"LIBRE"===t.kind?"justify-start":"justify-between"} gap-2`,children:[a.jsx(R,{ymd:e}),"LIBRE"===t.kind?null:"PARTIDO"===t.kind?a.jsx(d.Z,{rivalId:t.rivalId,rivalName:t.rival||"",label:"Plan de partido"}):a.jsx("a",{href:r,className:"text-[9px] rounded border px-1.5 py-0.5 hover:bg-gray-100 whitespace-nowrap",children:"sesi\xf3n"})]})]}),(0,a.jsxs)("div",{className:"p-2",children:["PARTIDO"===t.kind&&a.jsx(i,{children:a.jsx(()=>(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[t.logoUrl?a.jsx("img",{src:t.logoUrl,alt:"Logo rival",className:"max-h-[110px] object-contain"}):null,a.jsx("div",{className:"text-[13px] font-semibold tracking-wide",children:"PARTIDO"}),t.rival?(0,a.jsxs)("div",{className:"text-[12px]",children:["vs ",a.jsx("b",{children:t.rival})]}):null]}),{})}),"LIBRE"===t.kind&&a.jsx(i,{children:a.jsx("div",{className:"text-gray-700 font-semibold tracking-wide text-[14px]",children:n})}),"NONE"===t.kind&&a.jsx(()=>a.jsx("div",{className:"grid gap-[6px]",style:{gridTemplateRows:"repeat(4, 62px)"},children:c.map(t=>{let r=P(e,s,t),n=(r?.title||"").trim();return a.jsx("div",{className:"rounded-md border bg-gray-50 px-2 py-1.5 text-[12px] leading-[18px] whitespace-pre-wrap overflow-hidden",children:n||a.jsx("span",{className:"text-gray-400 italic",children:"—"})},t)})}),{})]})]})}return(0,a.jsxs)("div",{id:"print-root",className:"jsx-87a67b85e310c469 p-3 md:p-4 space-y-3",children:[a.jsx(n(),{id:"87a67b85e310c469",children:'@page{size:A4 landscape;margin:8mm}@media print{body{-webkit-print-color-adjust:exact;color-adjust:exact;print-color-adjust:exact}body *{visibility:hidden!important}#print-root,#print-root *{visibility:visible!important}#print-root{position:absolute;inset:0;margin:0;padding:0;-webkit-transform:scale(.94);-moz-transform:scale(.94);-ms-transform:scale(.94);-o-transform:scale(.94);transform:scale(.94);-webkit-transform-origin:top left;-moz-transform-origin:top left;-ms-transform-origin:top left;-o-transform-origin:top left;transform-origin:top left;width:106%}nav,aside,header[role="banner"],.sidebar,.app-sidebar,.print\\\\:hidden,.no-print{display:none!important}a[href]:after{content:""}}'}),!t&&(0,a.jsxs)("header",{className:"jsx-87a67b85e310c469 flex flex-col gap-2 md:flex-row md:items-center md:justify-between no-print",children:[(0,a.jsxs)("div",{className:"jsx-87a67b85e310c469",children:[a.jsx("h2",{className:"jsx-87a67b85e310c469 text-lg md:text-xl font-bold",children:"Dashboard — Plan semanal (solo lectura)"}),(0,a.jsxs)("p",{className:"jsx-87a67b85e310c469 text-xs md:text-sm text-gray-500",children:["Semana ",w||"—"," → ",T||"—"," (Lun→Dom)"]})]}),(0,a.jsxs)("div",{className:"jsx-87a67b85e310c469 flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("div",{className:"jsx-87a67b85e310c469 flex items-center gap-1 mr-2",children:[a.jsx("button",{onClick:()=>{let t=new URLSearchParams(e.toString());t.set("turn","morning"),history.replaceState(null,"",`?${t.toString()}`),p("morning")},className:`jsx-87a67b85e310c469 px-2.5 py-1.5 rounded-xl border text-xs ${"morning"===s?"bg-black text-white":"hover:bg-gray-50"}`,children:"Ma\xf1ana"}),a.jsx("button",{onClick:()=>{let t=new URLSearchParams(e.toString());t.set("turn","afternoon"),history.replaceState(null,"",`?${t.toString()}`),p("afternoon")},className:`jsx-87a67b85e310c469 px-2.5 py-1.5 rounded-xl border text-xs ${"afternoon"===s?"bg-black text-white":"hover:bg-gray-50"}`,children:"Tarde"})]}),a.jsx("button",{onClick:()=>f(e=>h(e,-7)),className:"jsx-87a67b85e310c469 px-2.5 py-1.5 rounded-xl border hover:bg-gray-50 text-xs",children:"◀ Semana anterior"}),a.jsx("button",{onClick:()=>f((0,l.$9)(new Date)),className:"jsx-87a67b85e310c469 px-2.5 py-1.5 rounded-xl border hover:bg-gray-50 text-xs",children:"Hoy"}),a.jsx("button",{onClick:()=>f(e=>h(e,7)),className:"jsx-87a67b85e310c469 px-2.5 py-1.5 rounded-xl border hover:bg-gray-50 text-xs",children:"Semana siguiente ▶"}),a.jsx("button",{onClick:()=>window.print(),className:"jsx-87a67b85e310c469 px-2.5 py-1.5 rounded-xl border hover:bg-gray-50 text-xs",children:"\uD83D\uDDA8️ Imprimir"})]})]}),j?a.jsx("div",{className:"jsx-87a67b85e310c469 text-gray-500",children:"Cargando…"}):a.jsx("div",{className:"jsx-87a67b85e310c469 rounded-2xl border bg-white shadow-sm",children:(0,a.jsxs)("div",{className:"jsx-87a67b85e310c469 p-3",children:[(0,a.jsxs)("div",{className:"jsx-87a67b85e310c469 mb-2",children:[a.jsx("div",{className:"jsx-87a67b85e310c469 bg-emerald-50 text-emerald-900 font-semibold px-2 py-0.5 border rounded-md uppercase tracking-wide text-[11px] inline-block",children:"DETALLES"}),a.jsx("div",{style:{gridTemplateColumns:"102px repeat(7, minmax(112px, 1fr))"},className:"jsx-87a67b85e310c469 mt-2 grid gap-[6px]",children:x.map(e=>(0,a.jsxs)("div",{className:"jsx-87a67b85e310c469 contents",children:[a.jsx("div",{className:"jsx-87a67b85e310c469 bg-gray-50/60 border rounded-md px-2 py-1 text-[10px] font-medium text-gray-600",children:e}),E.map(t=>a.jsx("div",{className:"jsx-87a67b85e310c469 rounded-md border px-1 py-0.5",children:a.jsx(U,{ymd:t,row:e})},`${e}-${t}`))]},`meta-${e}`))})]}),a.jsx("div",{className:"jsx-87a67b85e310c469 bg-emerald-100/70 text-emerald-900 font-semibold px-2 py-0.5 border rounded-md uppercase tracking-wide text-[11px] mb-2",children:"morning"===s?"TURNO MA\xd1ANA":"TURNO TARDE"}),(0,a.jsxs)("div",{style:{gridTemplateColumns:"102px repeat(7, minmax(112px, 1fr))"},className:"jsx-87a67b85e310c469 grid gap-3",children:[(0,a.jsxs)("div",{style:{gridTemplateRows:"54px repeat(4, 62px)"},className:"jsx-87a67b85e310c469 grid gap-[6px]",children:[a.jsx("div",{className:"jsx-87a67b85e310c469"}),c.map(e=>a.jsx("div",{className:"jsx-87a67b85e310c469 bg-gray-50/60 border rounded-md px-2 text-[10px] font-medium text-gray-600 flex items-center",children:a.jsx("span",{className:"jsx-87a67b85e310c469 leading-[14px] whitespace-pre-line",children:$(e)})},e))]}),E.map(e=>a.jsx(O,{ymd:e},`card-${e}`))]})]})})]})}function j(){return a.jsx(i.Suspense,{fallback:a.jsx("div",{className:"p-3 text-gray-500",children:"Cargando…"}),children:a.jsx(f,{})})}},25074:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(10326),s=r(17577);let n=function(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,a,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(a=e(t[r]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a)}return s}(e))&&(a&&(a+=" "),a+=t);return a};function i({rivalId:e,rivalName:t,label:r="Plan de partido",className:i,fallbackHref:o,tab:l="plan"}){let[d,c]=(0,s.useState)(null),[x,p]=(0,s.useState)(!1),m=(t||"").trim(),u=(0,s.useMemo)(()=>{if(!e)return"";let t=l?`?tab=${encodeURIComponent(l)}`:"";return`/ct/rivales/${e}${t}`},[e,l]),b=(0,s.useMemo)(()=>{if(u)return u;if(d?.id){let e=l?`?tab=${encodeURIComponent(l)}`:"";return`/ct/rivales/${d.id}${e}`}return o||(m?`/ct/rivales?search=${encodeURIComponent(m)}`:"/ct/rivales")},[u,d,o,m,l]);return a.jsx("a",{href:b,className:n("inline-flex items-center rounded border px-1.5 py-0.5 text-[11px] hover:bg-gray-100 whitespace-nowrap",i),title:d?.name||m||"Plan de partido","aria-busy":x,children:r})}},67317:(e,t,r)=>{"use strict";function a(e){let t=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0"),a=String(e.getUTCDate()).padStart(2,"0");return`${t}-${r}-${a}`}function s(e){let t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())),r=t.getUTCDay()||7;return 1!==r&&t.setUTCDate(t.getUTCDate()-(r-1)),t.setUTCHours(0,0,0,0),t}async function n({start:e}){let t=await fetch(`/api/sessions?start=${encodeURIComponent(e)}`,{cache:"no-store"}),r=await t.json();if(!t.ok)throw Error(r?.error||"No se pudo cargar la semana");return r}async function i(e){let t=await fetch("/api/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok)throw Error(r?.error||"Error al crear la sesi\xf3n");return r}async function o(e,t){let r=await fetch(`/api/sessions/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json();if(!r.ok)throw Error(a?.error||"Error al actualizar la sesi\xf3n");return a}async function l(e){let t=await fetch(`/api/sessions/${e}`,{method:"DELETE"}),r=await t.json();if(!t.ok)throw Error(r?.error||"Error al borrar la sesi\xf3n");return r}r.d(t,{$9:()=>s,CT:()=>o,SO:()=>l,VA:()=>a,ed:()=>i,tO:()=>n})},28462:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var a=r(68570);let s=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/dashboard/page.tsx`),{__esModule:n,$$typeof:i}=s;s.default;let o=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/dashboard/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,1159,9404,2473],()=>r(75120));module.exports=a})();