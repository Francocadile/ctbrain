(()=>{var e={};e.id=5606,e.ids=[5606],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},99265:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>d}),a(4398),a(66382),a(15495),a(35866);var t=a(23191),r=a(88716),l=a(37922),i=a.n(l),n=a(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(s,c);let d=["",{children:["ct",{children:["rivales",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,4398)),"/Users/Fran/ctbrain-14/src/app/ct/rivales/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,66382)),"/Users/Fran/ctbrain-14/src/app/ct/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,15495)),"/Users/Fran/ctbrain-14/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/Fran/ctbrain-14/src/app/ct/rivales/[id]/page.tsx"],x="/ct/rivales/[id]/page",h={require:a,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/ct/rivales/[id]/page",pathname:"/ct/rivales/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},54630:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},97992:(e,s,a)=>{Promise.resolve().then(a.bind(a,94340))},64836:(e,s,a)=>{Promise.resolve().then(a.bind(a,38269))},14497:(e,s,a)=>{Promise.resolve().then(a.bind(a,42126))},90434:(e,s,a)=>{"use strict";a.d(s,{default:()=>r.a});var t=a(79404),r=a.n(t)},35047:(e,s,a)=>{"use strict";var t=a(77389);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},94340:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(10326);a(17577);var r=a(90434),l=a(35047),i=a(77109),n=a(82152);function c({href:e,children:s,active:a,soon:l}){let i="block rounded-md px-2 py-1.5 text-sm transition";return e?t.jsx(r.default,{href:e,className:`${i} ${a?"bg-black text-white":"hover:bg-gray-100"}`,children:s}):(0,t.jsxs)("span",{className:`${i} text-gray-400 cursor-not-allowed`,children:[s," ",l&&t.jsx("small",{className:"ml-1",children:"PRONTO"})]})}function d({children:e}){let s=(0,l.usePathname)(),a=e=>s===e||s?.startsWith(e+"/");return(0,t.jsxs)("div",{className:"min-h-screen flex bg-gray-50",children:[(0,t.jsxs)("aside",{className:"w-64 shrink-0 border-r bg-white p-3 space-y-3",children:[t.jsx(n.default,{className:"w-full"}),t.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"INICIO"}),t.jsx("ul",{className:"space-y-0.5 mb-2",children:t.jsx("li",{children:t.jsx(c,{href:"/ct",active:"/ct"===s,children:"Dashboard / Inicio r\xe1pido"})})}),t.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"MONITOREO"}),(0,t.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[t.jsx("li",{children:t.jsx(c,{href:"/ct/metrics/wellness",active:a("/ct/metrics/wellness"),children:"Wellness"})}),t.jsx("li",{children:t.jsx(c,{href:"/ct/metrics/rpe",active:a("/ct/metrics/rpe"),children:"Rpe"})}),t.jsx("li",{children:t.jsx(c,{href:"/ct/injuries",active:a("/ct/injuries"),children:"Lesionados"})})]}),t.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"PLANIFICACI\xd3N"}),(0,t.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[t.jsx("li",{children:t.jsx(c,{href:"/ct/plan-semanal",active:a("/ct/plan-semanal"),children:"Plan semanal (Editor)"})}),t.jsx("li",{children:t.jsx(c,{href:"/ct/sessions",active:a("/ct/sessions"),children:"Sesiones"})}),t.jsx("li",{children:t.jsx(c,{href:"/ct/exercises",active:a("/ct/exercises"),children:"Ejercicios"})})]}),t.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"T\xc9CNICA"}),(0,t.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[t.jsx("li",{children:t.jsx(c,{href:"/ct/rivales",active:a("/ct/rivales"),children:"Rivales / Plan de partido"})}),t.jsx("li",{children:t.jsx(c,{href:"/ct/scouting",active:a("/ct/scouting"),children:"Scouting"})})]}),t.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"SALIR"}),t.jsx("ul",{className:"space-y-0.5",children:t.jsx("li",{children:t.jsx("button",{"aria-label":"Cerrar sesi\xf3n",onClick:()=>(0,i.signOut)({callbackUrl:"/login"}),className:"block w-full text-left rounded-md px-2 py-1.5 text-sm transition hover:bg-gray-100",children:"Cerrar sesi\xf3n"})})})]}),t.jsx("main",{className:"flex-1 p-3 md:p-4",children:e})]})}},38269:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(10326),r=a(90434),l=a(35047),i=a(17577);function n(){return{showSystem:!0,showKeyPlayers:!0,showStrengths:!0,showWeaknesses:!0,showSetPiecesFor:!0,showSetPiecesAgainst:!0,showCharlaUrl:!1,showVideos:!0,showStatsTotalsGF:!0,showStatsTotalsGA:!0,showStatsTotalsPossession:!0,showStatsRecent:!0,showNotesForPlayers:!1,showSquad:!0}}function c(e){if(!e)return!0;try{let s=new URL(e);return"http:"===s.protocol||"https:"===s.protocol}catch{return!1}}function d(){let{id:e}=(0,l.useParams)(),s=(0,l.useSearchParams)(),a=s.get("tab")||"resumen",d="1"===s.get("player");s.get("print");let[m,u]=(0,i.useState)(a);function g(e){u(e);let s=new URL(window.location.href);s.searchParams.set("tab",e),window.history.replaceState(null,"",s.toString())}let[b,y]=(0,i.useState)(d),[j,v]=(0,i.useState)(!0),[N,f]=(0,i.useState)(null),[w,S]=(0,i.useState)(!0),[k,P]=(0,i.useState)(!1),[C,F]=(0,i.useState)({charlaUrl:"",report:{system:"",strengths:[],weaknesses:[],keyPlayers:[],setPieces:{for:[],against:[]}}}),[$,T]=(0,i.useState)(!1),[U,E]=(0,i.useState)(!1),[A,G]=(0,i.useState)(""),[D,R]=(0,i.useState)(""),[I,_]=(0,i.useState)(""),[O,V]=(0,i.useState)(""),[q,M]=(0,i.useState)([]),[L,z]=(0,i.useState)(!0),[B,J]=(0,i.useState)(!1),[W,K]=(0,i.useState)(""),[H,X]=(0,i.useState)(""),[Y,Q]=(0,i.useState)({totals:{gf:void 0,ga:void 0,possession:void 0},recent:[]}),[Z,ee]=(0,i.useState)(!0),[es,ea]=(0,i.useState)(!1),[et,er]=(0,i.useState)({observations:"",checklist:[]}),[el,ei]=(0,i.useState)(!0),[en,ec]=(0,i.useState)(!1),[ed,eo]=(0,i.useState)(""),[ex,eh]=(0,i.useState)(n()),[ep,em]=(0,i.useState)(!0),[eu,eg]=(0,i.useState)(!1),[eb,ey]=(0,i.useState)(!1),[ej,ev]=(0,i.useState)(null),[eN,ef]=(0,i.useState)(null),[ew,eS]=(0,i.useState)(null),[ek,eP]=(0,i.useState)(null),[eC,eF]=(0,i.useState)(null),[e$,eT]=(0,i.useState)(null),[eU,eE]=(0,i.useState)(!1),[eA,eG]=(0,i.useState)(null),[eD,eR]=(0,i.useState)(null),[eI,e_]=(0,i.useState)(null);function eO(e){return e.split("\n").map(e=>e.trim()).filter(Boolean)}function eV(e){return(e||[]).join("\n")}async function eq(){let s=await fetch(`/api/ct/rivales/${e}`,{cache:"no-store"});if(!s.ok)throw Error("rival not found");let a=await s.json(),t=a?.data;f(t),G(t.coach||""),R(t.baseSystem||""),_(function(e){if(!e)return"";let s=new Date(e),a=e=>String(e).padStart(2,"0");return`${s.getFullYear()}-${a(s.getMonth()+1)}-${a(s.getDate())}T${a(s.getHours())}:${a(s.getMinutes())}`}(t.nextMatchDate)),V(t.nextMatchCompetition||"")}async function eM(){let s=await fetch(`/api/ct/rivales/${e}/plan`,{cache:"no-store"});if(!s.ok)return;let a=await s.json(),t=a?.data||{};F({charlaUrl:t.charlaUrl??"",report:{system:t.report?.system??"",strengths:t.report?.strengths??[],weaknesses:t.report?.weaknesses??[],keyPlayers:t.report?.keyPlayers??[],setPieces:{for:t.report?.setPieces?.for??[],against:t.report?.setPieces?.against??[]}}})}async function eL(){z(!0);try{let s=await fetch(`/api/ct/rivales/${e}/videos`,{cache:"no-store"}),a=await s.json().catch(()=>({}));M(Array.isArray(a?.data)?a.data:[])}finally{z(!1)}}async function ez(){ee(!0);try{let s=await fetch(`/api/ct/rivales/${e}/stats`,{cache:"no-store"}),a=await s.json().catch(()=>({})),t=a?.data||{};Q({totals:{gf:t.totals?.gf,ga:t.totals?.ga,possession:t.totals?.possession},recent:Array.isArray(t.recent)?t.recent:[]})}finally{ee(!1)}}async function eB(){ei(!0);try{let s=await fetch(`/api/ct/rivales/${e}/notas`,{cache:"no-store"}),a=await s.json().catch(()=>({})),t=a?.data||{};er({observations:t.observations??"",checklist:Array.isArray(t.checklist)?t.checklist:[]})}finally{ei(!1)}}async function eJ(){em(!0);try{let s=await fetch(`/api/ct/rivales/${e}/visibility`,{cache:"no-store"}),a=await s.json().catch(()=>({})),t=a?.data||n();eh({...n(),...t})}finally{em(!1)}}async function eW(){ey(!0);try{let s=await fetch(`/api/ct/rivales/${e}/player`,{cache:"no-store"}),a=await s.json().catch(()=>({})),t=a?.data||{};ev(t.basics??null),ef(t.plan??null),eS(Array.isArray(t.videos)?t.videos:null),eP(t.stats??null),eF(t.notes??null),eT(t.visibility??null)}finally{ey(!1)}}function eK(e){let s=new URL(window.location.href);return s.searchParams.set("player","1"),e&&s.searchParams.set("tab",e),s.searchParams.delete("print"),s.toString()}let eH=(0,i.useMemo)(()=>!!H&&!c(H)||(q||[]).some(e=>!!e.url&&!c(e.url)),[H,q]);async function eX(s){s.preventDefault(),P(!0);try{let s={charlaUrl:C.charlaUrl?.trim()||null,report:{system:C.report.system?.trim()||null,strengths:C.report.strengths||[],weaknesses:C.report.weaknesses||[],keyPlayers:C.report.keyPlayers||[],setPieces:{for:C.report.setPieces?.for||[],against:C.report.setPieces?.against||[]}}};if(!(await fetch(`/api/ct/rivales/${e}/plan`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw Error("No se pudo guardar el plan");await eM(),b&&await eW()}catch(e){alert(e?.message||"Error al guardar")}finally{P(!1)}}async function eY(e){if(e.preventDefault(),N){E(!0);try{let e={name:N.name,logoUrl:N.logoUrl??null,coach:A.trim()||null,baseSystem:D.trim()||null,nextMatchDate:function(e){if(!e)return null;let s=new Date(e);return isNaN(s.getTime())?null:s.toISOString()}(I),nextMatchCompetition:O.trim()||null},s=await fetch(`/api/ct/rivales/${N.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("No se pudo guardar los datos");let a=await s.json();f(a?.data),T(!1),b&&await eW()}catch(e){alert(e?.message||"Error al guardar")}finally{E(!1)}}}function eQ(){let e=H.trim();e&&(M(s=>[{title:W.trim()||null,url:e},...s]),K(""),X(""))}async function eZ(){if(eH){alert("Hay URLs de video inv\xe1lidas. Corregilas para guardar.");return}J(!0);try{if(!(await fetch(`/api/ct/rivales/${e}/videos`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({videos:q})})).ok)throw Error("No se pudo guardar videos");await eL(),b&&await eW()}catch(e){alert(e?.message||"Error al guardar videos")}finally{J(!1)}}function e0(e,s){Q(a=>{let t=[...a.recent||[]];return t[e]={...t[e],...s},{...a,recent:t}})}async function e1(){ea(!0);try{let s={totals:{gf:Y.totals?.gf??void 0,ga:Y.totals?.ga??void 0,possession:Y.totals?.possession??void 0},recent:Y.recent||[]};if(!(await fetch(`/api/ct/rivales/${e}/stats`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw Error("No se pudo guardar estad\xedsticas");await ez(),b&&await eW()}catch(e){alert(e?.message||"Error al guardar estad\xedsticas")}finally{ea(!1)}}function e2(){let e=ed.trim();e&&(er(s=>({...s,checklist:[{text:e,done:!1},...s.checklist||[]]})),eo(""))}async function e5(){ec(!0);try{let s={observations:(et.observations||"").trim(),checklist:(et.checklist||[]).map(e=>({text:e.text.trim(),done:!!e.done}))};if(!(await fetch(`/api/ct/rivales/${e}/notas`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw Error("No se pudo guardar notas");await eB(),b&&await eW()}catch(e){alert(e?.message||"Error al guardar notas")}finally{ec(!1)}}function e3(e,s){eh(a=>({...a,[e]:s}))}async function e4(s){eg(!0);try{await fetch(`/api/ct/rivales/${e}/visibility`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),await eJ(),b&&await eW()}catch(e){alert(e?.message||"Error al guardar visibilidad")}finally{eg(!1)}}async function e9(){await e4({...ex})}async function e6(){let e=n();eh(e),await e4(e)}async function e7(){if(!eA){e_("Seleccion\xe1 un PDF primero.");return}eE(!0),e_(null);try{let s=new FormData;s.set("file",eA);let a=await fetch(`/api/ct/rivales/${e}/import/pdf`,{method:"POST",body:s});if(!a.ok)throw Error(await a.text());await Promise.all([eq(),eM(),ez()]),e_("PDF importado. Se actualizaron datos del plan y estad\xedsticas (si se pudieron extraer)."),b&&await eW()}catch(e){e_(e?.message||"Error importando PDF")}finally{eE(!1)}}async function e8(){if(!eD){e_("Seleccion\xe1 un CSV primero.");return}eE(!0),e_(null);try{let s=new FormData;s.set("file",eD);let a=await fetch(`/api/ct/rivales/${e}/import/csv`,{method:"POST",body:s});if(!a.ok)throw Error(await a.text());await ez(),e_("CSV importado. Se actualizaron \xfaltimos partidos y totales."),b&&await eW()}catch(e){e_(e?.message||"Error importando CSV")}finally{eE(!1)}}if(j)return t.jsx("div",{className:"p-4 text-gray-500",children:"Cargando…"});if(!N)return(0,t.jsxs)("div",{className:"p-4 space-y-3",children:[t.jsx("div",{className:"text-red-500",children:"Rival no encontrado"}),t.jsx(r.default,{href:"/ct/rivales",className:"text-sm underline",children:"← Volver a Rivales"})]});let se=b?ej??N:N,ss=function(e){if(!e?.nextMatchDate)return"—";try{let s=new Date(e.nextMatchDate).toLocaleString(void 0,{weekday:"short",day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"});return`${s}${e.nextMatchCompetition?` • ${e.nextMatchCompetition}`:""}`}catch{return"—"}}(se),sa=!b;return(0,t.jsxs)("div",{className:"p-4 space-y-4 print-container",children:[t.jsx("style",{children:`
        @media print {
          .print-hidden { display: none !important; }
          .print-container { padding: 0 !important; }
          .print-card { border: none !important; box-shadow: none !important; }
        }
      `}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 flex items-center justify-between print-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{children:[t.jsx(r.default,{href:"/ct/rivales",className:"underline",children:"Rivales"}),t.jsx("span",{className:"mx-1",children:"/"}),t.jsx("span",{className:"font-medium",children:se.name})]}),(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-1",children:[t.jsx("button",{onClick:()=>{try{let e=eK(m);navigator.clipboard?.writeText(e),alert("Enlace copiado (vista jugadores).")}catch{alert("No se pudo copiar. Copi\xe1 desde la barra del navegador.")}},className:"text-[11px] px-2 py-1 rounded-md border hover:bg-gray-50",title:"Copia un enlace que abre esta ficha en modo jugador",children:"Copiar enlace (jugadores)"}),t.jsx("button",{onClick:function(){try{let e=new URL(eK(m));e.searchParams.set("print","1"),window.open(e.toString(),"_blank")}catch{let e=new URL(window.location.href);e.searchParams.set("player","1"),e.searchParams.set("print","1"),window.open(e.toString(),"_blank")}},className:"text-[11px] px-2 py-1 rounded-md border hover:bg-gray-50",title:"Abre la Vista Jugador e imprime/exporta",children:"Imprimir / Exportar"})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-xs cursor-pointer select-none",children:[t.jsx("span",{className:"text-gray-600",children:"Vista jugador"}),t.jsx("input",{type:"checkbox",checked:b,onChange:()=>y(e=>!e),className:"h-4 w-4"}),b&&t.jsx("span",{className:"px-2 py-0.5 rounded-md bg-emerald-100 text-emerald-800",children:"Previsualizando"})]})]}),(0,t.jsxs)("header",{className:"flex items-center gap-4 border-b pb-3",children:[se.logoUrl?t.jsx("img",{src:se.logoUrl,alt:se.name,className:"h-16 w-16 rounded border object-contain bg-white"}):t.jsx("div",{className:"h-16 w-16 rounded border bg-gray-100"}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-xl font-bold",children:se.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["DT: ",t.jsx("b",{children:se.coach||"—"})," • Sistema base: ",se.baseSystem||"—"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Pr\xf3ximo partido: ",ss]})]}),sa&&"resumen"===m&&t.jsx("button",{onClick:()=>T(e=>!e),className:"text-xs px-3 py-1.5 rounded-xl border hover:bg-gray-50 print-hidden",children:$?"Cancelar":"Editar"})]}),(0,t.jsxs)("nav",{className:"flex gap-2 border-b print-hidden",children:[t.jsx("button",{onClick:()=>g("resumen"),className:`px-3 py-2 text-sm font-medium border-b-2 ${"resumen"===m?"border-black text-black":"border-transparent text-gray-500 hover:text-black"}`,children:"Resumen"}),(!b||e$?.showSquad)&&t.jsx(r.default,{href:`/ct/rivales/${e}/plantel`,className:"px-3 py-2 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-black",children:"Plantel"}),[{key:"plan",label:"Plan de partido"},{key:"videos",label:"Videos"},{key:"stats",label:"Estad\xedsticas"},{key:"notas",label:"Notas internas"},{key:"visibilidad",label:"Visibilidad"},{key:"importar",label:"Importar"}].map(e=>t.jsx("button",{onClick:()=>g(e.key),className:`px-3 py-2 text-sm font-medium border-b-2 ${m===e.key?"border-black text-black":"border-transparent text-gray-500 hover:text-black"}`,children:e.label},e.key))]}),(0,t.jsxs)("section",{className:"rounded-xl border bg-white p-4 print-card",children:["resumen"===m&&t.jsx(t.Fragment,{children:$&&sa?(0,t.jsxs)("form",{onSubmit:eY,className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Editar datos del rival"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"DT"}),t.jsx("input",{className:"w-full rounded-md border px-2 py-1.5 text-sm",value:A,onChange:e=>G(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"Sistema base"}),t.jsx("input",{className:"w-full rounded-md border px-2 py-1.5 text-sm",value:D,onChange:e=>R(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"Pr\xf3ximo partido (fecha y hora)"}),t.jsx("input",{type:"datetime-local",className:"w-full rounded-md border px-2 py-1.5 text-sm",value:I,onChange:e=>_(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"Competici\xf3n"}),t.jsx("input",{className:"w-full rounded-md border px-2 py-1.5 text-sm",value:O,onChange:e=>V(e.target.value)})]})]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:U,className:`px-3 py-1.5 rounded-xl text-xs ${U?"bg-gray-200 text-gray-500":"bg-black text-white hover:opacity-90"}`,children:U?"Guardando…":"Guardar cambios"})})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Resumen"}),(0,t.jsxs)("ul",{className:"text-sm text-gray-700 list-disc pl-4",children:[(0,t.jsxs)("li",{children:["DT: ",se.coach||"—"]}),(0,t.jsxs)("li",{children:["Sistema base: ",se.baseSystem||"—"]}),(0,t.jsxs)("li",{children:["Pr\xf3ximo partido: ",ss]})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2 print-hidden",children:"* Estos campos se pueden editar desde el listado de rivales (o m\xe1s adelante desde esta ficha)."})]})}),"plan"===m&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Plan de partido"}),b&&t.jsx("span",{className:"text-[11px] px-2 py-1 rounded-md bg-amber-100 text-amber-800 print-hidden",children:"Vista jugador (aplicando visibilidad)"})]}),b?eb?t.jsx("div",{className:"text-gray-500 text-sm",children:"Cargando…"}):(0,t.jsxs)("div",{className:"space-y-3",children:[e$?.showCharlaUrl&&eN?.charlaUrl?(0,t.jsxs)("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide mb-1",children:"Charla oficial"}),t.jsx("a",{href:eN.charlaUrl,target:"_blank",rel:"noreferrer",className:"text-sm underline",children:"Abrir charla →"})]}):null,(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[e$?.showSystem&&t.jsx(o,{title:"Sistema",content:eN?.report.system||"—"}),e$?.showKeyPlayers&&t.jsx(x,{title:"Jugadores clave",items:eN?.report.keyPlayers}),e$?.showStrengths&&t.jsx(x,{title:"Fortalezas",items:eN?.report.strengths}),e$?.showWeaknesses&&t.jsx(x,{title:"Debilidades",items:eN?.report.weaknesses}),e$?.showSetPiecesFor&&t.jsx(x,{title:"Bal\xf3n parado (a favor)",items:eN?.report.setPieces?.for}),e$?.showSetPiecesAgainst&&t.jsx(x,{title:"Bal\xf3n parado (en contra)",items:eN?.report.setPieces?.against})]})]}):(0,t.jsxs)("form",{onSubmit:eX,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"rounded-lg border bg-gray-50 p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide mb-2",children:"Charla oficial (PDF/PPT/Keynote) – Solo CT"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"URL del archivo"}),t.jsx("input",{className:"w-full rounded-md border px-2 py-1.5 text-sm",placeholder:"https://drive.google.com/…",value:C.charlaUrl||"",onChange:e=>F(s=>({...s,charlaUrl:e.target.value}))}),t.jsx("p",{className:"text-[11px] text-gray-500",children:"Peg\xe1 el enlace compartible (Drive, Dropbox, etc.). Opcional."})]}),C.charlaUrl?t.jsx("div",{className:"flex items-end",children:t.jsx("a",{href:C.charlaUrl,target:"_blank",rel:"noreferrer",className:"text-xs underline",children:"Abrir charla en nueva pesta\xf1a →"})}):null]})]}),(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide mb-2",children:"Informe visual (visible para jugadores seg\xfan visibilidad)"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"Sistema"}),t.jsx("input",{className:"w-full rounded-md border px-2 py-1.5 text-sm",placeholder:'Ej: "4-3-3"',value:C.report.system||"",onChange:e=>F(s=>({...s,report:{...s.report,system:e.target.value}}))})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"Jugadores clave (1 por l\xednea)"}),t.jsx("textarea",{className:"w-full rounded-md border px-2 py-1.5 text-sm h-24",placeholder:"Ej: P\xe9rez 10 G\xf3mez 9",value:eV(C.report.keyPlayers),onChange:e=>F(s=>({...s,report:{...s.report,keyPlayers:eO(e.target.value)}}))})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"Fortalezas (1 por l\xednea)"}),t.jsx("textarea",{className:"w-full rounded-md border px-2 py-1.5 text-sm h-24",placeholder:"Presi\xf3n alta Transiciones r\xe1pidas",value:eV(C.report.strengths),onChange:e=>F(s=>({...s,report:{...s.report,strengths:eO(e.target.value)}}))})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"Debilidades (1 por l\xednea)"}),t.jsx("textarea",{className:"w-full rounded-md border px-2 py-1.5 text-sm h-24",placeholder:"Lentitud en repliegue Laterales dejan espalda",value:eV(C.report.weaknesses),onChange:e=>F(s=>({...s,report:{...s.report,weaknesses:eO(e.target.value)}}))})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"Bal\xf3n parado – A favor (1 por l\xednea)"}),t.jsx("textarea",{className:"w-full rounded-md border px-2 py-1.5 text-sm h-24",placeholder:"C\xf3rner cerrado primer palo Tiro libre directo",value:eV(C.report.setPieces?.for),onChange:e=>F(s=>({...s,report:{...s.report,setPieces:{for:eO(e.target.value),against:s.report.setPieces?.against||[]}}}))})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"Bal\xf3n parado – En contra (1 por l\xednea)"}),t.jsx("textarea",{className:"w-full rounded-md border px-2 py-1.5 text-sm h-24",placeholder:"C\xf3rner segundos palos Saques de banda largos",value:eV(C.report.setPieces?.against),onChange:e=>F(s=>({...s,report:{...s.report,setPieces:{for:s.report.setPieces?.for||[],against:eO(e.target.value)}}}))})]})]}),(0,t.jsxs)("div",{className:"pt-2",children:[t.jsx("button",{type:"submit",disabled:k,className:`px-3 py-1.5 rounded-xl text-xs ${k?"bg-gray-200 text-gray-500":"bg-black text-white hover:opacity-90"}`,children:k?"Guardando…":"Guardar plan"}),w&&t.jsx("span",{className:"ml-3 text-xs text-gray-500",children:"Cargando plan…"})]})]})]})]}),"videos"===m&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Videos"}),b?eb?t.jsx("div",{className:"text-gray-500 text-sm",children:"Cargando…"}):(0,t.jsxs)("div",{className:"space-y-2",children:[!e$?.showVideos&&t.jsx("div",{className:"text-sm text-gray-500",children:"No visible para jugadores."}),e$?.showVideos&&(ew?.length||0)>0?t.jsx("ul",{className:"list-disc pl-4 text-sm",children:ew.map((e,s)=>t.jsx("li",{children:t.jsx("a",{href:e.url,className:"underline",target:"_blank",rel:"noreferrer",children:e.title||e.url})},s))}):e$?.showVideos?t.jsx("div",{className:"text-sm text-gray-500",children:"Sin videos."}):null]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx("input",{className:"rounded-md border px-2 py-1 text-sm w-64",placeholder:"T\xedtulo (opcional)",value:W,onChange:e=>K(e.target.value)}),t.jsx("input",{className:`rounded-md border px-2 py-1 text-sm flex-1 ${H&&!c(H)?"border-red-500 bg-red-50":""}`,placeholder:"URL del video",value:H,onChange:e=>X(e.target.value),onKeyDown:e=>"Enter"===e.key?(e.preventDefault(),eQ()):null}),t.jsx("button",{onClick:eQ,className:"text-xs px-2 py-1 rounded-md border hover:bg-gray-50",children:"+ Agregar"})]}),eH&&t.jsx("div",{className:"text-xs text-red-600",children:"Hay URLs inv\xe1lidas. Corregilas para poder guardar."}),L?t.jsx("div",{className:"text-sm text-gray-500",children:"Cargando…"}):(0,t.jsxs)("ul",{className:"space-y-2",children:[0===(q||[]).length&&t.jsx("li",{className:"text-sm text-gray-500",children:"Sin videos."}),q.map((e,s)=>{let a=!!e.url&&!c(e.url);return(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:`text-sm flex-1 truncate ${a?"text-red-700":""}`,children:[e.title?`${e.title} — `:"",e.url]}),t.jsx("button",{onClick:()=>{M(e=>e.filter((e,a)=>a!==s))},className:"text-xs px-2 py-1 rounded-md border hover:bg-gray-50",children:"Borrar"})]},s)})]}),t.jsx("div",{className:"pt-1",children:t.jsx("button",{onClick:eZ,disabled:B||eH,className:`px-3 py-1.5 rounded-xl text-xs ${B||eH?"bg-gray-200 text-gray-500":"bg-black text-white hover:opacity-90"}`,children:B?"Guardando…":"Guardar videos"})})]})]}),"stats"===m&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Estad\xedsticas"}),b?eb?t.jsx("div",{className:"text-sm text-gray-500",children:"Cargando…"}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[t.jsx(h,{label:"GF",value:ek?.totals?.gf,hidden:!e$?.showStatsTotalsGF}),t.jsx(h,{label:"GC",value:ek?.totals?.ga,hidden:!e$?.showStatsTotalsGA}),t.jsx(h,{label:"% Posesi\xf3n",value:ek?.totals?.possession,hidden:!e$?.showStatsTotalsPossession})]}),e$?.showStatsRecent?t.jsx("div",{className:"rounded-lg border",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{className:"text-left p-2",children:"Fecha"}),t.jsx("th",{className:"text-left p-2",children:"Rival"}),t.jsx("th",{className:"text-left p-2",children:"Comp"}),t.jsx("th",{className:"text-left p-2",children:"Loc"}),t.jsx("th",{className:"text-right p-2",children:"GF"}),t.jsx("th",{className:"text-right p-2",children:"GC"})]})}),(0,t.jsxs)("tbody",{children:[0===(ek?.recent||[]).length&&t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"p-2 text-gray-500",children:"Sin datos."})}),(ek?.recent||[]).map((e,s)=>(0,t.jsxs)("tr",{className:"border-t",children:[t.jsx("td",{className:"p-2",children:e.date||"—"}),t.jsx("td",{className:"p-2",children:e.opponent||"—"}),t.jsx("td",{className:"p-2",children:e.comp||"—"}),t.jsx("td",{className:"p-2",children:e.homeAway||"—"}),t.jsx("td",{className:"p-2 text-right",children:Number.isFinite(e.gf)?e.gf:"—"}),t.jsx("td",{className:"p-2 text-right",children:Number.isFinite(e.ga)?e.ga:"—"})]},s))]})]})}):t.jsx("div",{className:"text-sm text-gray-500",children:"\xdaltimos partidos ocultos para jugadores."})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"GF"}),t.jsx("input",{className:"w-full rounded-md border px-2 py-1.5 text-sm",type:"number",value:Y.totals?.gf??"",onChange:e=>Q(s=>({...s,totals:{...s.totals||{},gf:""===e.target.value?void 0:Number(e.target.value)}}))})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"GA"}),t.jsx("input",{className:"w-full rounded-md border px-2 py-1.5 text-sm",type:"number",value:Y.totals?.ga??"",onChange:e=>Q(s=>({...s,totals:{...s.totals||{},ga:""===e.target.value?void 0:Number(e.target.value)}}))})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[11px] text-gray-500",children:"% Posesi\xf3n"}),t.jsx("input",{className:"w-full rounded-md border px-2 py-1.5 text-sm",type:"number",value:Y.totals?.possession??"",onChange:e=>Q(s=>({...s,totals:{...s.totals||{},possession:""===e.target.value?void 0:Number(e.target.value)}}))})]})]}),(0,t.jsxs)("div",{className:"rounded-lg border",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-2",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide",children:"\xdaltimos partidos"}),t.jsx("button",{onClick:function(){Q(e=>({...e,recent:[{},...e.recent||[]]}))},className:"text-xs px-2 py-1 rounded-md border hover:bg-gray-50",children:"+ Agregar fila"})]}),(0,t.jsxs)("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{className:"text-left p-2",children:"Fecha (ISO o texto)"}),t.jsx("th",{className:"text-left p-2",children:"Rival"}),t.jsx("th",{className:"text-left p-2",children:"Comp"}),t.jsx("th",{className:"text-left p-2",children:"Loc"}),t.jsx("th",{className:"text-right p-2",children:"GF"}),t.jsx("th",{className:"text-right p-2",children:"GC"}),t.jsx("th",{className:"p-2"})]})}),(0,t.jsxs)("tbody",{children:[0===(Y.recent||[]).length&&t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"p-2 text-gray-500",children:"Sin filas."})}),(Y.recent||[]).map((e,s)=>(0,t.jsxs)("tr",{className:"border-t",children:[t.jsx("td",{className:"p-1",children:t.jsx("input",{className:"w-full rounded-md border px-2 py-1",value:e.date??"",onChange:e=>e0(s,{date:e.target.value})})}),t.jsx("td",{className:"p-1",children:t.jsx("input",{className:"w-full rounded-md border px-2 py-1",value:e.opponent??"",onChange:e=>e0(s,{opponent:e.target.value})})}),t.jsx("td",{className:"p-1",children:t.jsx("input",{className:"w-full rounded-md border px-2 py-1",value:e.comp??"",onChange:e=>e0(s,{comp:e.target.value})})}),t.jsx("td",{className:"p-1",children:t.jsx("input",{className:"w-full rounded-md border px-2 py-1",value:e.homeAway??"",onChange:e=>e0(s,{homeAway:e.target.value}),placeholder:"H/A/N"})}),t.jsx("td",{className:"p-1",children:t.jsx("input",{className:"w-full rounded-md border px-2 py-1 text-right",type:"number",value:e.gf??"",onChange:e=>e0(s,{gf:""===e.target.value?void 0:Number(e.target.value)})})}),t.jsx("td",{className:"p-1",children:t.jsx("input",{className:"w-full rounded-md border px-2 py-1 text-right",type:"number",value:e.ga??"",onChange:e=>e0(s,{ga:""===e.target.value?void 0:Number(e.target.value)})})}),t.jsx("td",{className:"p-1",children:t.jsx("button",{onClick:()=>{Q(e=>({...e,recent:(e.recent||[]).filter((e,a)=>a!==s)}))},className:"text-xs px-2 py-1 rounded-md border hover:bg-gray-50",children:"Borrar"})})]},s))]})]})]}),t.jsx("div",{className:"pt-1",children:t.jsx("button",{onClick:e1,disabled:es,className:`px-3 py-1.5 rounded-xl text-xs ${es?"bg-gray-200 text-gray-500":"bg-black text-white hover:opacity-90"}`,children:es?"Guardando…":"Guardar estad\xedsticas"})})]})]}),"notas"===m&&(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Notas internas"}),b?eb?t.jsx("div",{className:"text-sm text-gray-500",children:"Cargando…"}):e$?.showNotesForPlayers?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"rounded-lg border p-3 bg-gray-50",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide",children:"Observaciones"}),t.jsx("div",{className:"text-sm text-gray-800 mt-1 whitespace-pre-wrap",children:eC?.observations||"—"})]}),(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide",children:"Checklist"}),(0,t.jsxs)("ul",{className:"mt-2 space-y-1",children:[0===(eC?.checklist||[]).length&&t.jsx("li",{className:"text-sm text-gray-500",children:"Sin \xedtems."}),(eC?.checklist||[]).map((e,s)=>(0,t.jsxs)("li",{className:"text-sm",children:[e.done?"✅ ":"⬜ "," ",e.text]},s))]})]})]}):t.jsx("div",{className:"text-sm text-gray-500",children:"No visible para jugadores."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"rounded-lg border p-3 bg-gray-50",children:[t.jsx("label",{className:"text-[12px] font-semibold uppercase tracking-wide",children:"Observaciones"}),t.jsx("textarea",{className:"w-full rounded-md border px-2 py-1.5 text-sm h-28 mt-1 bg-white",placeholder:"Ideas, alertas, instrucciones internas…",value:et.observations||"",onChange:e=>er(s=>({...s,observations:e.target.value}))})]}),(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide",children:"Checklist"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx("input",{className:"rounded-md border px-2 py-1 text-sm w-64",placeholder:"Nuevo \xedtem…",value:ed,onChange:e=>eo(e.target.value),onKeyDown:e=>"Enter"===e.key?(e.preventDefault(),e2()):null}),t.jsx("button",{onClick:e2,className:"text-xs px-2 py-1 rounded-md border hover:bg-gray-50",children:"+ Agregar"})]})]}),(0,t.jsxs)("ul",{className:"mt-3 space-y-2",children:[0===(et.checklist||[]).length&&t.jsx("li",{className:"text-sm text-gray-500",children:"Sin \xedtems."}),(et.checklist||[]).map((e,s)=>(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:!!e.done,onChange:()=>{er(e=>{let a=[...e.checklist||[]];return a[s]={...a[s],done:!a[s].done},{...e,checklist:a}})}}),t.jsx("input",{className:`flex-1 rounded-md border px-2 py-1 text-sm ${e.done?"line-through text-gray-500":""}`,value:e.text,onChange:e=>{var a;return a=e.target.value,void er(e=>{let t=[...e.checklist||[]];return t[s]={...t[s],text:a},{...e,checklist:t}})}}),t.jsx("button",{onClick:()=>{er(e=>({...e,checklist:(e.checklist||[]).filter((e,a)=>a!==s)}))},className:"text-xs px-2 py-1 rounded-md border hover:bg-gray-50",children:"Borrar"})]},s))]}),(0,t.jsxs)("div",{className:"pt-3",children:[t.jsx("button",{onClick:e5,disabled:en,className:`px-3 py-1.5 rounded-xl text-xs ${en?"bg-gray-200 text-gray-500":"bg-black text-white hover:opacity-90"}`,children:en?"Guardando…":"Guardar notas"}),el&&t.jsx("span",{className:"ml-3 text-xs text-gray-500",children:"Cargando…"})]})]})]})]}),"visibilidad"===m&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Visibilidad (qu\xe9 ven los jugadores)"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:e6,disabled:eu,className:"text-xs px-3 py-1.5 rounded-xl border hover:bg-gray-50",title:"Restaurar valores predeterminados",children:"Restaurar"}),t.jsx("button",{onClick:e9,disabled:eu,className:`text-xs px-3 py-1.5 rounded-xl ${eu?"bg-gray-200 text-gray-500":"bg-black text-white hover:opacity-90"}`,children:eu?"Guardando…":"Guardar cambios"})]})]}),ep?t.jsx("div",{className:"text-sm text-gray-500",children:"Cargando…"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide mb-2",children:"Plan de partido"}),t.jsx(p,{label:"Sistema",checked:ex.showSystem,onChange:e=>e3("showSystem",e)}),t.jsx(p,{label:"Jugadores clave",checked:ex.showKeyPlayers,onChange:e=>e3("showKeyPlayers",e)}),t.jsx(p,{label:"Fortalezas",checked:ex.showStrengths,onChange:e=>e3("showStrengths",e)}),t.jsx(p,{label:"Debilidades",checked:ex.showWeaknesses,onChange:e=>e3("showWeaknesses",e)}),t.jsx(p,{label:"Bal\xf3n parado – A favor",checked:ex.showSetPiecesFor,onChange:e=>e3("showSetPiecesFor",e)}),t.jsx(p,{label:"Bal\xf3n parado – En contra",checked:ex.showSetPiecesAgainst,onChange:e=>e3("showSetPiecesAgainst",e)})]}),(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide mb-2",children:"Plantel"}),t.jsx(p,{label:"Mostrar plantel a jugadores",checked:ex.showSquad,onChange:e=>e3("showSquad",e)})]}),(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide mb-2",children:"Charla oficial"}),t.jsx(p,{label:"Mostrar enlace de charla a jugadores",checked:ex.showCharlaUrl,onChange:e=>e3("showCharlaUrl",e)})]}),(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide mb-2",children:"Videos"}),t.jsx(p,{label:"Mostrar lista de videos",checked:ex.showVideos,onChange:e=>e3("showVideos",e)})]}),(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide mb-2",children:"Estad\xedsticas"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-2",children:[t.jsx(p,{label:"GF (goles a favor)",checked:ex.showStatsTotalsGF,onChange:e=>e3("showStatsTotalsGF",e)}),t.jsx(p,{label:"GC (goles en contra)",checked:ex.showStatsTotalsGA,onChange:e=>e3("showStatsTotalsGA",e)}),t.jsx(p,{label:"% de posesi\xf3n",checked:ex.showStatsTotalsPossession,onChange:e=>e3("showStatsTotalsPossession",e)}),t.jsx(p,{label:"\xdaltimos partidos",checked:ex.showStatsRecent,onChange:e=>e3("showStatsRecent",e)})]})]}),(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide mb-2",children:"Notas internas"}),t.jsx(p,{label:"Permitir ver notas a jugadores",checked:ex.showNotesForPlayers,onChange:e=>e3("showNotesForPlayers",e)})]}),(0,t.jsxs)("div",{className:"pt-2",children:[t.jsx("button",{onClick:e9,disabled:eu,className:`px-3 py-1.5 rounded-xl text-xs ${eu?"bg-gray-200 text-gray-500":"bg-black text-white hover:opacity-90"}`,children:eu?"Guardando…":"Guardar cambios"}),t.jsx("span",{className:"ml-3 text-xs text-gray-500",children:"Tip: activ\xe1 “Vista jugador” arriba para previsualizar."})]})]})]}),"importar"===m&&(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Importar datos (Wyscout PDF / CSV)"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide mb-2",children:"PDF de informe de equipo"}),t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Sub\xed el PDF de Wyscout (informe de equipo). Intentaremos extraer DT, sistema base, jugadores clave, fortalezas/debilidades y algunos totales."}),t.jsx("input",{type:"file",accept:"application/pdf",onChange:e=>eG(e.target.files?.[0]||null)}),t.jsx("div",{className:"pt-2",children:t.jsx("button",{onClick:e7,disabled:eU||!eA,className:`px-3 py-1.5 rounded-xl text-xs ${eU||!eA?"bg-gray-200 text-gray-500":"bg-black text-white hover:opacity-90"}`,children:eU?"Procesando…":"Importar PDF"})})]}),(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide mb-2",children:"CSV de resultados/estad\xedstica"}),t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Sub\xed un CSV con columnas t\xedpicas (date, opponent, comp, homeAway, gf, ga, possession). Se actualizar\xe1n “\xdaltimos partidos” y los totales (GF/GA/Posesi\xf3n)."}),t.jsx("input",{type:"file",accept:".csv,text/csv",onChange:e=>eR(e.target.files?.[0]||null)}),t.jsx("div",{className:"pt-2",children:t.jsx("button",{onClick:e8,disabled:eU||!eD,className:`px-3 py-1.5 rounded-xl text-xs ${eU||!eD?"bg-gray-200 text-gray-500":"bg-black text-white hover:opacity-90"}`,children:eU?"Procesando…":"Importar CSV"})})]})]}),eI&&t.jsx("div",{className:"text-sm px-3 py-2 rounded-md border bg-gray-50",children:eI}),t.jsx("div",{className:"text-xs text-gray-500",children:"Nota: El parseo es heur\xedstico. Si alg\xfan dato no sale perfecto, pod\xe9s corregirlo a mano en las pesta\xf1as “Plan” y “Estad\xedsticas”."})]})]})]})}function o({title:e,content:s}){return(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide mb-1",children:e}),t.jsx("div",{className:"text-sm text-gray-800",children:s||"—"})]})}function x({title:e,items:s}){return(0,t.jsxs)("div",{className:"rounded-lg border p-3",children:[t.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide mb-1",children:e}),s&&s.length?t.jsx("ul",{className:"list-disc pl-4 text-sm text-gray-800 space-y-0.5",children:s.map((e,s)=>t.jsx("li",{children:e},s))}):t.jsx("div",{className:"text-sm text-gray-500",children:"—"})]})}function h({label:e,value:s,hidden:a}){if(a)return null;let r="number"==typeof s&&Number.isFinite(s);return(0,t.jsxs)("div",{className:"rounded-lg border p-3 bg-gray-50",children:[t.jsx("div",{className:"text-[11px] text-gray-500",children:e}),t.jsx("div",{className:"text-lg font-semibold",children:r?s:"—"})]})}function p({label:e,checked:s,onChange:a}){return(0,t.jsxs)("label",{className:"flex items-center justify-between gap-3 py-1.5",children:[t.jsx("span",{className:"text-sm text-gray-800",children:e}),t.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:s,onChange:e=>a(e.target.checked)})]})}},42126:(e,s,a)=>{"use strict";a.d(s,{default:()=>l});var t=a(10326),r=a(77109);function l({children:e}){return t.jsx(r.SessionProvider,{children:e})}},82152:(e,s,a)=>{"use strict";a.d(s,{default:()=>n});var t=a(10326),r=a(17577),l=a(77109),i=a(35047);function n({className:e,label:s="Equipo"}){let{data:a,status:n,update:c}=(0,l.useSession)(),d=(0,i.useRouter)(),o=(0,r.useMemo)(()=>a?.user?.teamIds??[],[a?.user?.teamIds]);a?.user?.currentTeamId;let[x,h]=(0,r.useState)([]),[p,m]=(0,r.useState)(""),[u,g]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[j,v]=(0,r.useState)(null),N=o.length>0;if((0,r.useMemo)(()=>N?[...o].sort().join("|"):"",[N,o]),"loading"===n||!N)return null;async function f(e){let s=e.target.value;if(s&&s!==p){m(s),y(!0),v(null);try{document.cookie=`ctb_team=${encodeURIComponent(s)}; path=/; max-age=2592000; SameSite=Lax`;let e=await fetch("/api/session/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamId:s})});if(!e.ok){let s=await e.json().catch(()=>null);throw Error(s?.error||`Error ${e.status}`)}await c?.(),d.refresh()}catch(e){m(p),v(e?.message||"No se pudo cambiar de equipo.")}finally{y(!1)}}}let w=["flex flex-col gap-1 text-xs",e].filter(Boolean).join(" ");return 0===x.length?null:(0,t.jsxs)("div",{className:w,children:[t.jsx("label",{className:"text-[10px] font-semibold uppercase text-gray-500",children:s}),t.jsx("select",{value:p,onChange:f,disabled:u||b,className:"w-full rounded-md border px-2 py-1.5 text-sm disabled:opacity-60",children:x.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))}),j?t.jsx("span",{className:"text-[11px] text-red-600",children:j}):null]})}},66382:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var t=a(68570);let r=(0,t.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/layout.tsx`),{__esModule:l,$$typeof:i}=r;r.default;let n=(0,t.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/layout.tsx#default`)},4398:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var t=a(68570);let r=(0,t.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/rivales/[id]/page.tsx`),{__esModule:l,$$typeof:i}=r;r.default;let n=(0,t.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/rivales/[id]/page.tsx#default`)},15495:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o,metadata:()=>d});var t=a(19510);a(5023);var r=a(68570);let l=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx`),{__esModule:i,$$typeof:n}=l;l.default;let c=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx#default`),d={title:"ctbrain",description:"App"};function o({children:e}){return t.jsx("html",{lang:"es",children:t.jsx("body",{children:t.jsx(c,{children:e})})})}},5023:()=>{}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[8948,1159,9404],()=>a(99265));module.exports=t})();