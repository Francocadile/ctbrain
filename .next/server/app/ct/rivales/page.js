(()=>{var e={};e.id=8386,e.ids=[8386],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30251:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>o}),a(10378),a(66382),a(15495),a(35866);var r=a(23191),s=a(88716),i=a(37922),n=a.n(i),l=a(95231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(t,c);let o=["",{children:["ct",{children:["rivales",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,10378)),"/Users/Fran/ctbrain-14/src/app/ct/rivales/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,66382)),"/Users/Fran/ctbrain-14/src/app/ct/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,15495)),"/Users/Fran/ctbrain-14/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/Fran/ctbrain-14/src/app/ct/rivales/page.tsx"],u="/ct/rivales/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/ct/rivales/page",pathname:"/ct/rivales",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},54630:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},97992:(e,t,a)=>{Promise.resolve().then(a.bind(a,94340))},85434:(e,t,a)=>{Promise.resolve().then(a.bind(a,65511))},14497:(e,t,a)=>{Promise.resolve().then(a.bind(a,42126))},90434:(e,t,a)=>{"use strict";a.d(t,{default:()=>s.a});var r=a(79404),s=a.n(r)},35047:(e,t,a)=>{"use strict";var r=a(77389);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},94340:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(10326);a(17577);var s=a(90434),i=a(35047),n=a(77109),l=a(82152);function c({href:e,children:t,active:a,soon:i}){let n="block rounded-md px-2 py-1.5 text-sm transition";return e?r.jsx(s.default,{href:e,className:`${n} ${a?"bg-black text-white":"hover:bg-gray-100"}`,children:t}):(0,r.jsxs)("span",{className:`${n} text-gray-400 cursor-not-allowed`,children:[t," ",i&&r.jsx("small",{className:"ml-1",children:"PRONTO"})]})}function o({children:e}){let t=(0,i.usePathname)(),a=e=>t===e||t?.startsWith(e+"/");return(0,r.jsxs)("div",{className:"min-h-screen flex bg-gray-50",children:[(0,r.jsxs)("aside",{className:"w-64 shrink-0 border-r bg-white p-3 space-y-3",children:[r.jsx(l.default,{className:"w-full"}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"INICIO"}),r.jsx("ul",{className:"space-y-0.5 mb-2",children:r.jsx("li",{children:r.jsx(c,{href:"/ct",active:"/ct"===t,children:"Dashboard / Inicio r\xe1pido"})})}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"MONITOREO"}),(0,r.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[r.jsx("li",{children:r.jsx(c,{href:"/ct/metrics/wellness",active:a("/ct/metrics/wellness"),children:"Wellness"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/metrics/rpe",active:a("/ct/metrics/rpe"),children:"Rpe"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/injuries",active:a("/ct/injuries"),children:"Lesionados"})})]}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"PLANIFICACI\xd3N"}),(0,r.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[r.jsx("li",{children:r.jsx(c,{href:"/ct/plan-semanal",active:a("/ct/plan-semanal"),children:"Plan semanal (Editor)"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/sessions",active:a("/ct/sessions"),children:"Sesiones"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/exercises",active:a("/ct/exercises"),children:"Ejercicios"})})]}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"T\xc9CNICA"}),(0,r.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[r.jsx("li",{children:r.jsx(c,{href:"/ct/rivales",active:a("/ct/rivales"),children:"Rivales / Plan de partido"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/scouting",active:a("/ct/scouting"),children:"Scouting"})})]}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"SALIR"}),r.jsx("ul",{className:"space-y-0.5",children:r.jsx("li",{children:r.jsx("button",{"aria-label":"Cerrar sesi\xf3n",onClick:()=>(0,n.signOut)({callbackUrl:"/login"}),className:"block w-full text-left rounded-md px-2 py-1.5 text-sm transition hover:bg-gray-100",children:"Cerrar sesi\xf3n"})})})]}),r.jsx("main",{className:"flex-1 p-3 md:p-4",children:e})]})}},65511:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var r=a(10326),s=a(90434),i=a(17577);function n(){let[e,t]=(0,i.useState)(!0),[a,n]=(0,i.useState)([]),[l,c]=(0,i.useState)(""),o=(0,i.useMemo)(()=>{let e=l.trim().toLowerCase();return e?a.filter(t=>t.name.toLowerCase().includes(e)):a},[l,a]);return(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsxs)("header",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-lg md:text-xl font-bold",children:"Rivales"}),r.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"Toc\xe1 un escudo para abrir la ficha t\xe9cnica y el plan de partido."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("input",{className:"w-56 rounded-md border px-2 py-1.5 text-sm",placeholder:"Buscar rival…",value:l,onChange:e=>c(e.target.value)}),r.jsx(s.default,{href:"/ct/rivales/gestionar",className:"px-3 py-1.5 rounded-xl border hover:bg-gray-50 text-xs",children:"Gestionar"})]})]}),e?r.jsx("div",{className:"p-4 text-gray-500",children:"Cargando…"}):0===o.length?(0,r.jsxs)("div",{className:"p-8 text-gray-500 italic border rounded-2xl bg-white",children:["No hay rivales para mostrar.",r.jsx(s.default,{href:"/ct/rivales/gestionar",className:"ml-1 underline",children:"Agregalos desde “Gestionar”."})]}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-6 gap-4",children:o.map(e=>(0,r.jsxs)(s.default,{href:`/ct/rivales/${e.id}`,className:"flex flex-col items-center rounded-lg border bg-white p-3 hover:shadow-md transition",children:[e.logoUrl?r.jsx("img",{src:e.logoUrl,alt:e.name,className:"h-16 w-16 object-contain rounded bg-white"}):r.jsx("div",{className:"h-16 w-16 rounded border bg-gray-50"}),r.jsx("div",{className:"mt-2 text-xs text-gray-600 line-clamp-1",children:e.name})]},e.id))})]})}a(48217)},42126:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(10326),s=a(77109);function i({children:e}){return r.jsx(s.SessionProvider,{children:e})}},82152:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var r=a(10326),s=a(17577),i=a(77109),n=a(35047);function l({className:e,label:t="Equipo"}){let{data:a,status:l,update:c}=(0,i.useSession)(),o=(0,n.useRouter)(),d=(0,s.useMemo)(()=>a?.user?.teamIds??[],[a?.user?.teamIds]);a?.user?.currentTeamId;let[u,m]=(0,s.useState)([]),[x,p]=(0,s.useState)(""),[h,g]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),[v,b]=(0,s.useState)(null),j=d.length>0;if((0,s.useMemo)(()=>j?[...d].sort().join("|"):"",[j,d]),"loading"===l||!j)return null;async function S(e){let t=e.target.value;if(t&&t!==x){p(t),y(!0),b(null);try{document.cookie=`ctb_team=${encodeURIComponent(t)}; path=/; max-age=2592000; SameSite=Lax`;let e=await fetch("/api/session/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamId:t})});if(!e.ok){let t=await e.json().catch(()=>null);throw Error(t?.error||`Error ${e.status}`)}await c?.(),o.refresh()}catch(e){p(x),b(e?.message||"No se pudo cambiar de equipo.")}finally{y(!1)}}}let N=["flex flex-col gap-1 text-xs",e].filter(Boolean).join(" ");return 0===u.length?null:(0,r.jsxs)("div",{className:N,children:[r.jsx("label",{className:"text-[10px] font-semibold uppercase text-gray-500",children:t}),r.jsx("select",{value:x,onChange:S,disabled:h||f,className:"w-full rounded-md border px-2 py-1.5 text-sm disabled:opacity-60",children:u.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))}),v?r.jsx("span",{className:"text-[11px] text-red-600",children:v}):null]})}},48217:(e,t,a)=>{"use strict";a.d(t,{AA:()=>u,Om:()=>m,TL:()=>o,hV:()=>c,oD:()=>d});let r="ct_exercise_kinds",s="ct_rivals",i=["Rueda de pases","Circuito t\xe9cnico","SSG","MSG","LSG"];async function n(e,t,a=6e3){try{let r=e.startsWith("http")?e:`${e}`,s=new AbortController,i=setTimeout(()=>s.abort(),a),n=await fetch(r,{...t,signal:s.signal,cache:"no-store"});if(clearTimeout(i),!n.ok)return null;return await n.json()}catch{return null}}async function l(){let e=await n("/api/exercise-kinds");if(e?.data?.length){try{localStorage.setItem(r,JSON.stringify(e.data))}catch{}return e.data}return i}async function c(e){let t=(e||"").trim();if(!t)return l();let a=await n("/api/exercise-kinds",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(a?.data?.length){try{localStorage.setItem(r,JSON.stringify(a.data))}catch{}return a.data}let s=await l();s.includes(t)||s.push(t);try{localStorage.setItem(r,JSON.stringify(s))}catch{}return s}async function o(e){let t=Array.from(new Set((e||[]).map(e=>e.trim()).filter(Boolean))),a=await n("/api/exercise-kinds",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({names:t})}),s=a?.data?.length?a.data:t;try{localStorage.setItem(r,JSON.stringify(s))}catch{}return s}async function d(){let e=await n("/api/ct/rivales");if(e?.data){try{localStorage.setItem(s,JSON.stringify(e.data))}catch{}return e.data}try{let e=localStorage.getItem(s);if(e)return JSON.parse(e)}catch{}return[]}async function u(e){let t={id:e.id??null,name:e.name.trim(),logoUrl:e.logoUrl??null,coach:e.coach??null,baseSystem:e.baseSystem??null,nextMatchDate:e.nextMatchDate??null,nextMatchCompetition:e.nextMatchCompetition??null},a=e.id?`/api/ct/rivales/${encodeURIComponent(e.id)}`:"/api/ct/rivales",r=e.id?"PUT":"POST",i=await n(a,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(i?.data){let e=await d(),t=e.findIndex(e=>e.id===i.data.id);t>=0?e[t]=i.data:e.push(i.data);try{localStorage.setItem(s,JSON.stringify(e))}catch{}return i.data}let l=await d(),c=e.id??("undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():`id_${Date.now()}_${Math.random().toString(16).slice(2)}`),o={id:c,name:t.name,logoUrl:t.logoUrl,coach:t.coach??null,baseSystem:t.baseSystem??null,nextMatchDate:t.nextMatchDate??null,nextMatchCompetition:t.nextMatchCompetition??null},u=l.findIndex(e=>e.id===c);u>=0?l[u]=o:l.push(o);try{localStorage.setItem(s,JSON.stringify(l))}catch{}return o}async function m(e){let t=await n(`/api/ct/rivales/${encodeURIComponent(e)}`,{method:"DELETE"});if(t?.ok){let t=(await d()).filter(t=>t.id!==e);try{localStorage.setItem(s,JSON.stringify(t))}catch{}return{ok:!0}}let a=(await d()).filter(t=>t.id!==e);try{localStorage.setItem(s,JSON.stringify(a))}catch{}return{ok:!0}}},66382:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var r=a(68570);let s=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/layout.tsx`),{__esModule:i,$$typeof:n}=s;s.default;let l=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/layout.tsx#default`)},10378:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var r=a(68570);let s=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/rivales/page.tsx`),{__esModule:i,$$typeof:n}=s;s.default;let l=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/rivales/page.tsx#default`)},15495:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d,metadata:()=>o});var r=a(19510);a(5023);var s=a(68570);let i=(0,s.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx`),{__esModule:n,$$typeof:l}=i;i.default;let c=(0,s.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx#default`),o={title:"ctbrain",description:"App"};function d({children:e}){return r.jsx("html",{lang:"es",children:r.jsx("body",{children:r.jsx(c,{children:e})})})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,1159,9404],()=>a(30251));module.exports=r})();