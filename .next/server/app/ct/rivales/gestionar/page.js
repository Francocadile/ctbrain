(()=>{var e={};e.id=7132,e.ids=[7132],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},64198:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>c}),a(11855),a(66382),a(15495),a(35866);var r=a(23191),s=a(88716),l=a(37922),n=a.n(l),i=a(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let c=["",{children:["ct",{children:["rivales",{children:["gestionar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,11855)),"/Users/Fran/ctbrain-14/src/app/ct/rivales/gestionar/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,66382)),"/Users/Fran/ctbrain-14/src/app/ct/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,15495)),"/Users/Fran/ctbrain-14/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/Fran/ctbrain-14/src/app/ct/rivales/gestionar/page.tsx"],x="/ct/rivales/gestionar/page",u={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/ct/rivales/gestionar/page",pathname:"/ct/rivales/gestionar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},54630:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},97992:(e,t,a)=>{Promise.resolve().then(a.bind(a,94340))},89762:(e,t,a)=>{Promise.resolve().then(a.bind(a,17108))},14497:(e,t,a)=>{Promise.resolve().then(a.bind(a,42126))},90434:(e,t,a)=>{"use strict";a.d(t,{default:()=>s.a});var r=a(79404),s=a.n(r)},35047:(e,t,a)=>{"use strict";var r=a(77389);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},94340:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(10326);a(17577);var s=a(90434),l=a(35047),n=a(77109),i=a(82152);function o({href:e,children:t,active:a,soon:l}){let n="block rounded-md px-2 py-1.5 text-sm transition";return e?r.jsx(s.default,{href:e,className:`${n} ${a?"bg-black text-white":"hover:bg-gray-100"}`,children:t}):(0,r.jsxs)("span",{className:`${n} text-gray-400 cursor-not-allowed`,children:[t," ",l&&r.jsx("small",{className:"ml-1",children:"PRONTO"})]})}function c({children:e}){let t=(0,l.usePathname)(),a=e=>t===e||t?.startsWith(e+"/");return(0,r.jsxs)("div",{className:"min-h-screen flex bg-gray-50",children:[(0,r.jsxs)("aside",{className:"w-64 shrink-0 border-r bg-white p-3 space-y-3",children:[r.jsx(i.default,{className:"w-full"}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"INICIO"}),r.jsx("ul",{className:"space-y-0.5 mb-2",children:r.jsx("li",{children:r.jsx(o,{href:"/ct",active:"/ct"===t,children:"Dashboard / Inicio r\xe1pido"})})}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"MONITOREO"}),(0,r.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[r.jsx("li",{children:r.jsx(o,{href:"/ct/metrics/wellness",active:a("/ct/metrics/wellness"),children:"Wellness"})}),r.jsx("li",{children:r.jsx(o,{href:"/ct/metrics/rpe",active:a("/ct/metrics/rpe"),children:"Rpe"})}),r.jsx("li",{children:r.jsx(o,{href:"/ct/injuries",active:a("/ct/injuries"),children:"Lesionados"})})]}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"PLANIFICACI\xd3N"}),(0,r.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[r.jsx("li",{children:r.jsx(o,{href:"/ct/plan-semanal",active:a("/ct/plan-semanal"),children:"Plan semanal (Editor)"})}),r.jsx("li",{children:r.jsx(o,{href:"/ct/sessions",active:a("/ct/sessions"),children:"Sesiones"})}),r.jsx("li",{children:r.jsx(o,{href:"/ct/exercises",active:a("/ct/exercises"),children:"Ejercicios"})})]}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"T\xc9CNICA"}),(0,r.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[r.jsx("li",{children:r.jsx(o,{href:"/ct/rivales",active:a("/ct/rivales"),children:"Rivales / Plan de partido"})}),r.jsx("li",{children:r.jsx(o,{href:"/ct/scouting",active:a("/ct/scouting"),children:"Scouting"})})]}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"SALIR"}),r.jsx("ul",{className:"space-y-0.5",children:r.jsx("li",{children:r.jsx("button",{"aria-label":"Cerrar sesi\xf3n",onClick:()=>(0,n.signOut)({callbackUrl:"/login"}),className:"block w-full text-left rounded-md px-2 py-1.5 text-sm transition hover:bg-gray-100",children:"Cerrar sesi\xf3n"})})})]}),r.jsx("main",{className:"flex-1 p-3 md:p-4",children:e})]})}},17108:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(10326),s=a(17577),l=a(48217),n=a(90434);function i(){let[e,t]=(0,s.useState)(!0),[a,i]=(0,s.useState)([]),[o,c]=(0,s.useState)(""),[d,x]=(0,s.useState)(!1),[u,m]=(0,s.useState)(()=>({id:void 0,name:"",logoUrl:""}));async function p(){t(!0);try{let e=await (0,l.oD)();i(e)}catch(e){console.error(e),alert("No se pudo cargar rivales.")}finally{t(!1)}}let h=(0,s.useMemo)(()=>{let e=o.trim().toLowerCase();return e?a.filter(t=>t.name.toLowerCase().includes(e)||(t.logoUrl||"").toLowerCase().includes(e)):a},[o,a]);async function g(e){e.preventDefault();let t=u.name.trim(),a=(u.logoUrl||"").trim()||null;if(!t){alert("Ingres\xe1 un nombre");return}x(!0);try{if(!await (0,l.AA)({id:u.id,name:t,logoUrl:a}))throw Error("No se pudo guardar");await p(),m({id:void 0,name:"",logoUrl:""})}catch(e){console.error(e),alert(e?.message||"Error al guardar")}finally{x(!1)}}async function y(e){if(confirm(`\xbfEliminar rival "${e.name}"?`))try{await (0,l.Om)(e.id),await p()}catch(e){console.error(e),alert(e?.message||"Error al eliminar")}}return(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsxs)("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-lg md:text-xl font-bold",children:"Rivales — Gesti\xf3n"}),r.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"Alta / edici\xf3n / borrado (se usa en el “D\xeda Partido” del plan semanal)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(n.default,{href:"/ct/rivales",className:"px-3 py-1.5 rounded-xl border hover:bg-gray-50 text-xs",children:"← Volver a Rivales"}),r.jsx("a",{href:"/ct/dashboard",className:"px-3 py-1.5 rounded-xl border hover:bg-gray-50 text-xs",children:"Dashboard"})]})]}),(0,r.jsxs)("section",{className:"rounded-2xl border bg-white shadow-sm overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gray-50 px-3 py-2 border-b flex items-center justify-between",children:[r.jsx("div",{className:"text-[12px] font-semibold uppercase tracking-wide",children:u.id?"Editar rival":"Nuevo rival"}),u.id&&r.jsx("button",{type:"button",onClick:function(){m({id:void 0,name:"",logoUrl:""})},className:"text-[11px] rounded-lg border px-2 py-0.5 hover:bg-gray-50",children:"Limpiar"})]}),(0,r.jsxs)("form",{onSubmit:g,className:"p-3 grid md:grid-cols-3 gap-3",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-gray-500",children:"Nombre"}),r.jsx("input",{className:"w-full rounded-md border px-2 py-1.5 text-sm",placeholder:"Club Atl\xe9tico Ejemplo",value:u.name,onChange:e=>m(t=>({...t,name:e.target.value}))})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-[11px] text-gray-500",children:"Logo (URL)"}),r.jsx("input",{className:"w-full rounded-md border px-2 py-1.5 text-sm",placeholder:"https://…",value:u.logoUrl,onChange:e=>m(t=>({...t,logoUrl:e.target.value}))})]}),r.jsx("div",{className:"space-y-1 flex items-end",children:r.jsx("button",{type:"submit",disabled:d,className:`px-3 py-1.5 rounded-xl text-xs ${d?"bg-gray-200 text-gray-500":"bg-black text-white hover:opacity-90"}`,children:d?"Guardando…":u.id?"Guardar cambios":"Agregar"})}),u.logoUrl?r.jsx("div",{className:"md:col-span-3",children:r.jsx("img",{src:u.logoUrl,alt:"Logo preview",className:"max-h-28 rounded border object-contain"})}):null]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("input",{className:"w-full md:w-80 rounded-md border px-2 py-1.5 text-sm",placeholder:"Buscar rival…",value:o,onChange:e=>c(e.target.value)}),(0,r.jsxs)("span",{className:"text-[12px] text-gray-500",children:[h.length," resultado(s)"]})]}),(0,r.jsxs)("section",{className:"rounded-2xl border bg-white shadow-sm overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 px-3 py-2 border-b text-[12px] font-semibold uppercase tracking-wide",children:"Lista"}),e?r.jsx("div",{className:"p-4 text-gray-500",children:"Cargando…"}):0===h.length?r.jsx("div",{className:"p-4 text-gray-500 italic",children:"Sin resultados"}):r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"border-b bg-gray-50",children:[r.jsx("th",{className:"text-left px-3 py-2",children:"Logo"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Nombre"}),r.jsx("th",{className:"text-left px-3 py-2",children:"URL"}),r.jsx("th",{className:"text-right px-3 py-2",children:"Acciones"})]})}),r.jsx("tbody",{children:h.map(e=>(0,r.jsxs)("tr",{className:"border-b last:border-0",children:[r.jsx("td",{className:"px-3 py-2",children:e.logoUrl?r.jsx("img",{src:e.logoUrl,alt:e.name,className:"h-10 w-10 object-contain rounded border bg-white"}):r.jsx("div",{className:"h-10 w-10 rounded border bg-gray-50"})}),r.jsx("td",{className:"px-3 py-2 font-medium",children:e.name}),r.jsx("td",{className:"px-3 py-2",children:e.logoUrl?r.jsx("a",{href:e.logoUrl,target:"_blank",rel:"noreferrer",className:"underline text-emerald-700 break-all",children:e.logoUrl}):r.jsx("span",{className:"text-gray-400",children:"—"})}),r.jsx("td",{className:"px-3 py-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{type:"button",className:"h-7 px-2 rounded border text-[11px] hover:bg-gray-50",onClick:()=>{m({id:e.id,name:e.name,logoUrl:e.logoUrl||""}),window.scrollTo({top:0,behavior:"smooth"})},children:"Editar"}),r.jsx("button",{type:"button",className:"h-7 px-2 rounded border text-[11px] hover:bg-gray-50",onClick:()=>y(e),children:"Borrar"})]})})]},e.id))})]})})]})]})}},42126:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var r=a(10326),s=a(77109);function l({children:e}){return r.jsx(s.SessionProvider,{children:e})}},82152:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(10326),s=a(17577),l=a(77109),n=a(35047);function i({className:e,label:t="Equipo"}){let{data:a,status:i,update:o}=(0,l.useSession)(),c=(0,n.useRouter)(),d=(0,s.useMemo)(()=>a?.user?.teamIds??[],[a?.user?.teamIds]);a?.user?.currentTeamId;let[x,u]=(0,s.useState)([]),[m,p]=(0,s.useState)(""),[h,g]=(0,s.useState)(!1),[y,f]=(0,s.useState)(!1),[b,j]=(0,s.useState)(null),v=d.length>0;if((0,s.useMemo)(()=>v?[...d].sort().join("|"):"",[v,d]),"loading"===i||!v)return null;async function N(e){let t=e.target.value;if(t&&t!==m){p(t),f(!0),j(null);try{document.cookie=`ctb_team=${encodeURIComponent(t)}; path=/; max-age=2592000; SameSite=Lax`;let e=await fetch("/api/session/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamId:t})});if(!e.ok){let t=await e.json().catch(()=>null);throw Error(t?.error||`Error ${e.status}`)}await o?.(),c.refresh()}catch(e){p(m),j(e?.message||"No se pudo cambiar de equipo.")}finally{f(!1)}}}let w=["flex flex-col gap-1 text-xs",e].filter(Boolean).join(" ");return 0===x.length?null:(0,r.jsxs)("div",{className:w,children:[r.jsx("label",{className:"text-[10px] font-semibold uppercase text-gray-500",children:t}),r.jsx("select",{value:m,onChange:N,disabled:h||y,className:"w-full rounded-md border px-2 py-1.5 text-sm disabled:opacity-60",children:x.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))}),b?r.jsx("span",{className:"text-[11px] text-red-600",children:b}):null]})}},48217:(e,t,a)=>{"use strict";a.d(t,{AA:()=>x,Om:()=>u,TL:()=>c,hV:()=>o,oD:()=>d});let r="ct_exercise_kinds",s="ct_rivals",l=["Rueda de pases","Circuito t\xe9cnico","SSG","MSG","LSG"];async function n(e,t,a=6e3){try{let r=e.startsWith("http")?e:`${e}`,s=new AbortController,l=setTimeout(()=>s.abort(),a),n=await fetch(r,{...t,signal:s.signal,cache:"no-store"});if(clearTimeout(l),!n.ok)return null;return await n.json()}catch{return null}}async function i(){let e=await n("/api/exercise-kinds");if(e?.data?.length){try{localStorage.setItem(r,JSON.stringify(e.data))}catch{}return e.data}return l}async function o(e){let t=(e||"").trim();if(!t)return i();let a=await n("/api/exercise-kinds",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(a?.data?.length){try{localStorage.setItem(r,JSON.stringify(a.data))}catch{}return a.data}let s=await i();s.includes(t)||s.push(t);try{localStorage.setItem(r,JSON.stringify(s))}catch{}return s}async function c(e){let t=Array.from(new Set((e||[]).map(e=>e.trim()).filter(Boolean))),a=await n("/api/exercise-kinds",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({names:t})}),s=a?.data?.length?a.data:t;try{localStorage.setItem(r,JSON.stringify(s))}catch{}return s}async function d(){let e=await n("/api/ct/rivales");if(e?.data){try{localStorage.setItem(s,JSON.stringify(e.data))}catch{}return e.data}try{let e=localStorage.getItem(s);if(e)return JSON.parse(e)}catch{}return[]}async function x(e){let t={id:e.id??null,name:e.name.trim(),logoUrl:e.logoUrl??null,coach:e.coach??null,baseSystem:e.baseSystem??null,nextMatchDate:e.nextMatchDate??null,nextMatchCompetition:e.nextMatchCompetition??null},a=e.id?`/api/ct/rivales/${encodeURIComponent(e.id)}`:"/api/ct/rivales",r=e.id?"PUT":"POST",l=await n(a,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(l?.data){let e=await d(),t=e.findIndex(e=>e.id===l.data.id);t>=0?e[t]=l.data:e.push(l.data);try{localStorage.setItem(s,JSON.stringify(e))}catch{}return l.data}let i=await d(),o=e.id??("undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():`id_${Date.now()}_${Math.random().toString(16).slice(2)}`),c={id:o,name:t.name,logoUrl:t.logoUrl,coach:t.coach??null,baseSystem:t.baseSystem??null,nextMatchDate:t.nextMatchDate??null,nextMatchCompetition:t.nextMatchCompetition??null},x=i.findIndex(e=>e.id===o);x>=0?i[x]=c:i.push(c);try{localStorage.setItem(s,JSON.stringify(i))}catch{}return c}async function u(e){let t=await n(`/api/ct/rivales/${encodeURIComponent(e)}`,{method:"DELETE"});if(t?.ok){let t=(await d()).filter(t=>t.id!==e);try{localStorage.setItem(s,JSON.stringify(t))}catch{}return{ok:!0}}let a=(await d()).filter(t=>t.id!==e);try{localStorage.setItem(s,JSON.stringify(a))}catch{}return{ok:!0}}},66382:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var r=a(68570);let s=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/layout.tsx`),{__esModule:l,$$typeof:n}=s;s.default;let i=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/layout.tsx#default`)},11855:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var r=a(68570);let s=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/rivales/gestionar/page.tsx`),{__esModule:l,$$typeof:n}=s;s.default;let i=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/rivales/gestionar/page.tsx#default`)},15495:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d,metadata:()=>c});var r=a(19510);a(5023);var s=a(68570);let l=(0,s.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx`),{__esModule:n,$$typeof:i}=l;l.default;let o=(0,s.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx#default`),c={title:"ctbrain",description:"App"};function d({children:e}){return r.jsx("html",{lang:"es",children:r.jsx("body",{children:r.jsx(o,{children:e})})})}},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,1159,9404],()=>a(64198));module.exports=r})();