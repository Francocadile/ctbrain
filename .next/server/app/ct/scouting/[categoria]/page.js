(()=>{var e={};e.id=8136,e.ids=[8136],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},96949:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),a(78463),a(66382),a(15495),a(35866);var r=a(23191),s=a(88716),l=a(37922),n=a.n(l),o=a(95231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);a.d(t,i);let c=["",{children:["ct",{children:["scouting",{children:["[categoria]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,78463)),"/Users/Fran/ctbrain-14/src/app/ct/scouting/[categoria]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,66382)),"/Users/Fran/ctbrain-14/src/app/ct/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,15495)),"/Users/Fran/ctbrain-14/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/Fran/ctbrain-14/src/app/ct/scouting/[categoria]/page.tsx"],u="/ct/scouting/[categoria]/page",p={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/ct/scouting/[categoria]/page",pathname:"/ct/scouting/[categoria]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},53789:(e,t,a)=>{Promise.resolve().then(a.bind(a,57343))},57343:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(10326),s=a(17577),l=a(90434),n=a(78109),o=a(35698);function i({params:e}){let t=e.categoria,[a,i]=(0,s.useState)([]),[c,d]=(0,s.useState)(null),[u,p]=(0,s.useState)([]),[x,m]=(0,s.useState)(!0),[g,h]=(0,s.useState)(""),[b,y]=(0,s.useState)({fullName:"",positions:"",club:"",agentPhone:"",playerPhone:"",video:""});async function f(){m(!0);try{let e=await (0,n.kb)();i(e);let a=e.find(e=>e.slug===t)??null;if(d(a),a){let e=await (0,n.M_)({categoriaId:a.id});p(e)}else p([])}finally{m(!1)}}let j=(0,s.useMemo)(()=>{let e=g.trim().toLowerCase();return e?u.filter(t=>t.fullName.toLowerCase().includes(e)||(t.club||"").toLowerCase().includes(e)):u},[g,u]);async function v(e){if(e.preventDefault(),!c)return;if(!b.fullName.trim())return alert("Nombre requerido");if(!b.agentPhone&&!b.playerPhone)return alert("Cargar contacto (agente o jugador)");let t=b.positions.split(/[,\s/]+/).filter(Boolean),a=b.video.trim();await (0,n.Jp)({fullName:b.fullName.trim(),club:b.club.trim()||null,positions:t,categoriaId:c.id,agentPhone:b.agentPhone.trim()||null,playerPhone:b.playerPhone.trim()||null,videos:a?[a]:[],estado:"ACTIVO"}),y({fullName:"",positions:"",club:"",agentPhone:"",playerPhone:"",video:""}),await f()}async function N(e){confirm(`\xbfEliminar a "${e.fullName}"?`)&&(await (0,n.WQ)(e.id),await f())}return(0,r.jsxs)(o.Z,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-lg md:text-xl font-bold",children:c?`Scouting — ${c.nombre}`:"Scouting"}),r.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"Lista simple: nombre, posici\xf3n, club, contacto, video, estado."})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(l.default,{href:"/ct/scouting",className:"px-3 py-1.5 rounded-xl border hover:bg-gray-50 text-xs",children:"← Volver"}),r.jsx("button",{onClick:function(){let e=new Blob([["Nombre,Posici\xf3n,Club,Contacto,Video,Estado,Actualizado",...j.map(e=>{let t=(e.positions||[]).join("/"),a=e.agentPhone||e.playerPhone||e.agentEmail||e.playerEmail||"",r=(e.videos||[])[0]||"",s=e.updatedAt?new Date(e.updatedAt).toLocaleDateString():"";return[e.fullName,t,e.club||"",a,r,e.estado,s].map(e=>`"${(e??"").toString().replace(/"/g,'""')}"`).join(",")})].join("\n")],{type:"text/csv;charset=utf-8"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`scouting_${c?.slug||"lista"}.csv`,a.click(),URL.revokeObjectURL(t)},className:"px-3 py-1.5 rounded-xl border hover:bg-gray-50 text-xs",children:"Exportar CSV"})]})]}),c&&(0,r.jsxs)("form",{onSubmit:v,className:"grid md:grid-cols-6 gap-2 rounded-2xl border bg-white p-3 mb-4",children:[r.jsx("input",{className:"rounded-md border px-2 py-1.5 text-sm",placeholder:"Nombre y apellido",value:b.fullName,onChange:e=>y(t=>({...t,fullName:e.target.value}))}),r.jsx("input",{className:"rounded-md border px-2 py-1.5 text-sm",placeholder:"Posici\xf3n (ej: DEF/VOL)",value:b.positions,onChange:e=>y(t=>({...t,positions:e.target.value}))}),r.jsx("input",{className:"rounded-md border px-2 py-1.5 text-sm",placeholder:"Club",value:b.club,onChange:e=>y(t=>({...t,club:e.target.value}))}),r.jsx("input",{className:"rounded-md border px-2 py-1.5 text-sm",placeholder:"Tel. agente",value:b.agentPhone,onChange:e=>y(t=>({...t,agentPhone:e.target.value}))}),r.jsx("input",{className:"rounded-md border px-2 py-1.5 text-sm",placeholder:"Tel. jugador",value:b.playerPhone,onChange:e=>y(t=>({...t,playerPhone:e.target.value}))}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("input",{className:"flex-1 rounded-md border px-2 py-1.5 text-sm",placeholder:"Video (URL)",value:b.video,onChange:e=>y(t=>({...t,video:e.target.value}))}),r.jsx("button",{className:"px-3 py-1.5 rounded-xl text-xs bg-black text-white hover:opacity-90",children:"Agregar"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("input",{className:"w-full md:w-80 rounded-md border px-2 py-1.5 text-sm",placeholder:"Buscar…",value:g,onChange:e=>h(e.target.value)}),(0,r.jsxs)("span",{className:"text-[12px] text-gray-500",children:[j.length," resultado(s)"]})]}),r.jsx("div",{className:"rounded-2xl border bg-white overflow-hidden",children:x?r.jsx("div",{className:"p-4 text-gray-500",children:"Cargando…"}):0===j.length?r.jsx("div",{className:"p-4 text-gray-500 italic",children:"Sin resultados"}):(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"border-b bg-gray-50",children:[r.jsx("th",{className:"text-left px-3 py-2",children:"Nombre"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Posici\xf3n"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Club"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Contacto"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Video"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Estado"}),r.jsx("th",{className:"text-right px-3 py-2",children:"Acciones"})]})}),r.jsx("tbody",{children:j.map(e=>(0,r.jsxs)("tr",{className:"border-b last:border-0",children:[r.jsx("td",{className:"px-3 py-2 font-medium",children:e.fullName}),r.jsx("td",{className:"px-3 py-2",children:(e.positions||[]).join("/")}),r.jsx("td",{className:"px-3 py-2",children:e.club||"—"}),r.jsx("td",{className:"px-3 py-2",children:e.agentPhone||e.playerPhone||e.agentEmail||e.playerEmail||"—"}),r.jsx("td",{className:"px-3 py-2",children:e.videos?.[0]?r.jsx("a",{className:"underline text-emerald-700 break-all",href:e.videos[0],target:"_blank",children:"Ver"}):"—"}),r.jsx("td",{className:"px-3 py-2",children:e.estado}),r.jsx("td",{className:"px-3 py-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(l.default,{href:`/ct/scouting/player/${e.id}`,className:"h-7 px-2 rounded border text-[11px] hover:bg-gray-50",children:"Ficha"}),r.jsx("button",{className:"h-7 px-2 rounded border text-[11px] hover:bg-gray-50",onClick:()=>N(e),children:"Borrar"})]})})]},e.id))})]})})]})}},78463:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>o});var r=a(68570);let s=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/scouting/[categoria]/page.tsx`),{__esModule:l,$$typeof:n}=s;s.default;let o=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/scouting/[categoria]/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,1159,9404,3481],()=>a(96949));module.exports=r})();