(()=>{var e={};e.id=5044,e.ids=[5044],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},85526:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d}),t(53330),t(66382),t(15495),t(35866);var r=t(23191),a=t(88716),l=t(37922),n=t.n(l),i=t(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let d=["",{children:["ct",{children:["alerts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,53330)),"/Users/Fran/ctbrain-14/src/app/ct/alerts/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,66382)),"/Users/Fran/ctbrain-14/src/app/ct/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,15495)),"/Users/Fran/ctbrain-14/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/Fran/ctbrain-14/src/app/ct/alerts/page.tsx"],x="/ct/alerts/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/ct/alerts/page",pathname:"/ct/alerts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},54630:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},31702:(e,s,t)=>{Promise.resolve().then(t.bind(t,74289))},97992:(e,s,t)=>{Promise.resolve().then(t.bind(t,94340))},14497:(e,s,t)=>{Promise.resolve().then(t.bind(t,42126))},90434:(e,s,t)=>{"use strict";t.d(s,{default:()=>a.a});var r=t(79404),a=t.n(r)},35047:(e,s,t)=>{"use strict";var r=t(77389);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},74289:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(10326),a=t(17577);function l(){let[e,s]=(0,a.useState)(new Date().toISOString().slice(0,10)),[t,l]=(0,a.useState)(!0),[n,i]=(0,a.useState)([]);async function c(){l(!0);let s=await fetch(`/api/alerts/daily?date=${e}`,{cache:"no-store"}),t=await s.json();i(Array.isArray(t.items)?t.items:[]),l(!1)}return(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[(0,r.jsxs)("header",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-lg font-bold",children:"Alertas del d\xeda"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Priorizadas por severidad (reglas: SDW + baseline 21d + overrides + sRPE ayer)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"date",className:"rounded-md border px-2 py-1.5 text-sm",value:e,onChange:e=>s(e.target.value)}),r.jsx("button",{onClick:c,className:"rounded-lg border px-3 py-1.5 text-sm hover:bg-gray-50",children:"Recargar"})]})]}),t?r.jsx("div",{className:"text-gray-500",children:"Cargando…"}):0===n.length?(0,r.jsxs)("div",{className:"text-gray-500 italic",children:["Sin alertas para ",e,"."]}):(0,r.jsxs)("div",{className:"rounded-2xl border bg-white overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 px-3 py-2 text-[12px] font-semibold uppercase",children:"Alertas"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"border-b bg-gray-50",children:[r.jsx("th",{className:"text-left px-3 py-2",children:"Jugador"}),r.jsx("th",{className:"text-left px-3 py-2",children:"SDW"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Baseline"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Z"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Color"}),r.jsx("th",{className:"text-left px-3 py-2",children:"sRPE ayer"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Severidad"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Motivos"}),r.jsx("th",{className:"text-left px-3 py-2",children:"Sugerencia"})]})}),r.jsx("tbody",{children:n.map(e=>(0,r.jsxs)("tr",{className:"border-b last:border-0 align-top",children:[r.jsx("td",{className:"px-3 py-2 font-medium",children:e.name}),r.jsx("td",{className:"px-3 py-2",children:e.sdw.toFixed(2)}),r.jsx("td",{className:"px-3 py-2",children:null!=e.baselineMean?e.baselineMean.toFixed(2):"—"}),r.jsx("td",{className:"px-3 py-2",children:null!=e.z?e.z.toFixed(2):"—"}),r.jsx("td",{className:"px-3 py-2",children:r.jsx("span",{className:`inline-flex rounded-md border px-2 py-0.5 text-xs font-semibold ${{green:"bg-emerald-50 text-emerald-700 border-emerald-200",yellow:"bg-amber-50 text-amber-700 border-amber-200",red:"bg-red-50 text-red-700 border-red-200"}[e.color]}`,children:e.color.toUpperCase()})}),r.jsx("td",{className:"px-3 py-2",children:e.srpePrev?`${e.srpePrev} AU`:"—"}),r.jsx("td",{className:"px-3 py-2",children:r.jsx("span",{className:`inline-flex rounded-full px-2 py-0.5 text-[11px] font-semibold ${{CRITICAL:"bg-red-600 text-white",WARN:"bg-amber-500 text-white",OK:"bg-gray-300 text-gray-800"}[e.severity]}`,children:e.severity})}),r.jsx("td",{className:"px-3 py-2",children:r.jsx("ul",{className:"list-disc pl-5 text-gray-700",children:e.reasons.map((e,s)=>r.jsx("li",{children:e},s))})}),r.jsx("td",{className:"px-3 py-2 text-gray-700",children:e.suggestions[0]||"—"})]},e.userId))})]})})]})]})}},94340:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(10326);t(17577);var a=t(90434),l=t(35047),n=t(77109),i=t(82152);function c({href:e,children:s,active:t,soon:l}){let n="block rounded-md px-2 py-1.5 text-sm transition";return e?r.jsx(a.default,{href:e,className:`${n} ${t?"bg-black text-white":"hover:bg-gray-100"}`,children:s}):(0,r.jsxs)("span",{className:`${n} text-gray-400 cursor-not-allowed`,children:[s," ",l&&r.jsx("small",{className:"ml-1",children:"PRONTO"})]})}function d({children:e}){let s=(0,l.usePathname)(),t=e=>s===e||s?.startsWith(e+"/");return(0,r.jsxs)("div",{className:"min-h-screen flex bg-gray-50",children:[(0,r.jsxs)("aside",{className:"w-64 shrink-0 border-r bg-white p-3 space-y-3",children:[r.jsx(i.default,{className:"w-full"}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"INICIO"}),r.jsx("ul",{className:"space-y-0.5 mb-2",children:r.jsx("li",{children:r.jsx(c,{href:"/ct",active:"/ct"===s,children:"Dashboard / Inicio r\xe1pido"})})}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"MONITOREO"}),(0,r.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[r.jsx("li",{children:r.jsx(c,{href:"/ct/metrics/wellness",active:t("/ct/metrics/wellness"),children:"Wellness"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/metrics/rpe",active:t("/ct/metrics/rpe"),children:"Rpe"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/injuries",active:t("/ct/injuries"),children:"Lesionados"})})]}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"PLANIFICACI\xd3N"}),(0,r.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[r.jsx("li",{children:r.jsx(c,{href:"/ct/plan-semanal",active:t("/ct/plan-semanal"),children:"Plan semanal (Editor)"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/sessions",active:t("/ct/sessions"),children:"Sesiones"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/exercises",active:t("/ct/exercises"),children:"Ejercicios"})})]}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"T\xc9CNICA"}),(0,r.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[r.jsx("li",{children:r.jsx(c,{href:"/ct/rivales",active:t("/ct/rivales"),children:"Rivales / Plan de partido"})}),r.jsx("li",{children:r.jsx(c,{href:"/ct/scouting",active:t("/ct/scouting"),children:"Scouting"})})]}),r.jsx("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"SALIR"}),r.jsx("ul",{className:"space-y-0.5",children:r.jsx("li",{children:r.jsx("button",{"aria-label":"Cerrar sesi\xf3n",onClick:()=>(0,n.signOut)({callbackUrl:"/login"}),className:"block w-full text-left rounded-md px-2 py-1.5 text-sm transition hover:bg-gray-100",children:"Cerrar sesi\xf3n"})})})]}),r.jsx("main",{className:"flex-1 p-3 md:p-4",children:e})]})}},42126:(e,s,t)=>{"use strict";t.d(s,{default:()=>l});var r=t(10326),a=t(77109);function l({children:e}){return r.jsx(a.SessionProvider,{children:e})}},82152:(e,s,t)=>{"use strict";t.d(s,{default:()=>i});var r=t(10326),a=t(17577),l=t(77109),n=t(35047);function i({className:e,label:s="Equipo"}){let{data:t,status:i,update:c}=(0,l.useSession)(),d=(0,n.useRouter)(),o=(0,a.useMemo)(()=>t?.user?.teamIds??[],[t?.user?.teamIds]);t?.user?.currentTeamId;let[x,p]=(0,a.useState)([]),[u,m]=(0,a.useState)(""),[h,j]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),v=o.length>0;if((0,a.useMemo)(()=>v?[...o].sort().join("|"):"",[v,o]),"loading"===i||!v)return null;async function N(e){let s=e.target.value;if(s&&s!==u){m(s),b(!0),f(null);try{document.cookie=`ctb_team=${encodeURIComponent(s)}; path=/; max-age=2592000; SameSite=Lax`;let e=await fetch("/api/session/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamId:s})});if(!e.ok){let s=await e.json().catch(()=>null);throw Error(s?.error||`Error ${e.status}`)}await c?.(),d.refresh()}catch(e){m(u),f(e?.message||"No se pudo cambiar de equipo.")}finally{b(!1)}}}let P=["flex flex-col gap-1 text-xs",e].filter(Boolean).join(" ");return 0===x.length?null:(0,r.jsxs)("div",{className:P,children:[r.jsx("label",{className:"text-[10px] font-semibold uppercase text-gray-500",children:s}),r.jsx("select",{value:u,onChange:N,disabled:h||y,className:"w-full rounded-md border px-2 py-1.5 text-sm disabled:opacity-60",children:x.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))}),g?r.jsx("span",{className:"text-[11px] text-red-600",children:g}):null]})}},53330:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var r=t(68570);let a=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/alerts/page.tsx`),{__esModule:l,$$typeof:n}=a;a.default;let i=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/alerts/page.tsx#default`)},66382:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var r=t(68570);let a=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/layout.tsx`),{__esModule:l,$$typeof:n}=a;a.default;let i=(0,r.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/ct/layout.tsx#default`)},15495:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o,metadata:()=>d});var r=t(19510);t(5023);var a=t(68570);let l=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx`),{__esModule:n,$$typeof:i}=l;l.default;let c=(0,a.createProxy)(String.raw`/Users/Fran/ctbrain-14/src/app/providers.tsx#default`),d={title:"ctbrain",description:"App"};function o({children:e}){return r.jsx("html",{lang:"es",children:r.jsx("body",{children:r.jsx(c,{children:e})})})}},5023:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[8948,1159,9404],()=>t(85526));module.exports=r})();