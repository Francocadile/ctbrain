(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4991],{5209:function(l,e,n){Promise.resolve().then(n.bind(n,1274))},1274:function(l,e,n){"use strict";n.r(e),n.d(e,{default:function(){return r},dynamic:function(){return u}});var t=n(7437),o=n(2265),i=n(6463),s=n(3010),a=n(5960);let u="force-dynamic";function r(){return(0,t.jsx)(o.Suspense,{fallback:(0,t.jsx)("main",{className:"min-h-[70vh] px-6 py-8",children:(0,t.jsx)("div",{className:"rounded-xl border bg-white p-5 text-gray-500",children:"Cargando…"})}),children:(0,t.jsx)(d,{})})}function d(){let l=(0,i.useRouter)(),e=(0,i.useSearchParams)(),n=o.useMemo(()=>{let l=(null==e?void 0:e.get("date"))||void 0;return l&&/^\d{4}-\d{2}-\d{2}$/.test(l)?l:(0,a.y)()},[e]),u=(null==e?void 0:e.get("from"))||null,[r,d]=o.useState(null),[c,m]=o.useState(!!u),[v,p]=o.useState(null);return o.useEffect(()=>{let l=!0;return async function(){if(u){m(!0),p(null);try{var e,t,o,i,s,a,r,c,v,h,x,f,y,g,j,b,C,S,N,w,k,O,D,E;let m=await fetch("/api/med/clinical/".concat(encodeURIComponent(u)),{cache:"no-store"});if(!m.ok)throw Error("HTTP ".concat(m.status));let p=await m.json();if(!l)return;let M={userId:p.userId,status:p.status,leaveStage:null!==(e=p.leaveStage)&&void 0!==e?e:null,leaveKind:null!==(t=p.leaveKind)&&void 0!==t?t:null,diagnosis:null!==(o=p.diagnosis)&&void 0!==o?o:null,bodyPart:null!==(i=p.bodyPart)&&void 0!==i?i:null,laterality:null!==(s=p.laterality)&&void 0!==s?s:null,mechanism:null!==(a=p.mechanism)&&void 0!==a?a:null,severity:null!==(r=p.severity)&&void 0!==r?r:null,illSystem:null!==(c=p.illSystem)&&void 0!==c?c:null,illSymptoms:null!==(v=p.illSymptoms)&&void 0!==v?v:null,illContagious:null!==(h=p.illContagious)&&void 0!==h?h:null,illIsolationDays:null!==(x=p.illIsolationDays)&&void 0!==x?x:null,illAptitude:null!==(f=p.illAptitude)&&void 0!==f?f:null,feverMax:null!==(y=p.feverMax)&&void 0!==y?y:null,startDate:n,expectedReturn:null,expectedReturnManual:!1,capMinutes:null!==(g=p.capMinutes)&&void 0!==g?g:null,noSprint:null!==(j=p.noSprint)&&void 0!==j&&j,noChangeOfDirection:null!==(b=p.noChangeOfDirection)&&void 0!==b&&b,gymOnly:null!==(C=p.gymOnly)&&void 0!==C&&C,noContact:null!==(S=p.noContact)&&void 0!==S&&S,notes:null!==(N=p.notes)&&void 0!==N?N:null,medSignature:null!==(w=p.medSignature)&&void 0!==w?w:null,protocolObjectives:null!==(k=p.protocolObjectives)&&void 0!==k?k:null,protocolTasks:null!==(O=p.protocolTasks)&&void 0!==O?O:null,protocolControls:null!==(D=p.protocolControls)&&void 0!==D?D:null,protocolCriteria:null!==(E=p.protocolCriteria)&&void 0!==E?E:null};d(M)}catch(e){if(!l)return;p((null==e?void 0:e.message)||"No se pudo prellenar desde el episodio seleccionado.")}finally{l&&m(!1)}}}(),()=>{l=!1}},[u,n]),(0,t.jsxs)("main",{className:"min-h-[70vh] px-6 py-8",children:[(0,t.jsxs)("header",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Nuevo episodio cl\xednico"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Carg\xe1 el parte del d\xeda. El ETR se calcula autom\xe1ticamente desde “D\xedas estimados” (pod\xe9s editarlo)."}),u?(0,t.jsxs)("p",{className:"mt-2 text-xs text-gray-500",children:["Prefill desde parte ",(0,t.jsx)("code",{children:u})]}):null]}),c?(0,t.jsx)("section",{className:"rounded-xl border bg-white p-5 shadow-sm text-gray-500",children:"Cargando prefill…"}):v?(0,t.jsx)("section",{className:"rounded-xl border bg-white p-5 shadow-sm text-red-600",children:v}):(0,t.jsx)("section",{className:"rounded-xl border bg-white p-5 shadow-sm",children:(0,t.jsx)(s.Z,{initial:null!=r?r:void 0,defaultDate:n,onCancel:()=>l.push("/med/injuries"),onSaved:()=>l.push("/med/injuries")})})]})}}},function(l){l.O(0,[7635,2971,7023,1744],function(){return l(l.s=5209)}),_N_E=l.O()}]);