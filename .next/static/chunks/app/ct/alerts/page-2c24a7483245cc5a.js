(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5044],{5921:function(e,s,t){Promise.resolve().then(t.bind(t,5025))},5025:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var a=t(7437),r=t(2265);function l(){let[e,s]=(0,r.useState)(new Date().toISOString().slice(0,10)),[t,l]=(0,r.useState)(!0),[d,n]=(0,r.useState)([]);async function c(){l(!0);let s=await fetch("/api/alerts/daily?date=".concat(e),{cache:"no-store"}),t=await s.json();n(Array.isArray(t.items)?t.items:[]),l(!1)}return(0,r.useEffect)(()=>{c()},[e]),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("header",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-bold",children:"Alertas del d\xeda"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Priorizadas por severidad (reglas: SDW + baseline 21d + overrides + sRPE ayer)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"date",className:"rounded-md border px-2 py-1.5 text-sm",value:e,onChange:e=>s(e.target.value)}),(0,a.jsx)("button",{onClick:c,className:"rounded-lg border px-3 py-1.5 text-sm hover:bg-gray-50",children:"Recargar"})]})]}),t?(0,a.jsx)("div",{className:"text-gray-500",children:"Cargando…"}):0===d.length?(0,a.jsxs)("div",{className:"text-gray-500 italic",children:["Sin alertas para ",e,"."]}):(0,a.jsxs)("div",{className:"rounded-2xl border bg-white overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gray-50 px-3 py-2 text-[12px] font-semibold uppercase",children:"Alertas"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b bg-gray-50",children:[(0,a.jsx)("th",{className:"text-left px-3 py-2",children:"Jugador"}),(0,a.jsx)("th",{className:"text-left px-3 py-2",children:"SDW"}),(0,a.jsx)("th",{className:"text-left px-3 py-2",children:"Baseline"}),(0,a.jsx)("th",{className:"text-left px-3 py-2",children:"Z"}),(0,a.jsx)("th",{className:"text-left px-3 py-2",children:"Color"}),(0,a.jsx)("th",{className:"text-left px-3 py-2",children:"sRPE ayer"}),(0,a.jsx)("th",{className:"text-left px-3 py-2",children:"Severidad"}),(0,a.jsx)("th",{className:"text-left px-3 py-2",children:"Motivos"}),(0,a.jsx)("th",{className:"text-left px-3 py-2",children:"Sugerencia"})]})}),(0,a.jsx)("tbody",{children:d.map(e=>(0,a.jsxs)("tr",{className:"border-b last:border-0 align-top",children:[(0,a.jsx)("td",{className:"px-3 py-2 font-medium",children:e.name}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.sdw.toFixed(2)}),(0,a.jsx)("td",{className:"px-3 py-2",children:null!=e.baselineMean?e.baselineMean.toFixed(2):"—"}),(0,a.jsx)("td",{className:"px-3 py-2",children:null!=e.z?e.z.toFixed(2):"—"}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsx)("span",{className:"inline-flex rounded-md border px-2 py-0.5 text-xs font-semibold ".concat({green:"bg-emerald-50 text-emerald-700 border-emerald-200",yellow:"bg-amber-50 text-amber-700 border-amber-200",red:"bg-red-50 text-red-700 border-red-200"}[e.color]),children:e.color.toUpperCase()})}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.srpePrev?"".concat(e.srpePrev," AU"):"—"}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsx)("span",{className:"inline-flex rounded-full px-2 py-0.5 text-[11px] font-semibold ".concat({CRITICAL:"bg-red-600 text-white",WARN:"bg-amber-500 text-white",OK:"bg-gray-300 text-gray-800"}[e.severity]),children:e.severity})}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsx)("ul",{className:"list-disc pl-5 text-gray-700",children:e.reasons.map((e,s)=>(0,a.jsx)("li",{children:e},s))})}),(0,a.jsx)("td",{className:"px-3 py-2 text-gray-700",children:e.suggestions[0]||"—"})]},e.userId))})]})})]})]})}}},function(e){e.O(0,[2971,7023,1744],function(){return e(e.s=5921)}),_N_E=e.O()}]);