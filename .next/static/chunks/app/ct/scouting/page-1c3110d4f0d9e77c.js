(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9032],{3555:function(t,a,e){Promise.resolve().then(e.bind(e,9698))},7138:function(t,a,e){"use strict";e.d(a,{default:function(){return i.a}});var n=e(231),i=e.n(n)},9698:function(t,a,e){"use strict";e.r(a),e.d(a,{default:function(){return c}});var n=e(7437),i=e(7138),r=e(2265),o=e(4665),l=e(6827);function c(){let[t,a]=(0,r.useState)(!0),[e,c]=(0,r.useState)([]);async function s(){a(!0);try{let t=await (0,o.kb)();c(t.filter(t=>t.activa).sort((t,a)=>t.orden-a.orden))}finally{a(!1)}}return(0,r.useEffect)(()=>{s()},[]),(0,n.jsxs)(l.Z,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-lg md:text-xl font-bold",children:"Scouting"}),(0,n.jsx)("p",{className:"text-xs md:text-sm text-gray-500",children:"Eleg\xed una categor\xeda para ver la lista de jugadores."})]}),(0,n.jsx)(i.default,{href:"/ct/scouting/config",className:"px-3 py-1.5 rounded-xl border hover:bg-gray-50 text-xs",children:"Gestionar categor\xedas"})]}),t?(0,n.jsx)("div",{className:"p-4 text-gray-500",children:"Cargandoâ€¦"}):0===e.length?(0,n.jsxs)("div",{className:"p-8 text-gray-500 italic border rounded-2xl bg-white",children:["No hay categor\xedas activas. Crealas desde ",(0,n.jsx)(i.default,{href:"/ct/scouting/config",className:"underline",children:"Config"}),"."]}):(0,n.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:e.map(t=>(0,n.jsx)(i.default,{href:"/ct/scouting/".concat(t.slug),className:"flex items-center justify-center rounded-lg border bg-white p-4 text-center hover:shadow-md transition",children:(0,n.jsx)("span",{className:"font-medium",children:t.nombre})},t.id))})]})}},6827:function(t,a,e){"use strict";e.d(a,{Z:function(){return i}});var n=e(7437);function i(t){let{children:a}=t;return(0,n.jsx)("div",{className:"mx-auto w-full max-w-6xl px-4 sm:px-6 lg:px-8",children:a})}},4665:function(t,a,e){"use strict";e.d(a,{Jp:function(){return g},M_:function(){return d},RC:function(){return u},WQ:function(){return f},k4:function(){return l},kb:function(){return o},uu:function(){return s},yr:function(){return c}});let n="ct_scout_categories",i="ct_scout_players_";async function r(t,a){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e3;try{let n=window.location.origin,i=t.startsWith("http")?t:"".concat(n).concat(t),r=new AbortController,o=setTimeout(()=>r.abort(),e),l=await fetch(i,{...a,signal:r.signal,cache:"no-store"});if(clearTimeout(o),!l.ok)return null;return await l.json()}catch(t){return null}}async function o(){let t=await r("/api/ct/scouting/categories");if(null==t?void 0:t.data){try{localStorage.setItem(n,JSON.stringify(t.data))}catch(t){}return t.data}try{let t=localStorage.getItem(n);if(t)return JSON.parse(t)}catch(t){}return[]}async function l(t){let a=await r("/api/ct/scouting/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:t})});if(null==a?void 0:a.data){let t=await o();t.push(a.data);try{localStorage.setItem(n,JSON.stringify(t))}catch(t){}return a.data}let e=t.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9\-]/g,""),i={id:"local_".concat(Date.now()),nombre:t,slug:e,orden:Date.now(),activa:!0,color:void 0},l=await o();l.push(i);try{localStorage.setItem(n,JSON.stringify(l))}catch(t){}return i}async function c(t,a){let e=await r("/api/ct/scouting/categories/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(null==e?void 0:e.data){let a=await o(),i=a.findIndex(a=>a.id===t);i>=0&&(a[i]=e.data);try{localStorage.setItem(n,JSON.stringify(a))}catch(t){}return e.data}let i=await o(),l=i.findIndex(a=>a.id===t);l>=0&&(i[l]={...i[l],...a});try{localStorage.setItem(n,JSON.stringify(i))}catch(t){}return i[l]}async function s(t){try{let a=await fetch("/api/ct/scouting/categories/".concat(t),{method:"DELETE",cache:"no-store"}),e=null;try{e=await a.json()}catch(t){e=null}if(!a.ok)return{error:(null==e?void 0:e.error)||"HTTP ".concat(a.status)};let i=(await o()).filter(a=>a.id!==t);try{localStorage.setItem(n,JSON.stringify(i))}catch(t){}return{ok:!0}}catch(t){return{error:(null==t?void 0:t.message)||"Error de red al borrar categor\xeda"}}}async function d(t){let a=new URLSearchParams;(null==t?void 0:t.categoriaId)&&a.set("categoriaId",t.categoriaId),(null==t?void 0:t.q)&&a.set("q",t.q),(null==t?void 0:t.estado)&&a.set("estado",t.estado);let e=await r("/api/ct/scouting/players?".concat(a.toString()));if(null==e?void 0:e.data){if(null==t?void 0:t.categoriaId)try{localStorage.setItem(i+t.categoriaId,JSON.stringify(e.data))}catch(t){}return e.data}if(null==t?void 0:t.categoriaId)try{let a=localStorage.getItem(i+t.categoriaId);if(a)return JSON.parse(a)}catch(t){}return[]}async function u(t){var a;let e=await r("/api/ct/scouting/players/".concat(t));return null!==(a=null==e?void 0:e.data)&&void 0!==a?a:null}async function g(t){var a,e,n,o,l,c,s,u,g,f,h,y,m,p,v;let x={...t},w=t.id?"/api/ct/scouting/players/".concat(t.id):"/api/ct/scouting/players",I=t.id?"PUT":"POST",N=await r(w,{method:I,headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(null==N?void 0:N.data){if(N.data.categoriaId){let t=await d({categoriaId:N.data.categoriaId}),a=t.findIndex(t=>t.id===N.data.id);a>=0?t[a]=N.data:t.push(N.data);try{localStorage.setItem(i+N.data.categoriaId,JSON.stringify(t))}catch(t){}}return N.data}let S={id:null!==(a=t.id)&&void 0!==a?a:"local_".concat(Date.now()),fullName:t.fullName,positions:null!==(e=t.positions)&&void 0!==e?e:[],club:null!==(n=t.club)&&void 0!==n?n:null,estado:null!==(o=t.estado)&&void 0!==o?o:"ACTIVO",categoriaId:null!==(l=t.categoriaId)&&void 0!==l?l:null,agentName:null!==(c=t.agentName)&&void 0!==c?c:null,agentPhone:null!==(s=t.agentPhone)&&void 0!==s?s:null,agentEmail:null!==(u=t.agentEmail)&&void 0!==u?u:null,playerPhone:null!==(g=t.playerPhone)&&void 0!==g?g:null,playerEmail:null!==(f=t.playerEmail)&&void 0!==f?f:null,instagram:null!==(h=t.instagram)&&void 0!==h?h:null,videos:null!==(y=t.videos)&&void 0!==y?y:[],notes:null!==(m=t.notes)&&void 0!==m?m:null,rating:null!==(p=t.rating)&&void 0!==p?p:null,tags:null!==(v=t.tags)&&void 0!==v?v:[]};if(S.categoriaId){let t=await d({categoriaId:S.categoriaId}),a=t.findIndex(t=>t.id===S.id);a>=0?t[a]=S:t.push(S);try{localStorage.setItem(i+S.categoriaId,JSON.stringify(t))}catch(t){}}return S}async function f(t){return await r("/api/ct/scouting/players/".concat(t),{method:"DELETE"}),{ok:!0}}}},function(t){t.O(0,[231,2971,7023,1744],function(){return t(t.s=3555)}),_N_E=t.O()}]);