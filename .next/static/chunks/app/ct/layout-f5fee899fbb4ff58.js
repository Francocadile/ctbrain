(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6392],{5265:function(e,t,s){Promise.resolve().then(s.bind(s,7641))},7138:function(e,t,s){"use strict";s.d(t,{default:function(){return l.a}});var n=s(231),l=s.n(n)},6463:function(e,t,s){"use strict";var n=s(1169);s.o(n,"useParams")&&s.d(t,{useParams:function(){return n.useParams}}),s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},7641:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var n=s(7437);s(2265);var l=s(7138),i=s(6463),a=s(998),r=s(8516);function c(e){let{href:t,children:s,active:i,soon:a}=e,r="block rounded-md px-2 py-1.5 text-sm transition";return t?(0,n.jsx)(l.default,{href:t,className:"".concat(r," ").concat(i?"bg-black text-white":"hover:bg-gray-100"),children:s}):(0,n.jsxs)("span",{className:"".concat(r," text-gray-400 cursor-not-allowed"),children:[s," ",a&&(0,n.jsx)("small",{className:"ml-1",children:"PRONTO"})]})}function o(e){let{children:t}=e,s=(0,i.usePathname)(),l=e=>s===e||(null==s?void 0:s.startsWith(e+"/"));return(0,n.jsxs)("div",{className:"min-h-screen flex bg-gray-50",children:[(0,n.jsxs)("aside",{className:"w-64 shrink-0 border-r bg-white p-3 space-y-3",children:[(0,n.jsx)(r.default,{className:"w-full"}),(0,n.jsx)("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"INICIO"}),(0,n.jsx)("ul",{className:"space-y-0.5 mb-2",children:(0,n.jsx)("li",{children:(0,n.jsx)(c,{href:"/ct",active:"/ct"===s,children:"Dashboard / Inicio r\xe1pido"})})}),(0,n.jsx)("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"MONITOREO"}),(0,n.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[(0,n.jsx)("li",{children:(0,n.jsx)(c,{href:"/ct/metrics/wellness",active:l("/ct/metrics/wellness"),children:"Wellness"})}),(0,n.jsx)("li",{children:(0,n.jsx)(c,{href:"/ct/metrics/rpe",active:l("/ct/metrics/rpe"),children:"Rpe"})}),(0,n.jsx)("li",{children:(0,n.jsx)(c,{href:"/ct/injuries",active:l("/ct/injuries"),children:"Lesionados"})})]}),(0,n.jsx)("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"PLANIFICACI\xd3N"}),(0,n.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[(0,n.jsx)("li",{children:(0,n.jsx)(c,{href:"/ct/plan-semanal",active:l("/ct/plan-semanal"),children:"Plan semanal (Editor)"})}),(0,n.jsx)("li",{children:(0,n.jsx)(c,{href:"/ct/sessions",active:l("/ct/sessions"),children:"Sesiones"})}),(0,n.jsx)("li",{children:(0,n.jsx)(c,{href:"/ct/exercises",active:l("/ct/exercises"),children:"Ejercicios"})})]}),(0,n.jsx)("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"T\xc9CNICA"}),(0,n.jsxs)("ul",{className:"space-y-0.5 mb-2",children:[(0,n.jsx)("li",{children:(0,n.jsx)(c,{href:"/ct/rivales",active:l("/ct/rivales"),children:"Rivales / Plan de partido"})}),(0,n.jsx)("li",{children:(0,n.jsx)(c,{href:"/ct/scouting",active:l("/ct/scouting"),children:"Scouting"})})]}),(0,n.jsx)("div",{className:"px-2 py-1 text-[10px] font-semibold text-gray-500",children:"SALIR"}),(0,n.jsx)("ul",{className:"space-y-0.5",children:(0,n.jsx)("li",{children:(0,n.jsx)("button",{"aria-label":"Cerrar sesi\xf3n",onClick:()=>(0,a.signOut)({callbackUrl:"/login"}),className:"block w-full text-left rounded-md px-2 py-1.5 text-sm transition hover:bg-gray-100",children:"Cerrar sesi\xf3n"})})})]}),(0,n.jsx)("main",{className:"flex-1 p-3 md:p-4",children:t})]})}},8516:function(e,t,s){"use strict";s.d(t,{default:function(){return r}});var n=s(7437),l=s(2265),i=s(998),a=s(6463);function r(e){var t,s,r;let{className:c,label:o="Equipo"}=e,{data:d,status:u,update:m}=(0,i.useSession)(),h=(0,a.useRouter)(),x=(0,l.useMemo)(()=>{var e,t;return null!==(t=null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.teamIds)&&void 0!==t?t:[]},[null==d?void 0:null===(t=d.user)||void 0===t?void 0:t.teamIds]),f=null!==(r=null==d?void 0:null===(s=d.user)||void 0===s?void 0:s.currentTeamId)&&void 0!==r?r:null,[p,v]=(0,l.useState)([]),[j,y]=(0,l.useState)(""),[g,N]=(0,l.useState)(!1),[b,S]=(0,l.useState)(!1),[w,I]=(0,l.useState)(null),P=x.length>0,k=(0,l.useMemo)(()=>P?[...x].sort().join("|"):"",[P,x]);if((0,l.useEffect)(()=>{if(!P){v([]),y("");return}let e=!1;return N(!0),I(null),fetch("/api/session/team",{cache:"no-store"}).then(async e=>{if(!e.ok){let t=await e.json().catch(()=>null);throw Error((null==t?void 0:t.error)||"Error ".concat(e.status))}return e.json()}).then(t=>{var s,n,l;if(e)return;let i=Array.isArray(null==t?void 0:t.teams)?t.teams.map(e=>{var t,s,n;return{id:String(null!==(t=null==e?void 0:e.id)&&void 0!==t?t:"").trim(),name:String(null!==(s=null==e?void 0:e.name)&&void 0!==s?s:"").trim()||String(null!==(n=null==e?void 0:e.id)&&void 0!==n?n:"").trim()}}).filter(e=>!!e.id):[],a=i.length>0?i:x.map(e=>({id:e,name:e}));v(a),y((null==t?void 0:t.currentTeamId)&&(null===(s=a.find(e=>e.id===t.currentTeamId))||void 0===s?void 0:s.id)||f&&(null===(n=a.find(e=>e.id===f))||void 0===n?void 0:n.id)||(null===(l=a[0])||void 0===l?void 0:l.id)||"")}).catch(()=>{e||(v(x.map(e=>({id:e,name:e}))),I("No se pudieron cargar los equipos."))}).finally(()=>{e||N(!1)}),()=>{e=!0}},[k,f,P,x]),(0,l.useEffect)(()=>{f&&y(f)},[f]),"loading"===u||!P)return null;let C="https:"===window.location.protocol?"; Secure":"";async function E(e){let t=e.target.value;if(t&&t!==j){y(t),S(!0),I(null);try{document.cookie="ctb_team=".concat(encodeURIComponent(t),"; path=/; max-age=").concat(2592e3,"; SameSite=Lax").concat(C);let e=await fetch("/api/session/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamId:t})});if(!e.ok){let t=await e.json().catch(()=>null);throw Error((null==t?void 0:t.error)||"Error ".concat(e.status))}await (null==m?void 0:m()),h.refresh()}catch(e){y(j),I((null==e?void 0:e.message)||"No se pudo cambiar de equipo.")}finally{S(!1)}}}let O=["flex flex-col gap-1 text-xs",c].filter(Boolean).join(" ");return 0===p.length?null:(0,n.jsxs)("div",{className:O,children:[(0,n.jsx)("label",{className:"text-[10px] font-semibold uppercase text-gray-500",children:o}),(0,n.jsx)("select",{value:j,onChange:E,disabled:g||b,className:"w-full rounded-md border px-2 py-1.5 text-sm disabled:opacity-60",children:p.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))}),w?(0,n.jsx)("span",{className:"text-[11px] text-red-600",children:w}):null]})}}},function(e){e.O(0,[231,998,2971,7023,1744],function(){return e(e.s=5265)}),_N_E=e.O()}]);