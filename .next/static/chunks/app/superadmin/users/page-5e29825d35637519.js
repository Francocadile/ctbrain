(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9029],{3886:function(e,t,r){Promise.resolve().then(r.bind(r,912)),Promise.resolve().then(r.bind(r,1481)),Promise.resolve().then(r.bind(r,64)),Promise.resolve().then(r.bind(r,7305))},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},912:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let n=r(5592);function a(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return r}},1481:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return s}});let n=r(7437),a=r(8512);function s(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,a.getExpectedRequestStore)("next/dynamic css"),s=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));s.push(...t)}}return 0===s.length?null:(0,n.jsx)(n.Fragment,{children:s.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},64:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var n=r(7437),a=r(2265),s=r(6463);function i(e){let{teams:t}=e,[r,i]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),[u,d]=(0,a.useState)("JUGADOR"),[c,m]=(0,a.useState)(""),[p,x]=(0,a.useState)(""),[h,f]=(0,a.useState)(!1),[b,j]=(0,a.useState)(null),v=(0,s.useRouter)(),y=async e=>{e.preventDefault(),f(!0),j(null);let t=await fetch("/api/superadmin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,email:l,role:u,teamId:c,password:p})});t.ok?(j("Usuario creado correctamente"),i(""),o(""),d("JUGADOR"),m(""),x(""),v.refresh()):j((await t.json()).error||"Error al crear usuario"),f(!1)};return(0,n.jsxs)("form",{onSubmit:y,className:"mb-6 flex gap-2 items-end",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nombre"}),(0,n.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),required:!0,className:"border rounded px-2 py-1"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Email"}),(0,n.jsx)("input",{type:"email",value:l,onChange:e=>o(e.target.value),required:!0,className:"border rounded px-2 py-1"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Rol"}),(0,n.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"border rounded px-2 py-1",children:[(0,n.jsx)("option",{value:"SUPERADMIN",children:"Superadmin"}),(0,n.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,n.jsx)("option",{value:"CT",children:"CT"}),(0,n.jsx)("option",{value:"MEDICO",children:"M\xe9dico"}),(0,n.jsx)("option",{value:"JUGADOR",children:"Jugador"}),(0,n.jsx)("option",{value:"DIRECTIVO",children:"Directivo"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Equipo"}),(0,n.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:"border rounded px-2 py-1",children:[(0,n.jsx)("option",{value:"",children:"Sin equipo"}),t.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Contrase\xf1a"}),(0,n.jsx)("input",{type:"password",value:p,onChange:e=>x(e.target.value),required:!0,className:"border rounded px-2 py-1"})]}),(0,n.jsx)("button",{type:"submit",disabled:h||!l||!p,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:h?"Creando...":"Crear usuario"}),b&&(0,n.jsx)("span",{className:"ml-4 text-sm text-gray-600",children:b})]})}},7305:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var n=r(7437),a=r(2265),s=r(6463);function i(e){let{user:t}=e,[r,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)(t.name),[u,d]=(0,a.useState)(t.email),[c,m]=(0,a.useState)(t.role),[p,x]=(0,a.useState)(t.teamId||""),[h,f]=(0,a.useState)(!1),[b,j]=(0,a.useState)(null),v=(0,s.useRouter)(),y=async e=>{e.preventDefault(),f(!0),j(null);let r=await fetch("/api/superadmin/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id,name:l,email:u,role:c,teamId:p})});r.ok?(i(!1),v.refresh()):j((await r.json()).error||"Error al editar usuario"),f(!1)},g=async()=>{if(!confirm("\xbfSeguro que deseas eliminar este usuario?"))return;f(!0),j(null);let e=await fetch("/api/superadmin/users",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id})});e.ok?v.refresh():j((await e.json()).error||"Error al eliminar usuario"),f(!1)};return(0,n.jsxs)("tr",{className:"border-t",children:[(0,n.jsxs)("td",{className:"px-4 py-2",children:[r?(0,n.jsxs)("form",{onSubmit:y,className:"flex gap-2 items-center",children:[(0,n.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),className:"border rounded px-2 py-1"}),(0,n.jsx)("input",{type:"email",value:u,onChange:e=>d(e.target.value),className:"border rounded px-2 py-1"}),(0,n.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:"border rounded px-2 py-1",children:[(0,n.jsx)("option",{value:"SUPERADMIN",children:"Superadmin"}),(0,n.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,n.jsx)("option",{value:"CT",children:"CT"}),(0,n.jsx)("option",{value:"MEDICO",children:"M\xe9dico"}),(0,n.jsx)("option",{value:"JUGADOR",children:"Jugador"}),(0,n.jsx)("option",{value:"DIRECTIVO",children:"Directivo"})]}),(0,n.jsx)("input",{type:"text",value:p,onChange:e=>x(e.target.value),className:"border rounded px-2 py-1",placeholder:"ID equipo"}),(0,n.jsx)("button",{type:"submit",disabled:h||!u,className:"bg-green-600 text-white px-2 py-1 rounded",children:"Guardar"}),(0,n.jsx)("button",{type:"button",onClick:()=>i(!1),className:"text-gray-500 px-2 py-1",children:"Cancelar"})]}):(0,n.jsx)("span",{children:t.name}),b&&(0,n.jsx)("div",{className:"text-xs text-red-600 mt-1",children:b})]}),(0,n.jsx)("td",{className:"px-4 py-2 text-xs text-gray-500",children:t.email}),(0,n.jsx)("td",{className:"px-4 py-2 text-xs text-gray-500",children:t.role}),(0,n.jsx)("td",{className:"px-4 py-2 text-xs text-gray-500",children:t.teamId||"Sin equipo"}),(0,n.jsx)("td",{className:"px-4 py-2",children:!r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>i(!0),className:"text-blue-600 hover:underline mr-2",children:"Editar"}),(0,n.jsx)("button",{onClick:g,className:"text-red-600 hover:underline",children:"Eliminar"})]})})]})}}},function(e){e.O(0,[2971,7023,1744],function(){return e(e.s=3886)}),_N_E=e.O()}]);